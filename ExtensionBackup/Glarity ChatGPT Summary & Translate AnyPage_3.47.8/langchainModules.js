"use strict";(()=>{var Iy=Object.create;var bo=Object.defineProperty;var Sy=Object.getOwnPropertyDescriptor;var jy=Object.getOwnPropertyNames;var ky=Object.getPrototypeOf,Ry=Object.prototype.hasOwnProperty;var Ln=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var M=(t,e)=>()=>(t&&(e=t(t=0)),e);var L=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ut=(t,e)=>{for(var r in e)bo(t,r,{get:e[r],enumerable:!0})},Ny=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of jy(e))!Ry.call(t,i)&&i!==r&&bo(t,i,{get:()=>e[i],enumerable:!(n=Sy(e,i))||n.enumerable});return t};var be=(t,e,r)=>(r=t!=null?Iy(ky(t)):{},Ny(e||!t||!t.__esModule?bo(r,"default",{value:t,enumerable:!0}):r,t));var h,l=M(()=>{h={ACCOUNT_HOST:"https://account.felo.ai",ALLUSERSPROFILE:"C:\\ProgramData",APPDATA:"C:\\Users\\wangzhiming\\AppData\\Roaming","asl.log":"Destination=file",CHROME_CRASHPAD_PIPE_NAME:"\\\\.\\pipe\\crashpad_27296_WUXDIAYXEUATCVXW",COLOR:"1",COLORTERM:"truecolor",CommonProgramFiles:"C:\\Program Files\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files",CommonProgramW6432:"C:\\Program Files\\Common Files",COMPUTERNAME:"WZM",ComSpec:"C:\\WINDOWS\\system32\\cmd.exe",DriverData:"C:\\Windows\\System32\\Drivers\\DriverData",EDITOR:"C:\\WINDOWS\\notepad.exe",EFC_16544:"1",FREE_API_HOST:"api-v2.glarity.app",GIT_ASKPASS:"d:\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass.sh",GLARITY_CENTER_URL:"https://glarity.app",GLARITY_CONFIG_URL:"https://api-v2.glarity.app",GLARITY_LOG_URL:"https://log.felo.ai",HOME:"C:\\Users\\wangzhiming",HOMEDRIVE:"C:",HOMEPATH:"\\Users\\wangzhiming",iGame:"D:\\iGame\\",INIT_CWD:"C:\\Users\\wangzhiming\\Desktop\\felo\\glarity-summary-extension",LANG:"zh_CN.UTF-8",LOCALAPPDATA:"C:\\Users\\wangzhiming\\AppData\\Local",LOGONSERVER:"\\\\WZM",NODE:"C:\\Program Files\\nodejs\\node.exe",NODE_ENV:"production",NODE_EXE:"C:\\Program Files\\nodejs\\\\node.exe",NODE_PATH:"C:\\Users\\wangzhiming\\Desktop\\felo\\glarity-summary-extension\\node_modules\\.pnpm\\cross-env@7.0.3\\node_modules\\cross-env\\src\\bin\\node_modules;C:\\Users\\wangzhiming\\Desktop\\felo\\glarity-summary-extension\\node_modules\\.pnpm\\cross-env@7.0.3\\node_modules\\cross-env\\src\\node_modules;C:\\Users\\wangzhiming\\Desktop\\felo\\glarity-summary-extension\\node_modules\\.pnpm\\cross-env@7.0.3\\node_modules\\cross-env\\node_modules;C:\\Users\\wangzhiming\\Desktop\\felo\\glarity-summary-extension\\node_modules\\.pnpm\\cross-env@7.0.3\\node_modules;C:\\Users\\wangzhiming\\Desktop\\felo\\glarity-summary-extension\\node_modules\\.pnpm\\node_modules",NPM_CLI_JS:"C:\\Users\\wangzhiming\\AppData\\Roaming\\npm\\node_modules\\npm\\bin\\npm-cli.js",npm_command:"run-script",npm_config_cache:"C:\\Users\\wangzhiming\\AppData\\Local\\npm-cache",npm_config_globalconfig:"C:\\Users\\wangzhiming\\AppData\\Roaming\\npm\\etc\\npmrc",npm_config_global_prefix:"C:\\Users\\wangzhiming\\AppData\\Roaming\\npm",npm_config_init_module:"C:\\Users\\wangzhiming\\.npm-init.js",npm_config_local_prefix:"C:\\Users\\wangzhiming\\Desktop\\felo\\glarity-summary-extension",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_config_node_gyp:"C:\\Users\\wangzhiming\\AppData\\Roaming\\npm\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js",npm_config_noproxy:"",npm_config_prefix:"C:\\Users\\wangzhiming\\AppData\\Roaming\\npm",npm_config_userconfig:"C:\\Users\\wangzhiming\\.npmrc",npm_config_user_agent:"npm/9.4.0 node/v16.18.1 win32 x64 workspaces/false",npm_execpath:"C:\\Users\\wangzhiming\\AppData\\Roaming\\npm\\node_modules\\npm\\bin\\npm-cli.js",npm_lifecycle_event:"build",npm_lifecycle_script:"cross-env NODE_ENV='production' node build.mjs",npm_node_execpath:"C:\\Program Files\\nodejs\\node.exe",npm_package_json:"C:\\Users\\wangzhiming\\Desktop\\felo\\glarity-summary-extension\\package.json",npm_package_name:"glarity-summary-extension",npm_package_version:"3.2.0",NPM_PREFIX_NPM_CLI_JS:"C:\\Users\\wangzhiming\\AppData\\Roaming\\npm\\node_modules\\npm\\bin\\npm-cli.js",NUMBER_OF_PROCESSORS:"12",OneDrive:"C:\\Users\\wangzhiming\\OneDrive",OneDriveConsumer:"C:\\Users\\wangzhiming\\OneDrive",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",OS:"Windows_NT",Path:"C:\\Users\\wangzhiming\\Desktop\\felo\\glarity-summary-extension\\node_modules\\.bin;C:\\Users\\wangzhiming\\Desktop\\felo\\node_modules\\.bin;C:\\Users\\wangzhiming\\Desktop\\node_modules\\.bin;C:\\Users\\wangzhiming\\node_modules\\.bin;C:\\Users\\node_modules\\.bin;C:\\node_modules\\.bin;C:\\Users\\wangzhiming\\AppData\\Roaming\\npm\\node_modules\\npm\\node_modules\\@npmcli\\run-script\\lib\\node-gyp-bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\NVIDIA Corporation\\NVIDIA NvDLISR;C:\\Program Files\\Git\\cmd;D:\\\u5FAE\u4FE1web\u5F00\u53D1\u8005\u5DE5\u5177\\dll;C:\\Program Files\\nodejs\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Users\\wangzhiming\\AppData\\Local\\pnpm;C:\\Users\\wangzhiming\\AppData\\Local\\Programs\\Python\\Python311\\Scripts\\;C:\\Users\\wangzhiming\\AppData\\Local\\Programs\\Python\\Python311\\;C:\\Users\\wangzhiming\\AppData\\Local\\Microsoft\\WindowsApps;;D:\\Microsoft VS Code\\bin;C:\\Users\\wangzhiming\\AppData\\Roaming\\npm",PATHEXT:".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JSE;.WSF;.WSH;.MSC",PNPM_HOME:"C:\\Users\\wangzhiming\\AppData\\Local\\pnpm",PROCESSOR_ARCHITECTURE:"AMD64",PROCESSOR_IDENTIFIER:"Intel64 Family 6 Model 141 Stepping 1, GenuineIntel",PROCESSOR_LEVEL:"6",PROCESSOR_REVISION:"8d01",ProgramData:"C:\\ProgramData",ProgramFiles:"C:\\Program Files","ProgramFiles(x86)":"C:\\Program Files (x86)",ProgramW6432:"C:\\Program Files",PROMPT:"$P$G",PSModulePath:"C:\\Program Files\\WindowsPowerShell\\Modules;C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0\\Modules",PUBLIC:"C:\\Users\\Public",SESSIONNAME:"Console",SystemDrive:"C:",SystemRoot:"C:\\WINDOWS",TEMP:"C:\\Users\\WANGZH~1\\AppData\\Local\\Temp",TERM_PROGRAM:"vscode",TERM_PROGRAM_VERSION:"1.84.2",TMP:"C:\\Users\\WANGZH~1\\AppData\\Local\\Temp",USERDOMAIN:"wzm",USERDOMAIN_ROAMINGPROFILE:"wzm",USERNAME:"wangzhiming",USERPROFILE:"C:\\Users\\wangzhiming",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",VSCODE_GIT_ASKPASS_MAIN:"d:\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass-main.js",VSCODE_GIT_ASKPASS_NODE:"D:\\Microsoft VS Code\\Code.exe",VSCODE_GIT_IPC_HANDLE:"\\\\.\\pipe\\vscode-git-8ad088907c-sock",windir:"C:\\WINDOWS",ZES_ENABLE_SYSMAN:"1"}});var wo=L((JA,oc)=>{"use strict";l();oc.exports=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}}});var Be=L((WA,dc)=>{"use strict";l();var Ly=wo(),Ut=Object.prototype.toString;function xo(t){return Array.isArray(t)}function _o(t){return typeof t>"u"}function Dy(t){return t!==null&&!_o(t)&&t.constructor!==null&&!_o(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function uc(t){return Ut.call(t)==="[object ArrayBuffer]"}function qy(t){return Ut.call(t)==="[object FormData]"}function Fy(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&uc(t.buffer),e}function Uy(t){return typeof t=="string"}function Vy(t){return typeof t=="number"}function lc(t){return t!==null&&typeof t=="object"}function Fi(t){if(Ut.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function By(t){return Ut.call(t)==="[object Date]"}function zy(t){return Ut.call(t)==="[object File]"}function Ky(t){return Ut.call(t)==="[object Blob]"}function cc(t){return Ut.call(t)==="[object Function]"}function $y(t){return lc(t)&&cc(t.pipe)}function Zy(t){return Ut.call(t)==="[object URLSearchParams]"}function Hy(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Jy(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Oo(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),xo(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function vo(){var t={};function e(i,a){Fi(t[a])&&Fi(i)?t[a]=vo(t[a],i):Fi(i)?t[a]=vo({},i):xo(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)Oo(arguments[r],e);return t}function Yy(t,e,r){return Oo(e,function(i,a){r&&typeof i=="function"?t[a]=Ly(i,r):t[a]=i}),t}function Wy(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}dc.exports={isArray:xo,isArrayBuffer:uc,isBuffer:Dy,isFormData:qy,isArrayBufferView:Fy,isString:Uy,isNumber:Vy,isObject:lc,isPlainObject:Fi,isUndefined:_o,isDate:By,isFile:zy,isBlob:Ky,isFunction:cc,isStream:$y,isURLSearchParams:Zy,isStandardBrowserEnv:Jy,forEach:Oo,merge:vo,extend:Yy,trim:Hy,stripBOM:Wy}});var Ao=L((QA,hc)=>{"use strict";l();var Vr=Be();function pc(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}hc.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Vr.isURLSearchParams(r))i=r.toString();else{var a=[];Vr.forEach(r,function(u,c){u===null||typeof u>"u"||(Vr.isArray(u)?c=c+"[]":u=[u],Vr.forEach(u,function(p){Vr.isDate(p)?p=p.toISOString():Vr.isObject(p)&&(p=JSON.stringify(p)),a.push(pc(c)+"="+pc(p))}))}),i=a.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var mc=L((eP,fc)=>{"use strict";l();var Gy=Be();function Ui(){this.handlers=[]}Ui.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Ui.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Ui.prototype.forEach=function(e){Gy.forEach(this.handlers,function(n){n!==null&&e(n)})};fc.exports=Ui});var gc=L((rP,yc)=>{"use strict";l();var Qy=Be();yc.exports=function(e,r){Qy.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})}});var Po=L((iP,bc)=>{"use strict";l();bc.exports=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var Eo=L((sP,wc)=>{"use strict";l();wc.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var To=L((uP,_c)=>{"use strict";l();var Xy=Po();_c.exports=function(e,r,n,i,a){var s=new Error(e);return Xy(s,r,n,i,a)}});var xc=L((cP,vc)=>{"use strict";l();var eg=To();vc.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(eg("Request failed with status code "+n.status,n.config,null,n.request,n))}});var Ac=L((pP,Oc)=>{"use strict";l();var Vi=Be();Oc.exports=Vi.isStandardBrowserEnv()?function(){return{write:function(r,n,i,a,s,o){var u=[];u.push(r+"="+encodeURIComponent(n)),Vi.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),Vi.isString(a)&&u.push("path="+a),Vi.isString(s)&&u.push("domain="+s),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Ec=L((fP,Pc)=>{"use strict";l();Pc.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var Cc=L((yP,Tc)=>{"use strict";l();Tc.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var Sc=L((bP,Ic)=>{"use strict";l();var tg=Ec(),rg=Cc();Ic.exports=function(e,r){return e&&!tg(r)?rg(e,r):r}});var kc=L((_P,jc)=>{"use strict";l();var Co=Be(),ng=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];jc.exports=function(e){var r={},n,i,a;return e&&Co.forEach(e.split(`
`),function(o){if(a=o.indexOf(":"),n=Co.trim(o.substr(0,a)).toLowerCase(),i=Co.trim(o.substr(a+1)),n){if(r[n]&&ng.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var Mc=L((xP,Nc)=>{"use strict";l();var Rc=Be();Nc.exports=Rc.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(a){var s=a;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var o=Rc.isString(s)?i(s):s;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}()});var Dn=L((AP,Lc)=>{"use strict";l();function Io(t){this.message=t}Io.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Io.prototype.__CANCEL__=!0;Lc.exports=Io});var jo=L((EP,Dc)=>{"use strict";l();var Bi=Be(),ig=xc(),ag=Ac(),sg=Ao(),og=Sc(),ug=kc(),lg=Mc(),So=To(),cg=Eo(),dg=Dn();Dc.exports=function(e){return new Promise(function(n,i){var a=e.data,s=e.headers,o=e.responseType,u;function c(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}Bi.isFormData(a)&&delete s["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(p+":"+b)}var v=og(e.baseURL,e.url);d.open(e.method.toUpperCase(),sg(v,e.params,e.paramsSerializer),!0),d.timeout=e.timeout;function m(){if(d){var T="getAllResponseHeaders"in d?ug(d.getAllResponseHeaders()):null,k=!o||o==="text"||o==="json"?d.responseText:d.response,S={data:k,status:d.status,statusText:d.statusText,headers:T,config:e,request:d};ig(function(O){n(O),c()},function(O){i(O),c()},S),d=null}}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(i(So("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){i(So("Network Error",e,null,d)),d=null},d.ontimeout=function(){var k=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",S=e.transitional||cg;e.timeoutErrorMessage&&(k=e.timeoutErrorMessage),i(So(k,e,S.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",d)),d=null},Bi.isStandardBrowserEnv()){var x=(e.withCredentials||lg(v))&&e.xsrfCookieName?ag.read(e.xsrfCookieName):void 0;x&&(s[e.xsrfHeaderName]=x)}"setRequestHeader"in d&&Bi.forEach(s,function(k,S){typeof a>"u"&&S.toLowerCase()==="content-type"?delete s[S]:d.setRequestHeader(S,k)}),Bi.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),o&&o!=="json"&&(d.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&d.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(T){d&&(i(!T||T&&T.type?new dg("canceled"):T),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),a||(a=null),d.send(a)})}});var Ki=L((CP,Uc)=>{"use strict";l();var je=Be(),qc=gc(),pg=Po(),hg=Eo(),fg={"Content-Type":"application/x-www-form-urlencoded"};function Fc(t,e){!je.isUndefined(t)&&je.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function mg(){var t;return typeof XMLHttpRequest<"u"?t=jo():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=jo()),t}function yg(t,e,r){if(je.isString(t))try{return(e||JSON.parse)(t),je.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var zi={transitional:hg,adapter:mg(),transformRequest:[function(e,r){return qc(r,"Accept"),qc(r,"Content-Type"),je.isFormData(e)||je.isArrayBuffer(e)||je.isBuffer(e)||je.isStream(e)||je.isFile(e)||je.isBlob(e)?e:je.isArrayBufferView(e)?e.buffer:je.isURLSearchParams(e)?(Fc(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):je.isObject(e)||r&&r["Content-Type"]==="application/json"?(Fc(r,"application/json"),yg(e)):e}],transformResponse:[function(e){var r=this.transitional||zi.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&je.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(a)throw s.name==="SyntaxError"?pg(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};je.forEach(["delete","get","head"],function(e){zi.headers[e]={}});je.forEach(["post","put","patch"],function(e){zi.headers[e]=je.merge(fg)});Uc.exports=zi});var Bc=L((SP,Vc)=>{"use strict";l();var gg=Be(),bg=Ki();Vc.exports=function(e,r,n){var i=this||bg;return gg.forEach(n,function(s){e=s.call(i,e,r)}),e}});var ko=L((kP,zc)=>{"use strict";l();zc.exports=function(e){return!!(e&&e.__CANCEL__)}});var Zc=L((NP,$c)=>{"use strict";l();var Kc=Be(),Ro=Bc(),wg=ko(),_g=Ki(),vg=Dn();function No(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new vg("canceled")}$c.exports=function(e){No(e),e.headers=e.headers||{},e.data=Ro.call(e,e.data,e.headers,e.transformRequest),e.headers=Kc.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Kc.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||_g.adapter;return r(e).then(function(i){return No(e),i.data=Ro.call(e,i.data,i.headers,e.transformResponse),i},function(i){return wg(i)||(No(e),i&&i.response&&(i.response.data=Ro.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var Mo=L((LP,Hc)=>{"use strict";l();var Qe=Be();Hc.exports=function(e,r){r=r||{};var n={};function i(d,p){return Qe.isPlainObject(d)&&Qe.isPlainObject(p)?Qe.merge(d,p):Qe.isPlainObject(p)?Qe.merge({},p):Qe.isArray(p)?p.slice():p}function a(d){if(Qe.isUndefined(r[d])){if(!Qe.isUndefined(e[d]))return i(void 0,e[d])}else return i(e[d],r[d])}function s(d){if(!Qe.isUndefined(r[d]))return i(void 0,r[d])}function o(d){if(Qe.isUndefined(r[d])){if(!Qe.isUndefined(e[d]))return i(void 0,e[d])}else return i(void 0,r[d])}function u(d){if(d in r)return i(e[d],r[d]);if(d in e)return i(void 0,e[d])}var c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return Qe.forEach(Object.keys(e).concat(Object.keys(r)),function(p){var b=c[p]||a,v=b(p);Qe.isUndefined(v)&&b!==u||(n[p]=v)}),n}});var Lo=L((qP,Jc)=>{l();Jc.exports={version:"0.26.1"}});var Gc=L((UP,Wc)=>{"use strict";l();var xg=Lo().version,Do={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Do[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Yc={};Do.transitional=function(e,r,n){function i(a,s){return"[Axios v"+xg+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return function(a,s,o){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!Yc[s]&&(Yc[s]=!0),e?e(a,s,o):!0}};function Og(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],s=e[a];if(s){var o=t[a],u=o===void 0||s(o,a,t);if(u!==!0)throw new TypeError("option "+a+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+a)}}Wc.exports={assertOptions:Og,validators:Do}});var nd=L((BP,rd)=>{"use strict";l();var ed=Be(),Ag=Ao(),Qc=mc(),Xc=Zc(),$i=Mo(),td=Gc(),Br=td.validators;function qn(t){this.defaults=t,this.interceptors={request:new Qc,response:new Qc}}qn.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=$i(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&td.assertOptions(n,{silentJSONParsing:Br.transitional(Br.boolean),forcedJSONParsing:Br.transitional(Br.boolean),clarifyTimeoutError:Br.transitional(Br.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(a=a&&v.synchronous,i.unshift(v.fulfilled,v.rejected))});var s=[];this.interceptors.response.forEach(function(v){s.push(v.fulfilled,v.rejected)});var o;if(!a){var u=[Xc,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(s),o=Promise.resolve(r);u.length;)o=o.then(u.shift(),u.shift());return o}for(var c=r;i.length;){var d=i.shift(),p=i.shift();try{c=d(c)}catch(b){p(b);break}}try{o=Xc(c)}catch(b){return Promise.reject(b)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};qn.prototype.getUri=function(e){return e=$i(this.defaults,e),Ag(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};ed.forEach(["delete","get","head","options"],function(e){qn.prototype[e]=function(r,n){return this.request($i(n||{},{method:e,url:r,data:(n||{}).data}))}});ed.forEach(["post","put","patch"],function(e){qn.prototype[e]=function(r,n,i){return this.request($i(i||{},{method:e,url:r,data:n}))}});rd.exports=qn});var ad=L((KP,id)=>{"use strict";l();var Pg=Dn();function zr(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(r._listeners){var i,a=r._listeners.length;for(i=0;i<a;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,a=new Promise(function(s){r.subscribe(s),i=s}).then(n);return a.cancel=function(){r.unsubscribe(i)},a},t(function(i){r.reason||(r.reason=new Pg(i),e(r.reason))})}zr.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};zr.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};zr.prototype.unsubscribe=function(e){if(this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};zr.source=function(){var e,r=new zr(function(i){e=i});return{token:r,cancel:e}};id.exports=zr});var od=L((ZP,sd)=>{"use strict";l();sd.exports=function(e){return function(n){return e.apply(null,n)}}});var ld=L((JP,ud)=>{"use strict";l();var Eg=Be();ud.exports=function(e){return Eg.isObject(e)&&e.isAxiosError===!0}});var pd=L((WP,qo)=>{"use strict";l();var cd=Be(),Tg=wo(),Zi=nd(),Cg=Mo(),Ig=Ki();function dd(t){var e=new Zi(t),r=Tg(Zi.prototype.request,e);return cd.extend(r,Zi.prototype,e),cd.extend(r,e),r.create=function(i){return dd(Cg(t,i))},r}var mt=dd(Ig);mt.Axios=Zi;mt.Cancel=Dn();mt.CancelToken=ad();mt.isCancel=ko();mt.VERSION=Lo().version;mt.all=function(e){return Promise.all(e)};mt.spread=od();mt.isAxiosError=ld();qo.exports=mt;qo.exports.default=mt});var Fo=L((QP,hd)=>{l();hd.exports=pd()});var Bo=L(lt=>{"use strict";l();Object.defineProperty(lt,"__esModule",{value:!0});lt.RequiredError=lt.BaseAPI=lt.COLLECTION_FORMATS=lt.BASE_PATH=void 0;var Sg=Fo();lt.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,"");lt.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};var Uo=class{constructor(e,r=lt.BASE_PATH,n=Sg.default){this.basePath=r,this.axios=n,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}};lt.BaseAPI=Uo;var Vo=class extends Error{constructor(e,r){super(r),this.field=e,this.name="RequiredError"}};lt.RequiredError=Vo});var fd=L(fe=>{"use strict";l();var Ko=fe&&fe.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(p){s(p)}}function u(d){try{c(n.throw(d))}catch(p){s(p)}}function c(d){d.done?a(d.value):i(d.value).then(o,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(fe,"__esModule",{value:!0});fe.createRequestFunction=fe.toPathString=fe.serializeDataIfNeeded=fe.setSearchParams=fe.setOAuthToObject=fe.setBearerAuthToObject=fe.setBasicAuthToObject=fe.setApiKeyToObject=fe.assertParamExists=fe.DUMMY_BASE_URL=void 0;var jg=Bo();fe.DUMMY_BASE_URL="https://example.com";fe.assertParamExists=function(t,e,r){if(r==null)throw new jg.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};fe.setApiKeyToObject=function(t,e,r){return Ko(this,void 0,void 0,function*(){if(r&&r.apiKey){let n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};fe.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};fe.setBearerAuthToObject=function(t,e){return Ko(this,void 0,void 0,function*(){if(e&&e.accessToken){let r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};fe.setOAuthToObject=function(t,e,r,n){return Ko(this,void 0,void 0,function*(){if(n&&n.accessToken){let i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function zo(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>zo(t,n,r)):Object.keys(e).forEach(n=>zo(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}fe.setSearchParams=function(t,...e){let r=new URLSearchParams(t.search);zo(r,e),t.search=r.toString()};fe.serializeDataIfNeeded=function(t,e,r){let n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};fe.toPathString=function(t){return t.pathname+t.search+t.hash};fe.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{let s=Object.assign(Object.assign({},t.options),{url:(n?.basePath||a)+t.url});return i.request(s)}}});var md=L(J=>{"use strict";l();var $=J&&J.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(p){s(p)}}function u(d){try{c(n.throw(d))}catch(p){s(p)}}function c(d){d.done?a(d.value):i(d.value).then(o,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(J,"__esModule",{value:!0});J.OpenAIApi=J.OpenAIApiFactory=J.OpenAIApiFp=J.OpenAIApiAxiosParamCreator=J.CreateImageRequestResponseFormatEnum=J.CreateImageRequestSizeEnum=J.ChatCompletionResponseMessageRoleEnum=J.ChatCompletionRequestMessageRoleEnum=void 0;var ce=Fo(),E=fd(),ue=Bo();J.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"};J.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"};J.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"};J.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"};J.OpenAIApiAxiosParamCreator=function(t){return{cancelFineTune:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("cancelFineTune","fineTuneId",e);let n="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(e))),i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:E.toPathString(i),options:s}}),createAnswer:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createAnswer","createAnswerRequest",e);let n="/answers",i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=E.serializeDataIfNeeded(e,s,t),{url:E.toPathString(i),options:s}}),createChatCompletion:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createChatCompletion","createChatCompletionRequest",e);let n="/chat/completions",i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=E.serializeDataIfNeeded(e,s,t),{url:E.toPathString(i),options:s}}),createClassification:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createClassification","createClassificationRequest",e);let n="/classifications",i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=E.serializeDataIfNeeded(e,s,t),{url:E.toPathString(i),options:s}}),createCompletion:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createCompletion","createCompletionRequest",e);let n="/completions",i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=E.serializeDataIfNeeded(e,s,t),{url:E.toPathString(i),options:s}}),createEdit:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createEdit","createEditRequest",e);let n="/edits",i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=E.serializeDataIfNeeded(e,s,t),{url:E.toPathString(i),options:s}}),createEmbedding:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createEmbedding","createEmbeddingRequest",e);let n="/embeddings",i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=E.serializeDataIfNeeded(e,s,t),{url:E.toPathString(i),options:s}}),createFile:(e,r,n={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createFile","file",e),E.assertParamExists("createFile","purpose",r);let i="/files",a=new URL(i,E.DUMMY_BASE_URL),s;t&&(s=t.baseOptions);let o=Object.assign(Object.assign({method:"POST"},s),n),u={},c={},d=new(t&&t.formDataCtor||FormData);e!==void 0&&d.append("file",e),r!==void 0&&d.append("purpose",r),u["Content-Type"]="multipart/form-data",E.setSearchParams(a,c);let p=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign(Object.assign({},u),d.getHeaders()),p),n.headers),o.data=d,{url:E.toPathString(a),options:o}}),createFineTune:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createFineTune","createFineTuneRequest",e);let n="/fine-tunes",i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=E.serializeDataIfNeeded(e,s,t),{url:E.toPathString(i),options:s}}),createImage:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createImage","createImageRequest",e);let n="/images/generations",i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=E.serializeDataIfNeeded(e,s,t),{url:E.toPathString(i),options:s}}),createImageEdit:(e,r,n,i,a,s,o,u={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createImageEdit","image",e),E.assertParamExists("createImageEdit","prompt",r);let c="/images/edits",d=new URL(c,E.DUMMY_BASE_URL),p;t&&(p=t.baseOptions);let b=Object.assign(Object.assign({method:"POST"},p),u),v={},m={},x=new(t&&t.formDataCtor||FormData);e!==void 0&&x.append("image",e),n!==void 0&&x.append("mask",n),r!==void 0&&x.append("prompt",r),i!==void 0&&x.append("n",i),a!==void 0&&x.append("size",a),s!==void 0&&x.append("response_format",s),o!==void 0&&x.append("user",o),v["Content-Type"]="multipart/form-data",E.setSearchParams(d,m);let T=p&&p.headers?p.headers:{};return b.headers=Object.assign(Object.assign(Object.assign(Object.assign({},v),x.getHeaders()),T),u.headers),b.data=x,{url:E.toPathString(d),options:b}}),createImageVariation:(e,r,n,i,a,s={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createImageVariation","image",e);let o="/images/variations",u=new URL(o,E.DUMMY_BASE_URL),c;t&&(c=t.baseOptions);let d=Object.assign(Object.assign({method:"POST"},c),s),p={},b={},v=new(t&&t.formDataCtor||FormData);e!==void 0&&v.append("image",e),r!==void 0&&v.append("n",r),n!==void 0&&v.append("size",n),i!==void 0&&v.append("response_format",i),a!==void 0&&v.append("user",a),p["Content-Type"]="multipart/form-data",E.setSearchParams(u,b);let m=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign(Object.assign({},p),v.getHeaders()),m),s.headers),d.data=v,{url:E.toPathString(u),options:d}}),createModeration:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createModeration","createModerationRequest",e);let n="/moderations",i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"POST"},a),r),o={},u={};o["Content-Type"]="application/json",E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=E.serializeDataIfNeeded(e,s,t),{url:E.toPathString(i),options:s}}),createSearch:(e,r,n={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createSearch","engineId",e),E.assertParamExists("createSearch","createSearchRequest",r);let i="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(e))),a=new URL(i,E.DUMMY_BASE_URL),s;t&&(s=t.baseOptions);let o=Object.assign(Object.assign({method:"POST"},s),n),u={},c={};u["Content-Type"]="application/json",E.setSearchParams(a,c);let d=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},u),d),n.headers),o.data=E.serializeDataIfNeeded(r,o,t),{url:E.toPathString(a),options:o}}),createTranscription:(e,r,n,i,a,s,o={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createTranscription","file",e),E.assertParamExists("createTranscription","model",r);let u="/audio/transcriptions",c=new URL(u,E.DUMMY_BASE_URL),d;t&&(d=t.baseOptions);let p=Object.assign(Object.assign({method:"POST"},d),o),b={},v={},m=new(t&&t.formDataCtor||FormData);e!==void 0&&m.append("file",e),r!==void 0&&m.append("model",r),n!==void 0&&m.append("prompt",n),i!==void 0&&m.append("response_format",i),a!==void 0&&m.append("temperature",a),s!==void 0&&m.append("language",s),b["Content-Type"]="multipart/form-data",E.setSearchParams(c,v);let x=d&&d.headers?d.headers:{};return p.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),m.getHeaders()),x),o.headers),p.data=m,{url:E.toPathString(c),options:p}}),createTranslation:(e,r,n,i,a,s={})=>$(this,void 0,void 0,function*(){E.assertParamExists("createTranslation","file",e),E.assertParamExists("createTranslation","model",r);let o="/audio/translations",u=new URL(o,E.DUMMY_BASE_URL),c;t&&(c=t.baseOptions);let d=Object.assign(Object.assign({method:"POST"},c),s),p={},b={},v=new(t&&t.formDataCtor||FormData);e!==void 0&&v.append("file",e),r!==void 0&&v.append("model",r),n!==void 0&&v.append("prompt",n),i!==void 0&&v.append("response_format",i),a!==void 0&&v.append("temperature",a),p["Content-Type"]="multipart/form-data",E.setSearchParams(u,b);let m=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign(Object.assign({},p),v.getHeaders()),m),s.headers),d.data=v,{url:E.toPathString(u),options:d}}),deleteFile:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("deleteFile","fileId",e);let n="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(e))),i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"DELETE"},a),r),o={},u={};E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:E.toPathString(i),options:s}}),deleteModel:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("deleteModel","model",e);let n="/models/{model}".replace("{model}",encodeURIComponent(String(e))),i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"DELETE"},a),r),o={},u={};E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:E.toPathString(i),options:s}}),downloadFile:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("downloadFile","fileId",e);let n="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(e))),i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:E.toPathString(i),options:s}}),listEngines:(e={})=>$(this,void 0,void 0,function*(){let r="/engines",n=new URL(r,E.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};E.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:E.toPathString(n),options:a}}),listFiles:(e={})=>$(this,void 0,void 0,function*(){let r="/files",n=new URL(r,E.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};E.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:E.toPathString(n),options:a}}),listFineTuneEvents:(e,r,n={})=>$(this,void 0,void 0,function*(){E.assertParamExists("listFineTuneEvents","fineTuneId",e);let i="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(e))),a=new URL(i,E.DUMMY_BASE_URL),s;t&&(s=t.baseOptions);let o=Object.assign(Object.assign({method:"GET"},s),n),u={},c={};r!==void 0&&(c.stream=r),E.setSearchParams(a,c);let d=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},u),d),n.headers),{url:E.toPathString(a),options:o}}),listFineTunes:(e={})=>$(this,void 0,void 0,function*(){let r="/fine-tunes",n=new URL(r,E.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};E.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:E.toPathString(n),options:a}}),listModels:(e={})=>$(this,void 0,void 0,function*(){let r="/models",n=new URL(r,E.DUMMY_BASE_URL),i;t&&(i=t.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),e),s={},o={};E.setSearchParams(n,o);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},s),u),e.headers),{url:E.toPathString(n),options:a}}),retrieveEngine:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("retrieveEngine","engineId",e);let n="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(e))),i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:E.toPathString(i),options:s}}),retrieveFile:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("retrieveFile","fileId",e);let n="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(e))),i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:E.toPathString(i),options:s}}),retrieveFineTune:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("retrieveFineTune","fineTuneId",e);let n="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(e))),i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:E.toPathString(i),options:s}}),retrieveModel:(e,r={})=>$(this,void 0,void 0,function*(){E.assertParamExists("retrieveModel","model",e);let n="/models/{model}".replace("{model}",encodeURIComponent(String(e))),i=new URL(n,E.DUMMY_BASE_URL),a;t&&(a=t.baseOptions);let s=Object.assign(Object.assign({method:"GET"},a),r),o={},u={};E.setSearchParams(i,u);let c=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),{url:E.toPathString(i),options:s}})}};J.OpenAIApiFp=function(t){let e=J.OpenAIApiAxiosParamCreator(t);return{cancelFineTune(r,n){return $(this,void 0,void 0,function*(){let i=yield e.cancelFineTune(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},createAnswer(r,n){return $(this,void 0,void 0,function*(){let i=yield e.createAnswer(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},createChatCompletion(r,n){return $(this,void 0,void 0,function*(){let i=yield e.createChatCompletion(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},createClassification(r,n){return $(this,void 0,void 0,function*(){let i=yield e.createClassification(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},createCompletion(r,n){return $(this,void 0,void 0,function*(){let i=yield e.createCompletion(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},createEdit(r,n){return $(this,void 0,void 0,function*(){let i=yield e.createEdit(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},createEmbedding(r,n){return $(this,void 0,void 0,function*(){let i=yield e.createEmbedding(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},createFile(r,n,i){return $(this,void 0,void 0,function*(){let a=yield e.createFile(r,n,i);return E.createRequestFunction(a,ce.default,ue.BASE_PATH,t)})},createFineTune(r,n){return $(this,void 0,void 0,function*(){let i=yield e.createFineTune(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},createImage(r,n){return $(this,void 0,void 0,function*(){let i=yield e.createImage(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},createImageEdit(r,n,i,a,s,o,u,c){return $(this,void 0,void 0,function*(){let d=yield e.createImageEdit(r,n,i,a,s,o,u,c);return E.createRequestFunction(d,ce.default,ue.BASE_PATH,t)})},createImageVariation(r,n,i,a,s,o){return $(this,void 0,void 0,function*(){let u=yield e.createImageVariation(r,n,i,a,s,o);return E.createRequestFunction(u,ce.default,ue.BASE_PATH,t)})},createModeration(r,n){return $(this,void 0,void 0,function*(){let i=yield e.createModeration(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},createSearch(r,n,i){return $(this,void 0,void 0,function*(){let a=yield e.createSearch(r,n,i);return E.createRequestFunction(a,ce.default,ue.BASE_PATH,t)})},createTranscription(r,n,i,a,s,o,u){return $(this,void 0,void 0,function*(){let c=yield e.createTranscription(r,n,i,a,s,o,u);return E.createRequestFunction(c,ce.default,ue.BASE_PATH,t)})},createTranslation(r,n,i,a,s,o){return $(this,void 0,void 0,function*(){let u=yield e.createTranslation(r,n,i,a,s,o);return E.createRequestFunction(u,ce.default,ue.BASE_PATH,t)})},deleteFile(r,n){return $(this,void 0,void 0,function*(){let i=yield e.deleteFile(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},deleteModel(r,n){return $(this,void 0,void 0,function*(){let i=yield e.deleteModel(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},downloadFile(r,n){return $(this,void 0,void 0,function*(){let i=yield e.downloadFile(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},listEngines(r){return $(this,void 0,void 0,function*(){let n=yield e.listEngines(r);return E.createRequestFunction(n,ce.default,ue.BASE_PATH,t)})},listFiles(r){return $(this,void 0,void 0,function*(){let n=yield e.listFiles(r);return E.createRequestFunction(n,ce.default,ue.BASE_PATH,t)})},listFineTuneEvents(r,n,i){return $(this,void 0,void 0,function*(){let a=yield e.listFineTuneEvents(r,n,i);return E.createRequestFunction(a,ce.default,ue.BASE_PATH,t)})},listFineTunes(r){return $(this,void 0,void 0,function*(){let n=yield e.listFineTunes(r);return E.createRequestFunction(n,ce.default,ue.BASE_PATH,t)})},listModels(r){return $(this,void 0,void 0,function*(){let n=yield e.listModels(r);return E.createRequestFunction(n,ce.default,ue.BASE_PATH,t)})},retrieveEngine(r,n){return $(this,void 0,void 0,function*(){let i=yield e.retrieveEngine(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},retrieveFile(r,n){return $(this,void 0,void 0,function*(){let i=yield e.retrieveFile(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},retrieveFineTune(r,n){return $(this,void 0,void 0,function*(){let i=yield e.retrieveFineTune(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})},retrieveModel(r,n){return $(this,void 0,void 0,function*(){let i=yield e.retrieveModel(r,n);return E.createRequestFunction(i,ce.default,ue.BASE_PATH,t)})}}};J.OpenAIApiFactory=function(t,e,r){let n=J.OpenAIApiFp(t);return{cancelFineTune(i,a){return n.cancelFineTune(i,a).then(s=>s(r,e))},createAnswer(i,a){return n.createAnswer(i,a).then(s=>s(r,e))},createChatCompletion(i,a){return n.createChatCompletion(i,a).then(s=>s(r,e))},createClassification(i,a){return n.createClassification(i,a).then(s=>s(r,e))},createCompletion(i,a){return n.createCompletion(i,a).then(s=>s(r,e))},createEdit(i,a){return n.createEdit(i,a).then(s=>s(r,e))},createEmbedding(i,a){return n.createEmbedding(i,a).then(s=>s(r,e))},createFile(i,a,s){return n.createFile(i,a,s).then(o=>o(r,e))},createFineTune(i,a){return n.createFineTune(i,a).then(s=>s(r,e))},createImage(i,a){return n.createImage(i,a).then(s=>s(r,e))},createImageEdit(i,a,s,o,u,c,d,p){return n.createImageEdit(i,a,s,o,u,c,d,p).then(b=>b(r,e))},createImageVariation(i,a,s,o,u,c){return n.createImageVariation(i,a,s,o,u,c).then(d=>d(r,e))},createModeration(i,a){return n.createModeration(i,a).then(s=>s(r,e))},createSearch(i,a,s){return n.createSearch(i,a,s).then(o=>o(r,e))},createTranscription(i,a,s,o,u,c,d){return n.createTranscription(i,a,s,o,u,c,d).then(p=>p(r,e))},createTranslation(i,a,s,o,u,c){return n.createTranslation(i,a,s,o,u,c).then(d=>d(r,e))},deleteFile(i,a){return n.deleteFile(i,a).then(s=>s(r,e))},deleteModel(i,a){return n.deleteModel(i,a).then(s=>s(r,e))},downloadFile(i,a){return n.downloadFile(i,a).then(s=>s(r,e))},listEngines(i){return n.listEngines(i).then(a=>a(r,e))},listFiles(i){return n.listFiles(i).then(a=>a(r,e))},listFineTuneEvents(i,a,s){return n.listFineTuneEvents(i,a,s).then(o=>o(r,e))},listFineTunes(i){return n.listFineTunes(i).then(a=>a(r,e))},listModels(i){return n.listModels(i).then(a=>a(r,e))},retrieveEngine(i,a){return n.retrieveEngine(i,a).then(s=>s(r,e))},retrieveFile(i,a){return n.retrieveFile(i,a).then(s=>s(r,e))},retrieveFineTune(i,a){return n.retrieveFineTune(i,a).then(s=>s(r,e))},retrieveModel(i,a){return n.retrieveModel(i,a).then(s=>s(r,e))}}};var $o=class extends ue.BaseAPI{cancelFineTune(e,r){return J.OpenAIApiFp(this.configuration).cancelFineTune(e,r).then(n=>n(this.axios,this.basePath))}createAnswer(e,r){return J.OpenAIApiFp(this.configuration).createAnswer(e,r).then(n=>n(this.axios,this.basePath))}createChatCompletion(e,r){return J.OpenAIApiFp(this.configuration).createChatCompletion(e,r).then(n=>n(this.axios,this.basePath))}createClassification(e,r){return J.OpenAIApiFp(this.configuration).createClassification(e,r).then(n=>n(this.axios,this.basePath))}createCompletion(e,r){return J.OpenAIApiFp(this.configuration).createCompletion(e,r).then(n=>n(this.axios,this.basePath))}createEdit(e,r){return J.OpenAIApiFp(this.configuration).createEdit(e,r).then(n=>n(this.axios,this.basePath))}createEmbedding(e,r){return J.OpenAIApiFp(this.configuration).createEmbedding(e,r).then(n=>n(this.axios,this.basePath))}createFile(e,r,n){return J.OpenAIApiFp(this.configuration).createFile(e,r,n).then(i=>i(this.axios,this.basePath))}createFineTune(e,r){return J.OpenAIApiFp(this.configuration).createFineTune(e,r).then(n=>n(this.axios,this.basePath))}createImage(e,r){return J.OpenAIApiFp(this.configuration).createImage(e,r).then(n=>n(this.axios,this.basePath))}createImageEdit(e,r,n,i,a,s,o,u){return J.OpenAIApiFp(this.configuration).createImageEdit(e,r,n,i,a,s,o,u).then(c=>c(this.axios,this.basePath))}createImageVariation(e,r,n,i,a,s){return J.OpenAIApiFp(this.configuration).createImageVariation(e,r,n,i,a,s).then(o=>o(this.axios,this.basePath))}createModeration(e,r){return J.OpenAIApiFp(this.configuration).createModeration(e,r).then(n=>n(this.axios,this.basePath))}createSearch(e,r,n){return J.OpenAIApiFp(this.configuration).createSearch(e,r,n).then(i=>i(this.axios,this.basePath))}createTranscription(e,r,n,i,a,s,o){return J.OpenAIApiFp(this.configuration).createTranscription(e,r,n,i,a,s,o).then(u=>u(this.axios,this.basePath))}createTranslation(e,r,n,i,a,s){return J.OpenAIApiFp(this.configuration).createTranslation(e,r,n,i,a,s).then(o=>o(this.axios,this.basePath))}deleteFile(e,r){return J.OpenAIApiFp(this.configuration).deleteFile(e,r).then(n=>n(this.axios,this.basePath))}deleteModel(e,r){return J.OpenAIApiFp(this.configuration).deleteModel(e,r).then(n=>n(this.axios,this.basePath))}downloadFile(e,r){return J.OpenAIApiFp(this.configuration).downloadFile(e,r).then(n=>n(this.axios,this.basePath))}listEngines(e){return J.OpenAIApiFp(this.configuration).listEngines(e).then(r=>r(this.axios,this.basePath))}listFiles(e){return J.OpenAIApiFp(this.configuration).listFiles(e).then(r=>r(this.axios,this.basePath))}listFineTuneEvents(e,r,n){return J.OpenAIApiFp(this.configuration).listFineTuneEvents(e,r,n).then(i=>i(this.axios,this.basePath))}listFineTunes(e){return J.OpenAIApiFp(this.configuration).listFineTunes(e).then(r=>r(this.axios,this.basePath))}listModels(e){return J.OpenAIApiFp(this.configuration).listModels(e).then(r=>r(this.axios,this.basePath))}retrieveEngine(e,r){return J.OpenAIApiFp(this.configuration).retrieveEngine(e,r).then(n=>n(this.axios,this.basePath))}retrieveFile(e,r){return J.OpenAIApiFp(this.configuration).retrieveFile(e,r).then(n=>n(this.axios,this.basePath))}retrieveFineTune(e,r){return J.OpenAIApiFp(this.configuration).retrieveFineTune(e,r).then(n=>n(this.axios,this.basePath))}retrieveModel(e,r){return J.OpenAIApiFp(this.configuration).retrieveModel(e,r).then(n=>n(this.axios,this.basePath))}};J.OpenAIApi=$o});var yd=L((sE,kg)=>{kg.exports={name:"openai",version:"3.3.0",description:"Node.js library for the OpenAI API",repository:{type:"git",url:"git@github.com:openai/openai-node.git"},keywords:["openai","open","ai","gpt-3","gpt3"],author:"OpenAI",license:"MIT",main:"./dist/index.js",types:"./dist/index.d.ts",scripts:{build:"tsc --outDir dist/"},dependencies:{axios:"^0.26.0","form-data":"^4.0.0"},devDependencies:{"@types/node":"^12.11.5",typescript:"^3.6.4"}}});var bd=L((oE,gd)=>{l();gd.exports=typeof self=="object"?self.FormData:window.FormData});var wd=L(Hi=>{"use strict";l();Object.defineProperty(Hi,"__esModule",{value:!0});Hi.Configuration=void 0;var Rg=yd(),Zo=class{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${Rg.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=bd())}isJsonMime(e){let r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}};Hi.Configuration=Zo});var Kr=L(Vt=>{"use strict";l();var Ng=Vt&&Vt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_d=Vt&&Vt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&Ng(e,t,r)};Object.defineProperty(Vt,"__esModule",{value:!0});_d(md(),Vt);_d(wd(),Vt)});async function xd(){return Ho===void 0&&(Ho={library:"langchain-js",runtime:qg()}),Ho}function G(t){try{return typeof process<"u"?h?.[t]:void 0}catch{return}}var Mg,Lg,Dg,vd,Et,qg,Ho,Tt=M(()=>{l();Mg=()=>typeof window<"u"&&typeof window.document<"u",Lg=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Dg=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),vd=()=>typeof Deno<"u",Et=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!vd(),qg=()=>{let t;return Mg()?t="browser":Et()?t="node":Lg()?t="webworker":Dg()?t="jsdom":vd()?t="deno":t="other",t}});function Fn(t,e){return function(){return t.apply(e,arguments)}}var Jo=M(()=>{"use strict";l()});function Ug(t){return t!==null&&!Un(t)&&t.constructor!==null&&!Un(t.constructor)&&tt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}function Vg(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Pd(t.buffer),e}function Vn(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),$r(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{let a=r?Object.getOwnPropertyNames(t):Object.keys(t),s=a.length,o;for(n=0;n<s;n++)o=a[n],e.call(null,t[o],o,t)}}function Td(t,e){e=e.toLowerCase();let r=Object.keys(t),n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}function Wo(){let{caseless:t}=Id(this)&&this||{},e={},r=(n,i)=>{let a=t&&Td(e,i)||i;Ji(e[a])&&Ji(n)?e[a]=Wo(e[a],n):Ji(n)?e[a]=Wo({},n):$r(n)?e[a]=n.slice():e[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Vn(arguments[n],r);return e}function mb(t){return!!(t&&tt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}var Fg,Go,Yi,yt,Wi,$r,Un,Pd,Bg,tt,Ed,Gi,zg,Ji,Kg,$g,Zg,Hg,Jg,Yg,Wg,Gg,Cd,Id,Qg,Xg,eb,tb,rb,nb,ib,ab,sb,ob,ub,Od,lb,Sd,cb,db,pb,hb,Yo,Ad,jd,fb,yb,gb,bb,j,_e=M(()=>{"use strict";l();Jo();({toString:Fg}=Object.prototype),{getPrototypeOf:Go}=Object,Yi=(t=>e=>{let r=Fg.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),yt=t=>(t=t.toLowerCase(),e=>Yi(e)===t),Wi=t=>e=>typeof e===t,{isArray:$r}=Array,Un=Wi("undefined");Pd=yt("ArrayBuffer");Bg=Wi("string"),tt=Wi("function"),Ed=Wi("number"),Gi=t=>t!==null&&typeof t=="object",zg=t=>t===!0||t===!1,Ji=t=>{if(Yi(t)!=="object")return!1;let e=Go(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Kg=yt("Date"),$g=yt("File"),Zg=yt("Blob"),Hg=yt("FileList"),Jg=t=>Gi(t)&&tt(t.pipe),Yg=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||tt(t.append)&&((e=Yi(t))==="formdata"||e==="object"&&tt(t.toString)&&t.toString()==="[object FormData]"))},Wg=yt("URLSearchParams"),Gg=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");Cd=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Id=t=>!Un(t)&&t!==Cd;Qg=(t,e,r,{allOwnKeys:n}={})=>(Vn(e,(i,a)=>{r&&tt(i)?t[a]=Fn(i,r):t[a]=i},{allOwnKeys:n}),t),Xg=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),eb=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},tb=(t,e,r,n)=>{let i,a,s,o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)s=i[a],(!n||n(s,t,e))&&!o[s]&&(e[s]=t[s],o[s]=!0);t=r!==!1&&Go(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},rb=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;let n=t.indexOf(e,r);return n!==-1&&n===r},nb=t=>{if(!t)return null;if($r(t))return t;let e=t.length;if(!Ed(e))return null;let r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},ib=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Go(Uint8Array)),ab=(t,e)=>{let n=(t&&t[Symbol.iterator]).call(t),i;for(;(i=n.next())&&!i.done;){let a=i.value;e.call(t,a[0],a[1])}},sb=(t,e)=>{let r,n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},ob=yt("HTMLFormElement"),ub=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),Od=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),lb=yt("RegExp"),Sd=(t,e)=>{let r=Object.getOwnPropertyDescriptors(t),n={};Vn(r,(i,a)=>{e(i,a,t)!==!1&&(n[a]=i)}),Object.defineProperties(t,n)},cb=t=>{Sd(t,(e,r)=>{if(tt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=t[r];if(tt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},db=(t,e)=>{let r={},n=i=>{i.forEach(a=>{r[a]=!0})};return $r(t)?n(t):n(String(t).split(e)),r},pb=()=>{},hb=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Yo="abcdefghijklmnopqrstuvwxyz",Ad="0123456789",jd={DIGIT:Ad,ALPHA:Yo,ALPHA_DIGIT:Yo+Yo.toUpperCase()+Ad},fb=(t=16,e=jd.ALPHA_DIGIT)=>{let r="",{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};yb=t=>{let e=new Array(10),r=(n,i)=>{if(Gi(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;let a=$r(n)?[]:{};return Vn(n,(s,o)=>{let u=r(s,i+1);!Un(u)&&(a[o]=u)}),e[i]=void 0,a}}return n};return r(t,0)},gb=yt("AsyncFunction"),bb=t=>t&&(Gi(t)||tt(t))&&tt(t.then)&&tt(t.catch),j={isArray:$r,isArrayBuffer:Pd,isBuffer:Ug,isFormData:Yg,isArrayBufferView:Vg,isString:Bg,isNumber:Ed,isBoolean:zg,isObject:Gi,isPlainObject:Ji,isUndefined:Un,isDate:Kg,isFile:$g,isBlob:Zg,isRegExp:lb,isFunction:tt,isStream:Jg,isURLSearchParams:Wg,isTypedArray:ib,isFileList:Hg,forEach:Vn,merge:Wo,extend:Qg,trim:Gg,stripBOM:Xg,inherits:eb,toFlatObject:tb,kindOf:Yi,kindOfTest:yt,endsWith:rb,toArray:nb,forEachEntry:ab,matchAll:sb,isHTMLForm:ob,hasOwnProperty:Od,hasOwnProp:Od,reduceDescriptors:Sd,freezeMethods:cb,toObjectSet:db,toCamelCase:ub,noop:pb,toFiniteNumber:hb,findKey:Td,global:Cd,isContextDefined:Id,ALPHABET:jd,generateString:fb,isSpecCompliantForm:mb,toJSONObject:yb,isAsyncFn:gb,isThenable:bb}});function Zr(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}var kd,Rd,re,Ct=M(()=>{"use strict";l();_e();j.inherits(Zr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});kd=Zr.prototype,Rd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Rd[t]={value:t}});Object.defineProperties(Zr,Rd);Object.defineProperty(kd,"isAxiosError",{value:!0});Zr.from=(t,e,r,n,i,a)=>{let s=Object.create(kd);return j.toFlatObject(t,s,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),Zr.call(s,t.message,e,r,n,i),s.cause=t,s.name=t.name,a&&Object.assign(s,a),s};re=Zr});var Qi,Qo=M(()=>{l();Qi=null});function Xo(t){return j.isPlainObject(t)||j.isArray(t)}function Md(t){return j.endsWith(t,"[]")?t.slice(0,-2):t}function Nd(t,e,r){return t?t.concat(e).map(function(i,a){return i=Md(i),!r&&a?"["+i+"]":i}).join(r?".":""):e}function wb(t){return j.isArray(t)&&!t.some(Xo)}function vb(t,e,r){if(!j.isObject(t))throw new TypeError("target must be an object");e=e||new(Qi||FormData),r=j.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,T){return!j.isUndefined(T[x])});let n=r.metaTokens,i=r.visitor||d,a=r.dots,s=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&j.isSpecCompliantForm(e);if(!j.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(j.isDate(m))return m.toISOString();if(!u&&j.isBlob(m))throw new re("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(m)||j.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,x,T){let k=m;if(m&&!T&&typeof m=="object"){if(j.endsWith(x,"{}"))x=n?x:x.slice(0,-2),m=JSON.stringify(m);else if(j.isArray(m)&&wb(m)||(j.isFileList(m)||j.endsWith(x,"[]"))&&(k=j.toArray(m)))return x=Md(x),k.forEach(function(V,O){!(j.isUndefined(V)||V===null)&&e.append(s===!0?Nd([x],O,a):s===null?x:x+"[]",c(V))}),!1}return Xo(m)?!0:(e.append(Nd(T,x,a),c(m)),!1)}let p=[],b=Object.assign(_b,{defaultVisitor:d,convertValue:c,isVisitable:Xo});function v(m,x){if(!j.isUndefined(m)){if(p.indexOf(m)!==-1)throw Error("Circular reference detected in "+x.join("."));p.push(m),j.forEach(m,function(k,S){(!(j.isUndefined(k)||k===null)&&i.call(e,k,j.isString(S)?S.trim():S,x,b))===!0&&v(k,x?x.concat(S):[S])}),p.pop()}}if(!j.isObject(t))throw new TypeError("data must be an object");return v(t),e}var _b,Bt,Bn=M(()=>{"use strict";l();_e();Ct();Qo();_b=j.toFlatObject(j,{},null,function(e){return/^is[A-Z]/.test(e)});Bt=vb});function Ld(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Dd(t,e){this._pairs=[],t&&Bt(t,this,e)}var qd,Xi,eu=M(()=>{"use strict";l();Bn();qd=Dd.prototype;qd.append=function(e,r){this._pairs.push([e,r])};qd.toString=function(e){let r=e?function(n){return e.call(this,n,Ld)}:Ld;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};Xi=Dd});function xb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zn(t,e,r){if(!e)return t;let n=r&&r.encode||xb,i=r&&r.serialize,a;if(i?a=i(e,r):a=j.isURLSearchParams(e)?e.toString():new Xi(e,r).toString(n),a){let s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}var tu=M(()=>{"use strict";l();_e();eu()});var ru,nu,Fd=M(()=>{"use strict";l();_e();ru=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){j.forEach(this.handlers,function(n){n!==null&&e(n)})}},nu=ru});var ea,iu=M(()=>{"use strict";l();ea={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var Ud,Vd=M(()=>{"use strict";l();eu();Ud=typeof URLSearchParams<"u"?URLSearchParams:Xi});var Bd,zd=M(()=>{"use strict";l();Bd=typeof FormData<"u"?FormData:null});var Kd,$d=M(()=>{"use strict";l();Kd=typeof Blob<"u"?Blob:null});var Ob,Ab,Ne,Zd=M(()=>{l();Vd();zd();$d();Ob=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Ab=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ne={isBrowser:!0,classes:{URLSearchParams:Ud,FormData:Bd,Blob:Kd},isStandardBrowserEnv:Ob,isStandardBrowserWebWorkerEnv:Ab,protocols:["http","https","file","blob","url","data"]}});var Hr=M(()=>{l();Zd()});function au(t,e){return Bt(t,new Ne.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,a){return Ne.isNode&&j.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}var Hd=M(()=>{"use strict";l();_e();Bn();Hr()});function Pb(t){return j.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Eb(t){let e={},r=Object.keys(t),n,i=r.length,a;for(n=0;n<i;n++)a=r[n],e[a]=t[a];return e}function Tb(t){function e(r,n,i,a){let s=r[a++],o=Number.isFinite(+s),u=a>=r.length;return s=!s&&j.isArray(i)?i.length:s,u?(j.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o):((!i[s]||!j.isObject(i[s]))&&(i[s]=[]),e(r,n,i[s],a)&&j.isArray(i[s])&&(i[s]=Eb(i[s])),!o)}if(j.isFormData(t)&&j.isFunction(t.entries)){let r={};return j.forEachEntry(t,(n,i)=>{e(Pb(n),i,r,0)}),r}return null}var ta,su=M(()=>{"use strict";l();_e();ta=Tb});function Ib(t,e,r){if(j.isString(t))try{return(e||JSON.parse)(t),j.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Cb,ra,Jr,na=M(()=>{"use strict";l();_e();Ct();iu();Bn();Hd();Hr();su();Cb={"Content-Type":void 0};ra={transitional:ea,adapter:["xhr","http"],transformRequest:[function(e,r){let n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=j.isObject(e);if(a&&j.isHTMLForm(e)&&(e=new FormData(e)),j.isFormData(e))return i&&i?JSON.stringify(ta(e)):e;if(j.isArrayBuffer(e)||j.isBuffer(e)||j.isStream(e)||j.isFile(e)||j.isBlob(e))return e;if(j.isArrayBufferView(e))return e.buffer;if(j.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return au(e,this.formSerializer).toString();if((o=j.isFileList(e))||n.indexOf("multipart/form-data")>-1){let u=this.env&&this.env.FormData;return Bt(o?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),Ib(e)):e}],transformResponse:[function(e){let r=this.transitional||ra.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&j.isString(e)&&(n&&!this.responseType||i)){let s=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?re.from(o,re.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ne.classes.FormData,Blob:Ne.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};j.forEach(["delete","get","head"],function(e){ra.headers[e]={}});j.forEach(["post","put","patch"],function(e){ra.headers[e]=j.merge(Cb)});Jr=ra});var Sb,Jd,Yd=M(()=>{"use strict";l();_e();Sb=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jd=t=>{let e={},r,n,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),r=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!r||e[r]&&Sb[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e}});function Kn(t){return t&&String(t).trim().toLowerCase()}function ia(t){return t===!1||t==null?t:j.isArray(t)?t.map(ia):String(t)}function jb(t){let e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}function ou(t,e,r,n,i){if(j.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!j.isString(e)){if(j.isString(n))return e.indexOf(n)!==-1;if(j.isRegExp(n))return n.test(e)}}function Rb(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Nb(t,e){let r=j.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,a,s){return this[n].call(this,e,i,a,s)},configurable:!0})})}var Wd,kb,Yr,ze,ar=M(()=>{"use strict";l();_e();Yd();Wd=Symbol("internals");kb=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());Yr=class{constructor(e){e&&this.set(e)}set(e,r,n){let i=this;function a(o,u,c){let d=Kn(u);if(!d)throw new Error("header name must be a non-empty string");let p=j.findKey(i,d);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||u]=ia(o))}let s=(o,u)=>j.forEach(o,(c,d)=>a(c,d,u));return j.isPlainObject(e)||e instanceof this.constructor?s(e,r):j.isString(e)&&(e=e.trim())&&!kb(e)?s(Jd(e),r):e!=null&&a(r,e,n),this}get(e,r){if(e=Kn(e),e){let n=j.findKey(this,e);if(n){let i=this[n];if(!r)return i;if(r===!0)return jb(i);if(j.isFunction(r))return r.call(this,i,n);if(j.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Kn(e),e){let n=j.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||ou(this,this[n],n,r)))}return!1}delete(e,r){let n=this,i=!1;function a(s){if(s=Kn(s),s){let o=j.findKey(n,s);o&&(!r||ou(n,n[o],o,r))&&(delete n[o],i=!0)}}return j.isArray(e)?e.forEach(a):a(e),i}clear(e){let r=Object.keys(this),n=r.length,i=!1;for(;n--;){let a=r[n];(!e||ou(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){let r=this,n={};return j.forEach(this,(i,a)=>{let s=j.findKey(n,a);if(s){r[s]=ia(i),delete r[a];return}let o=e?Rb(a):String(a).trim();o!==a&&delete r[a],r[o]=ia(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let r=Object.create(null);return j.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&j.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){let n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){let n=(this[Wd]=this[Wd]={accessors:{}}).accessors,i=this.prototype;function a(s){let o=Kn(s);n[o]||(Nb(i,s),n[o]=!0)}return j.isArray(e)?e.forEach(a):a(e),this}};Yr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);j.freezeMethods(Yr.prototype);j.freezeMethods(Yr);ze=Yr});function $n(t,e){let r=this||Jr,n=e||r,i=ze.from(n.headers),a=n.data;return j.forEach(t,function(o){a=o.call(r,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}var Gd=M(()=>{"use strict";l();_e();na();ar()});function Zn(t){return!!(t&&t.__CANCEL__)}var uu=M(()=>{"use strict";l()});function Qd(t,e,r){re.call(this,t??"canceled",re.ERR_CANCELED,e,r),this.name="CanceledError"}var zt,Hn=M(()=>{"use strict";l();Ct();_e();j.inherits(Qd,re,{__CANCEL__:!0});zt=Qd});function lu(t,e,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new re("Request failed with status code "+r.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var Xd=M(()=>{"use strict";l();Ct()});var ep,tp=M(()=>{"use strict";l();_e();Hr();ep=Ne.isStandardBrowserEnv?function(){return{write:function(r,n,i,a,s,o){let u=[];u.push(r+"="+encodeURIComponent(n)),j.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),j.isString(a)&&u.push("path="+a),j.isString(s)&&u.push("domain="+s),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){let n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});function cu(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}var rp=M(()=>{"use strict";l()});function du(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}var np=M(()=>{"use strict";l()});function Jn(t,e){return t&&!cu(e)?du(t,e):e}var pu=M(()=>{"use strict";l();rp();np()});var ip,ap=M(()=>{"use strict";l();_e();Hr();ip=Ne.isStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(a){let s=a;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){let o=j.isString(s)?i(s):s;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}()});function hu(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}var sp=M(()=>{"use strict";l()});function Mb(t,e){t=t||10;let r=new Array(t),n=new Array(t),i=0,a=0,s;return e=e!==void 0?e:1e3,function(u){let c=Date.now(),d=n[a];s||(s=c),r[i]=u,n[i]=c;let p=a,b=0;for(;p!==i;)b+=r[p++],p=p%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),c-s<e)return;let v=d&&c-d;return v?Math.round(b*1e3/v):void 0}}var op,up=M(()=>{"use strict";l();op=Mb});function lp(t,e){let r=0,n=op(50,250);return i=>{let a=i.loaded,s=i.lengthComputable?i.total:void 0,o=a-r,u=n(o),c=a<=s;r=a;let d={loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:u||void 0,estimated:u&&s&&c?(s-a)/u:void 0,event:i};d[e?"download":"upload"]=!0,t(d)}}var Lb,cp,dp=M(()=>{"use strict";l();_e();Xd();tp();tu();pu();ap();iu();Ct();Hn();sp();Hr();ar();up();Lb=typeof XMLHttpRequest<"u",cp=Lb&&function(t){return new Promise(function(r,n){let i=t.data,a=ze.from(t.headers).normalize(),s=t.responseType,o;function u(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}j.isFormData(i)&&(Ne.isStandardBrowserEnv||Ne.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(t.auth){let v=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.set("Authorization","Basic "+btoa(v+":"+m))}let d=Jn(t.baseURL,t.url);c.open(t.method.toUpperCase(),zn(d,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function p(){if(!c)return;let v=ze.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),x={data:!s||s==="text"||s==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:v,config:t,request:c};lu(function(k){r(k),u()},function(k){n(k),u()},x),c=null}if("onloadend"in c?c.onloadend=p:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(p)},c.onabort=function(){c&&(n(new re("Request aborted",re.ECONNABORTED,t,c)),c=null)},c.onerror=function(){n(new re("Network Error",re.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let m=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",x=t.transitional||ea;t.timeoutErrorMessage&&(m=t.timeoutErrorMessage),n(new re(m,x.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,t,c)),c=null},Ne.isStandardBrowserEnv){let v=(t.withCredentials||ip(d))&&t.xsrfCookieName&&ep.read(t.xsrfCookieName);v&&a.set(t.xsrfHeaderName,v)}i===void 0&&a.setContentType(null),"setRequestHeader"in c&&j.forEach(a.toJSON(),function(m,x){c.setRequestHeader(x,m)}),j.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),s&&s!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",lp(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",lp(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=v=>{c&&(n(!v||v.type?new zt(null,t,c):v),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));let b=hu(d);if(b&&Ne.protocols.indexOf(b)===-1){n(new re("Unsupported protocol "+b+":",re.ERR_BAD_REQUEST,t));return}c.send(i||null)})}});var aa,pp,hp=M(()=>{l();_e();Qo();dp();Ct();aa={http:Qi,xhr:cp};j.forEach(aa,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});pp={getAdapter:t=>{t=j.isArray(t)?t:[t];let{length:e}=t,r,n;for(let i=0;i<e&&(r=t[i],!(n=j.isString(r)?aa[r.toLowerCase()]:r));i++);if(!n)throw n===!1?new re(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(j.hasOwnProp(aa,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!j.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:aa}});function fu(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new zt(null,t)}function sa(t){return fu(t),t.headers=ze.from(t.headers),t.data=$n.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),pp.getAdapter(t.adapter||Jr.adapter)(t).then(function(n){return fu(t),n.data=$n.call(t,t.transformResponse,n),n.headers=ze.from(n.headers),n},function(n){return Zn(n)||(fu(t),n&&n.response&&(n.response.data=$n.call(t,t.transformResponse,n.response),n.response.headers=ze.from(n.response.headers))),Promise.reject(n)})}var fp=M(()=>{"use strict";l();Gd();uu();na();Hn();ar();hp()});function It(t,e){e=e||{};let r={};function n(c,d,p){return j.isPlainObject(c)&&j.isPlainObject(d)?j.merge.call({caseless:p},c,d):j.isPlainObject(d)?j.merge({},d):j.isArray(d)?d.slice():d}function i(c,d,p){if(j.isUndefined(d)){if(!j.isUndefined(c))return n(void 0,c,p)}else return n(c,d,p)}function a(c,d){if(!j.isUndefined(d))return n(void 0,d)}function s(c,d){if(j.isUndefined(d)){if(!j.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function o(c,d,p){if(p in e)return n(c,d);if(p in t)return n(void 0,c)}let u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(c,d)=>i(mp(c),mp(d),!0)};return j.forEach(Object.keys(Object.assign({},t,e)),function(d){let p=u[d]||i,b=p(t[d],e[d],d);j.isUndefined(b)&&p!==o||(r[d]=b)}),r}var mp,mu=M(()=>{"use strict";l();_e();ar();mp=t=>t instanceof ze?t.toJSON():t});var oa,yu=M(()=>{l();oa="1.4.0"});function Db(t,e,r){if(typeof t!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);let n=Object.keys(t),i=n.length;for(;i-- >0;){let a=n[i],s=e[a];if(s){let o=t[a],u=o===void 0||s(o,a,t);if(u!==!0)throw new re("option "+a+" must be "+u,re.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new re("Unknown option "+a,re.ERR_BAD_OPTION)}}var gu,yp,ua,gp=M(()=>{"use strict";l();yu();Ct();gu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{gu[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});yp={};gu.transitional=function(e,r,n){function i(a,s){return"[Axios v"+oa+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return(a,s,o)=>{if(e===!1)throw new re(i(s," has been removed"+(r?" in "+r:"")),re.ERR_DEPRECATED);return r&&!yp[s]&&(yp[s]=!0),e?e(a,s,o):!0}};ua={assertOptions:Db,validators:gu}});var Kt,Wr,Yn,bp=M(()=>{"use strict";l();_e();tu();Fd();fp();mu();pu();gp();ar();Kt=ua.validators,Wr=class{constructor(e){this.defaults=e,this.interceptors={request:new nu,response:new nu}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=It(this.defaults,r);let{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&ua.assertOptions(n,{silentJSONParsing:Kt.transitional(Kt.boolean),forcedJSONParsing:Kt.transitional(Kt.boolean),clarifyTimeoutError:Kt.transitional(Kt.boolean)},!1),i!=null&&(j.isFunction(i)?r.paramsSerializer={serialize:i}:ua.assertOptions(i,{encode:Kt.function,serialize:Kt.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let s;s=a&&j.merge(a.common,a[r.method]),s&&j.forEach(["delete","get","head","post","put","patch","common"],m=>{delete a[m]}),r.headers=ze.concat(s,a);let o=[],u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(u=u&&x.synchronous,o.unshift(x.fulfilled,x.rejected))});let c=[];this.interceptors.response.forEach(function(x){c.push(x.fulfilled,x.rejected)});let d,p=0,b;if(!u){let m=[sa.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,c),b=m.length,d=Promise.resolve(r);p<b;)d=d.then(m[p++],m[p++]);return d}b=o.length;let v=r;for(p=0;p<b;){let m=o[p++],x=o[p++];try{v=m(v)}catch(T){x.call(this,T);break}}try{d=sa.call(this,v)}catch(m){return Promise.reject(m)}for(p=0,b=c.length;p<b;)d=d.then(c[p++],c[p++]);return d}getUri(e){e=It(this.defaults,e);let r=Jn(e.baseURL,e.url);return zn(r,e.params,e.paramsSerializer)}};j.forEach(["delete","get","head","options"],function(e){Wr.prototype[e]=function(r,n){return this.request(It(n||{},{method:e,url:r,data:(n||{}).data}))}});j.forEach(["post","put","patch"],function(e){function r(n){return function(a,s,o){return this.request(It(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Wr.prototype[e]=r(),Wr.prototype[e+"Form"]=r(!0)});Yn=Wr});var bu,wp,_p=M(()=>{"use strict";l();Hn();bu=class t{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});let n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a,s=new Promise(o=>{n.subscribe(o),a=o}).then(i);return s.cancel=function(){n.unsubscribe(a)},s},e(function(a,s,o){n.reason||(n.reason=new zt(a,s,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new t(function(i){e=i}),cancel:e}}},wp=bu});function wu(t){return function(r){return t.apply(null,r)}}var vp=M(()=>{"use strict";l()});function _u(t){return j.isObject(t)&&t.isAxiosError===!0}var xp=M(()=>{"use strict";l();_e()});var vu,Op,Ap=M(()=>{l();vu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vu).forEach(([t,e])=>{vu[e]=t});Op=vu});function Pp(t){let e=new Yn(t),r=Fn(Yn.prototype.request,e);return j.extend(r,Yn.prototype,e,{allOwnKeys:!0}),j.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Pp(It(t,i))},r}var Oe,sr,Ep=M(()=>{"use strict";l();_e();Jo();bp();mu();na();su();Hn();_p();uu();yu();Bn();Ct();vp();xp();ar();Ap();Oe=Pp(Jr);Oe.Axios=Yn;Oe.CanceledError=zt;Oe.CancelToken=wp;Oe.isCancel=Zn;Oe.VERSION=oa;Oe.toFormData=Bt;Oe.AxiosError=re;Oe.Cancel=Oe.CanceledError;Oe.all=function(e){return Promise.all(e)};Oe.spread=wu;Oe.isAxiosError=_u;Oe.mergeConfig=It;Oe.AxiosHeaders=ze;Oe.formToJSON=t=>ta(j.isHTMLForm(t)?new FormData(t):t);Oe.HttpStatusCode=Op;Oe.default=Oe;sr=Oe});var jI,kI,RI,NI,MI,LI,DI,qI,FI,UI,VI,BI,zI,KI,$I,Tp=M(()=>{l();Ep();({Axios:jI,AxiosError:kI,CanceledError:RI,isCancel:NI,CancelToken:MI,VERSION:LI,all:DI,Cancel:qI,isAxiosError:FI,spread:UI,toFormData:VI,AxiosHeaders:BI,HttpStatusCode:zI,formToJSON:KI,mergeConfig:$I}=sr)});async function Cp(t,e){let r=t.getReader();for(;;){let n=await r.read();if(n.done){e(new Uint8Array,!0);break}e(n.value)}}function Ip(t){let e,r,n,i=!1;return function(s,o){if(o){t(s,0,!0);return}e===void 0?(e=s,r=0,n=-1):e=qb(e,s);let u=e.length,c=0;for(;r<u;){i&&(e[r]===10&&(c=++r),i=!1);let d=-1;for(;r<u&&d===-1;++r)switch(e[r]){case 58:n===-1&&(n=r-c);break;case 13:i=!0;case 10:d=r;break}if(d===-1)break;t(e.subarray(c,d),n),c=r,n=-1}c===u?e=void 0:c!==0&&(e=e.subarray(c),r-=c)}}function Sp(t,e,r){let n=xu(),i=new TextDecoder;return function(s,o,u){if(u){Fb(n)||(t?.(n),n=xu());return}if(s.length===0)t?.(n),n=xu();else if(o>0){let c=i.decode(s.subarray(0,o)),d=o+(s[o+1]===32?2:1),p=i.decode(s.subarray(d));switch(c){case"data":n.data=n.data?n.data+`
`+p:p;break;case"event":n.event=p;break;case"id":e?.(n.id=p);break;case"retry":{let b=parseInt(p,10);Number.isNaN(b)||r?.(n.retry=b);break}}}}}function qb(t,e){let r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function xu(){return{data:"",event:"",id:"",retry:void 0}}function Fb(t){return t.data===""&&t.event===""&&t.id===""&&t.retry===void 0}var la,jp=M(()=>{l();la="text/event-stream"});function Ub(t){try{return JSON.stringify(t)}catch{return t}}function Vb(t,e,r){let{validateStatus:n}=r.config;!r.status||!n||n(r.status)?t(r):e(ca(`Request failed with status code ${r.status} and body ${typeof r.data=="string"?r.data:Ub(r.data)}`,r.config,null,r.request,r))}function Bb(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function zb(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function kp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Kb(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(Yb(e))n=e.toString();else{var i=[];Rp(e,function(o,u){o===null||typeof o>"u"||(Np(o)?u=`${u}[]`:o=[o],Rp(o,function(d){Jb(d)?d=d.toISOString():Hb(d)&&(d=JSON.stringify(d)),i.push(`${kp(u)}=${kp(d)}`)}))}),n=i.join("&")}if(n){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}function $b(t,e){return t&&!Bb(e)?zb(t,e):e}function Zb(t){return typeof t>"u"}function Hb(t){return t!==null&&typeof t=="object"}function Jb(t){return toString.call(t)==="[object Date]"}function Yb(t){return toString.call(t)==="[object URLSearchParams]"}function Np(t){return Array.isArray(t)}function Rp(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Np(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Wb(t){return toString.call(t)==="[object FormData]"}function Gb(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}async function Me(t){let e=Xb(t),r=await Qb(e,t);return new Promise((n,i)=>{r instanceof Error?i(r):Object.prototype.toString.call(t.settle)==="[object Function]"?t.settle(n,i,r):Vb(n,i,r)})}async function Qb(t,e){let r;try{r=await fetch(t)}catch(a){return a&&a.name==="AbortError"?ca("Request aborted",e,"ECONNABORTED",t):a&&a.name==="TimeoutError"?ca("Request timeout",e,"ECONNABORTED",t):ca("Network Error",e,"ERR_NETWORK",t)}let n={};r.headers.forEach((a,s)=>{n[s]=a});let i={ok:r.ok,status:r.status,statusText:r.statusText,headers:n,config:e,request:t};if(r.status>=200&&r.status!==204)if(e.responseType==="stream"){let a=r.headers.get("content-type");if(!a?.startsWith(la)){if(r.status>=400)return a?.startsWith("application/json")?(i.data=await r.json(),i):(i.data=await r.text(),i);throw new Error(`Expected content-type to be ${la}, Actual: ${a}`)}await Cp(r.body,Ip(Sp(e.onmessage)))}else switch(e.responseType){case"arraybuffer":i.data=await r.arrayBuffer();break;case"blob":i.data=await r.blob();break;case"json":i.data=await r.json();break;case"formData":i.data=await r.formData();break;default:i.data=await r.text();break}return i}function Xb(t){let e=new Headers(t.headers);if(t.auth){let s=t.auth.username||"",o=t.auth.password?decodeURI(encodeURIComponent(t.auth.password)):"";e.set("Authorization",`Basic ${btoa(`${s}:${o}`)}`)}let r=t.method.toUpperCase(),n={headers:e,method:r};r!=="GET"&&r!=="HEAD"&&(n.body=t.data,Wb(n.body)&&Gb()&&e.delete("Content-Type")),typeof n.body=="string"&&(n.body=new TextEncoder().encode(n.body)),t.mode&&(n.mode=t.mode),t.cache&&(n.cache=t.cache),t.integrity&&(n.integrity=t.integrity),t.redirect&&(n.redirect=t.redirect),t.referrer&&(n.referrer=t.referrer),t.timeout&&t.timeout>0&&(n.signal=AbortSignal.timeout(t.timeout)),t.signal&&(n.signal=t.signal),Zb(t.withCredentials)||(n.credentials=t.withCredentials?"include":"omit"),t.responseType==="stream"&&n.headers.set("Accept",la);let i=$b(t.baseURL,t.url),a=Kb(i,t.params,t.paramsSerializer);return new Request(a,n)}function ca(t,e,r,n,i){if(sr.AxiosError&&typeof sr.AxiosError=="function")return new sr.AxiosError(t,sr.AxiosError[r],e,n,i);let a=new Error(t);return ew(a,e,r,n,i)}function ew(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}var Gr=M(()=>{l();Tp();jp()});var Wn,Ou=M(()=>{l();Wn=(t,e)=>t.reduce((r,n,i)=>{let a=Math.floor(i/e),s=r[a]||[];return r[a]=s.concat([n]),r},[])});var Dp=L((Mp,Lp)=>{l();(function(t){var e;typeof Mp=="object"?Lp.exports=t():typeof define=="function"&&define.amd?define(t):(typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"&&(e=self),e.objectHash=t())})(function(){return function t(e,r,n){function i(o,u){if(!r[o]){if(!e[o]){var c=typeof Ln=="function"&&Ln;if(!u&&c)return c(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}u=r[o]={exports:{}},e[o][0].call(u.exports,function(d){var p=e[o][1][d];return i(p||d)},u,u.exports,t,e,r,n)}return r[o].exports}for(var a=typeof Ln=="function"&&Ln,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){(function(n,i,a,s,o,u,c,d,p){"use strict";var b=t("crypto");function v(O,R){R=T(O,R);var g;return(g=R.algorithm!=="passthrough"?b.createHash(R.algorithm):new V).write===void 0&&(g.write=g.update,g.end=g.update),S(R,g).dispatch(O),g.update||g.end(""),g.digest?g.digest(R.encoding==="buffer"?void 0:R.encoding):(O=g.read(),R.encoding!=="buffer"?O.toString(R.encoding):O)}(r=e.exports=v).sha1=function(O){return v(O)},r.keys=function(O){return v(O,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(O){return v(O,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(O){return v(O,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var m=b.getHashes?b.getHashes().slice():["sha1","md5"],x=(m.push("passthrough"),["buffer","hex","binary","base64"]);function T(O,R){var g={};if(g.algorithm=(R=R||{}).algorithm||"sha1",g.encoding=R.encoding||"hex",g.excludeValues=!!R.excludeValues,g.algorithm=g.algorithm.toLowerCase(),g.encoding=g.encoding.toLowerCase(),g.ignoreUnknown=R.ignoreUnknown===!0,g.respectType=R.respectType!==!1,g.respectFunctionNames=R.respectFunctionNames!==!1,g.respectFunctionProperties=R.respectFunctionProperties!==!1,g.unorderedArrays=R.unorderedArrays===!0,g.unorderedSets=R.unorderedSets!==!1,g.unorderedObjects=R.unorderedObjects!==!1,g.replacer=R.replacer||void 0,g.excludeKeys=R.excludeKeys||void 0,O===void 0)throw new Error("Object argument required.");for(var _=0;_<m.length;++_)m[_].toLowerCase()===g.algorithm.toLowerCase()&&(g.algorithm=m[_]);if(m.indexOf(g.algorithm)===-1)throw new Error('Algorithm "'+g.algorithm+'"  not supported. supported values: '+m.join(", "));if(x.indexOf(g.encoding)===-1&&g.algorithm!=="passthrough")throw new Error('Encoding "'+g.encoding+'"  not supported. supported values: '+x.join(", "));return g}function k(O){if(typeof O=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(O))!=null}function S(O,R,g){g=g||[];function _(y){return R.update?R.update(y,"utf8"):R.write(y,"utf8")}return{dispatch:function(y){return this["_"+((y=O.replacer?O.replacer(y):y)===null?"null":typeof y)](y)},_object:function(y){var C,N=Object.prototype.toString.call(y),Q=/\[object (.*)\]/i.exec(N);if(Q=(Q=Q?Q[1]:"unknown:["+N+"]").toLowerCase(),0<=(N=g.indexOf(y)))return this.dispatch("[CIRCULAR:"+N+"]");if(g.push(y),a!==void 0&&a.isBuffer&&a.isBuffer(y))return _("buffer:"),_(y);if(Q==="object"||Q==="function"||Q==="asyncfunction")return N=Object.keys(y),O.unorderedObjects&&(N=N.sort()),O.respectType===!1||k(y)||N.splice(0,0,"prototype","__proto__","constructor"),O.excludeKeys&&(N=N.filter(function(W){return!O.excludeKeys(W)})),_("object:"+N.length+":"),C=this,N.forEach(function(W){C.dispatch(W),_(":"),O.excludeValues||C.dispatch(y[W]),_(",")});if(!this["_"+Q]){if(O.ignoreUnknown)return _("["+Q+"]");throw new Error('Unknown object type "'+Q+'"')}this["_"+Q](y)},_array:function(y,W){W=W!==void 0?W:O.unorderedArrays!==!1;var N=this;if(_("array:"+y.length+":"),!W||y.length<=1)return y.forEach(function(te){return N.dispatch(te)});var Q=[],W=y.map(function(te){var K=new V,he=g.slice();return S(O,K,he).dispatch(te),Q=Q.concat(he.slice(g.length)),K.read().toString()});return g=g.concat(Q),W.sort(),this._array(W,!1)},_date:function(y){return _("date:"+y.toJSON())},_symbol:function(y){return _("symbol:"+y.toString())},_error:function(y){return _("error:"+y.toString())},_boolean:function(y){return _("bool:"+y.toString())},_string:function(y){_("string:"+y.length+":"),_(y.toString())},_function:function(y){_("fn:"),k(y)?this.dispatch("[native]"):this.dispatch(y.toString()),O.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(y.name)),O.respectFunctionProperties&&this._object(y)},_number:function(y){return _("number:"+y.toString())},_xml:function(y){return _("xml:"+y.toString())},_null:function(){return _("Null")},_undefined:function(){return _("Undefined")},_regexp:function(y){return _("regex:"+y.toString())},_uint8array:function(y){return _("uint8array:"),this.dispatch(Array.prototype.slice.call(y))},_uint8clampedarray:function(y){return _("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(y))},_int8array:function(y){return _("int8array:"),this.dispatch(Array.prototype.slice.call(y))},_uint16array:function(y){return _("uint16array:"),this.dispatch(Array.prototype.slice.call(y))},_int16array:function(y){return _("int16array:"),this.dispatch(Array.prototype.slice.call(y))},_uint32array:function(y){return _("uint32array:"),this.dispatch(Array.prototype.slice.call(y))},_int32array:function(y){return _("int32array:"),this.dispatch(Array.prototype.slice.call(y))},_float32array:function(y){return _("float32array:"),this.dispatch(Array.prototype.slice.call(y))},_float64array:function(y){return _("float64array:"),this.dispatch(Array.prototype.slice.call(y))},_arraybuffer:function(y){return _("arraybuffer:"),this.dispatch(new Uint8Array(y))},_url:function(y){return _("url:"+y.toString())},_map:function(y){return _("map:"),y=Array.from(y),this._array(y,O.unorderedSets!==!1)},_set:function(y){return _("set:"),y=Array.from(y),this._array(y,O.unorderedSets!==!1)},_file:function(y){return _("file:"),this.dispatch([y.name,y.size,y.type,y.lastModfied])},_blob:function(){if(O.ignoreUnknown)return _("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return _("domwindow")},_bigint:function(y){return _("bigint:"+y.toString())},_process:function(){return _("process")},_timer:function(){return _("timer")},_pipe:function(){return _("pipe")},_tcp:function(){return _("tcp")},_udp:function(){return _("udp")},_tty:function(){return _("tty")},_statwatcher:function(){return _("statwatcher")},_securecontext:function(){return _("securecontext")},_connection:function(){return _("connection")},_zlib:function(){return _("zlib")},_context:function(){return _("context")},_nodescript:function(){return _("nodescript")},_httpparser:function(){return _("httpparser")},_dataview:function(){return _("dataview")},_signal:function(){return _("signal")},_fsevent:function(){return _("fsevent")},_tlswrap:function(){return _("tlswrap")}}}function V(){return{buf:"",write:function(O){this.buf+=O},end:function(O){this.buf+=O},read:function(){return this.buf}}}r.writeToStream=function(O,R,g){return g===void 0&&(g=R,R={}),S(R=T(O,R),g).dispatch(O)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,e,r){(function(n,i,a,s,o,u,c,d,p){(function(b){"use strict";var v=typeof Uint8Array<"u"?Uint8Array:Array,m="+".charCodeAt(0),x="/".charCodeAt(0),T="0".charCodeAt(0),k="a".charCodeAt(0),S="A".charCodeAt(0),V="-".charCodeAt(0),O="_".charCodeAt(0);function R(g){return g=g.charCodeAt(0),g===m||g===V?62:g===x||g===O?63:g<T?-1:g<T+10?g-T+26+26:g<S+26?g-S:g<k+26?g-k+26:void 0}b.toByteArray=function(g){var _,y;if(0<g.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var C=g.length,C=g.charAt(C-2)==="="?2:g.charAt(C-1)==="="?1:0,N=new v(3*g.length/4-C),Q=0<C?g.length-4:g.length,W=0;function te(K){N[W++]=K}for(_=0;_<Q;_+=4,0)te((16711680&(y=R(g.charAt(_))<<18|R(g.charAt(_+1))<<12|R(g.charAt(_+2))<<6|R(g.charAt(_+3))))>>16),te((65280&y)>>8),te(255&y);return C==2?te(255&(y=R(g.charAt(_))<<2|R(g.charAt(_+1))>>4)):C==1&&(te((y=R(g.charAt(_))<<10|R(g.charAt(_+1))<<4|R(g.charAt(_+2))>>2)>>8&255),te(255&y)),N},b.fromByteArray=function(g){var _,y,C,N,Q=g.length%3,W="";function te(K){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(K)}for(_=0,C=g.length-Q;_<C;_+=3)y=(g[_]<<16)+(g[_+1]<<8)+g[_+2],W+=te((N=y)>>18&63)+te(N>>12&63)+te(N>>6&63)+te(63&N);switch(Q){case 1:W=(W+=te((y=g[g.length-1])>>2))+te(y<<4&63)+"==";break;case 2:W=(W=(W+=te((y=(g[g.length-2]<<8)+g[g.length-1])>>10))+te(y>>4&63))+te(y<<2&63)+"="}return W}})(r===void 0?this.base64js={}:r)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,e,r){(function(n,i,m,s,o,u,c,d,p){var b=t("base64-js"),v=t("ieee754");function m(f,w,A){if(!(this instanceof m))return new m(f,w,A);var q,D,z,ne,ye=typeof f;if(w==="base64"&&ye=="string")for(f=(ne=f).trim?ne.trim():ne.replace(/^\s+|\s+$/g,"");f.length%4!=0;)f+="=";if(ye=="number")q=Re(f);else if(ye=="string")q=m.byteLength(f,w);else{if(ye!="object")throw new Error("First argument needs to be a number, array or string.");q=Re(f.length)}if(m._useTypedArrays?D=m._augment(new Uint8Array(q)):((D=this).length=q,D._isBuffer=!0),m._useTypedArrays&&typeof f.byteLength=="number")D._set(f);else if(me(ne=f)||m.isBuffer(ne)||ne&&typeof ne=="object"&&typeof ne.length=="number")for(z=0;z<q;z++)m.isBuffer(f)?D[z]=f.readUInt8(z):D[z]=f[z];else if(ye=="string")D.write(f,0,w);else if(ye=="number"&&!m._useTypedArrays&&!A)for(z=0;z<q;z++)D[z]=0;return D}function x(f,w,A,q){return m._charsWritten=qi(function(D){for(var z=[],ne=0;ne<D.length;ne++)z.push(255&D.charCodeAt(ne));return z}(w),f,A,q)}function T(f,w,A,q){return m._charsWritten=qi(function(D){for(var z,ne,ye=[],Ee=0;Ee<D.length;Ee++)ne=D.charCodeAt(Ee),z=ne>>8,ne=ne%256,ye.push(ne),ye.push(z);return ye}(w),f,A,q)}function k(f,w,A){var q="";A=Math.min(f.length,A);for(var D=w;D<A;D++)q+=String.fromCharCode(f[D]);return q}function S(f,w,A,z){z||(B(typeof A=="boolean","missing or invalid endian"),B(w!=null,"missing offset"),B(w+1<f.length,"Trying to read beyond buffer length"));var D,z=f.length;if(!(z<=w))return A?(D=f[w],w+1<z&&(D|=f[w+1]<<8)):(D=f[w]<<8,w+1<z&&(D|=f[w+1])),D}function V(f,w,A,z){z||(B(typeof A=="boolean","missing or invalid endian"),B(w!=null,"missing offset"),B(w+3<f.length,"Trying to read beyond buffer length"));var D,z=f.length;if(!(z<=w))return A?(w+2<z&&(D=f[w+2]<<16),w+1<z&&(D|=f[w+1]<<8),D|=f[w],w+3<z&&(D+=f[w+3]<<24>>>0)):(w+1<z&&(D=f[w+1]<<16),w+2<z&&(D|=f[w+2]<<8),w+3<z&&(D|=f[w+3]),D+=f[w]<<24>>>0),D}function O(f,w,A,q){if(q||(B(typeof A=="boolean","missing or invalid endian"),B(w!=null,"missing offset"),B(w+1<f.length,"Trying to read beyond buffer length")),!(f.length<=w))return q=S(f,w,A,!0),32768&q?-1*(65535-q+1):q}function R(f,w,A,q){if(q||(B(typeof A=="boolean","missing or invalid endian"),B(w!=null,"missing offset"),B(w+3<f.length,"Trying to read beyond buffer length")),!(f.length<=w))return q=V(f,w,A,!0),2147483648&q?-1*(4294967295-q+1):q}function g(f,w,A,q){return q||(B(typeof A=="boolean","missing or invalid endian"),B(w+3<f.length,"Trying to read beyond buffer length")),v.read(f,w,A,23,4)}function _(f,w,A,q){return q||(B(typeof A=="boolean","missing or invalid endian"),B(w+7<f.length,"Trying to read beyond buffer length")),v.read(f,w,A,52,8)}function y(f,w,A,q,D){if(D||(B(w!=null,"missing value"),B(typeof q=="boolean","missing or invalid endian"),B(A!=null,"missing offset"),B(A+1<f.length,"trying to write beyond buffer length"),yo(w,65535)),D=f.length,!(D<=A))for(var z=0,ne=Math.min(D-A,2);z<ne;z++)f[A+z]=(w&255<<8*(q?z:1-z))>>>8*(q?z:1-z)}function C(f,w,A,q,D){if(D||(B(w!=null,"missing value"),B(typeof q=="boolean","missing or invalid endian"),B(A!=null,"missing offset"),B(A+3<f.length,"trying to write beyond buffer length"),yo(w,4294967295)),D=f.length,!(D<=A))for(var z=0,ne=Math.min(D-A,4);z<ne;z++)f[A+z]=w>>>8*(q?z:3-z)&255}function N(f,w,A,q,D){D||(B(w!=null,"missing value"),B(typeof q=="boolean","missing or invalid endian"),B(A!=null,"missing offset"),B(A+1<f.length,"Trying to write beyond buffer length"),go(w,32767,-32768)),f.length<=A||y(f,0<=w?w:65535+w+1,A,q,D)}function Q(f,w,A,q,D){D||(B(w!=null,"missing value"),B(typeof q=="boolean","missing or invalid endian"),B(A!=null,"missing offset"),B(A+3<f.length,"Trying to write beyond buffer length"),go(w,2147483647,-2147483648)),f.length<=A||C(f,0<=w?w:4294967295+w+1,A,q,D)}function W(f,w,A,q,D){D||(B(w!=null,"missing value"),B(typeof q=="boolean","missing or invalid endian"),B(A!=null,"missing offset"),B(A+3<f.length,"Trying to write beyond buffer length"),ac(w,34028234663852886e22,-34028234663852886e22)),f.length<=A||v.write(f,w,A,q,23,4)}function te(f,w,A,q,D){D||(B(w!=null,"missing value"),B(typeof q=="boolean","missing or invalid endian"),B(A!=null,"missing offset"),B(A+7<f.length,"Trying to write beyond buffer length"),ac(w,17976931348623157e292,-17976931348623157e292)),f.length<=A||v.write(f,w,A,q,52,8)}r.Buffer=m,r.SlowBuffer=m,r.INSPECT_MAX_BYTES=50,m.poolSize=8192,m._useTypedArrays=function(){try{var f=new ArrayBuffer(0),w=new Uint8Array(f);return w.foo=function(){return 42},w.foo()===42&&typeof w.subarray=="function"}catch{return!1}}(),m.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.isBuffer=function(f){return!(f==null||!f._isBuffer)},m.byteLength=function(f,w){var A;switch(f+="",w||"utf8"){case"hex":A=f.length/2;break;case"utf8":case"utf-8":A=Pt(f).length;break;case"ascii":case"binary":case"raw":A=f.length;break;case"base64":A=nc(f).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":A=2*f.length;break;default:throw new Error("Unknown encoding")}return A},m.concat=function(f,w){if(B(me(f),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),f.length===0)return new m(0);if(f.length===1)return f[0];if(typeof w!="number")for(D=w=0;D<f.length;D++)w+=f[D].length;for(var A=new m(w),q=0,D=0;D<f.length;D++){var z=f[D];z.copy(A,q),q+=z.length}return A},m.prototype.write=function(f,w,A,q){isFinite(w)?isFinite(A)||(q=A,A=void 0):(Ee=q,q=w,w=A,A=Ee),w=Number(w)||0;var D,z,ne,ye,Ee=this.length-w;switch((!A||Ee<(A=Number(A)))&&(A=Ee),q=String(q||"utf8").toLowerCase()){case"hex":D=function(ot,Ze,He,Te){He=Number(He)||0;var we=ot.length-He;(!Te||we<(Te=Number(Te)))&&(Te=we),B((we=Ze.length)%2==0,"Invalid hex string"),we/2<Te&&(Te=we/2);for(var Ur=0;Ur<Te;Ur++){var sc=parseInt(Ze.substr(2*Ur,2),16);B(!isNaN(sc),"Invalid hex string"),ot[He+Ur]=sc}return m._charsWritten=2*Ur,Ur}(this,f,w,A);break;case"utf8":case"utf-8":z=this,ne=w,ye=A,D=m._charsWritten=qi(Pt(f),z,ne,ye);break;case"ascii":case"binary":D=x(this,f,w,A);break;case"base64":z=this,ne=w,ye=A,D=m._charsWritten=qi(nc(f),z,ne,ye);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":D=T(this,f,w,A);break;default:throw new Error("Unknown encoding")}return D},m.prototype.toString=function(f,w,A){var q,D,z,ne,ye=this;if(f=String(f||"utf8").toLowerCase(),w=Number(w)||0,(A=A!==void 0?Number(A):ye.length)===w)return"";switch(f){case"hex":q=function(Ee,ot,Ze){var He=Ee.length;(!ot||ot<0)&&(ot=0),(!Ze||Ze<0||He<Ze)&&(Ze=He);for(var Te="",we=ot;we<Ze;we++)Te+=pe(Ee[we]);return Te}(ye,w,A);break;case"utf8":case"utf-8":q=function(Ee,ot,Ze){var He="",Te="";Ze=Math.min(Ee.length,Ze);for(var we=ot;we<Ze;we++)Ee[we]<=127?(He+=ic(Te)+String.fromCharCode(Ee[we]),Te=""):Te+="%"+Ee[we].toString(16);return He+ic(Te)}(ye,w,A);break;case"ascii":case"binary":q=k(ye,w,A);break;case"base64":D=ye,ne=A,q=(z=w)===0&&ne===D.length?b.fromByteArray(D):b.fromByteArray(D.slice(z,ne));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":q=function(Ee,ot,Ze){for(var He=Ee.slice(ot,Ze),Te="",we=0;we<He.length;we+=2)Te+=String.fromCharCode(He[we]+256*He[we+1]);return Te}(ye,w,A);break;default:throw new Error("Unknown encoding")}return q},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},m.prototype.copy=function(f,w,A,q){if(w=w||0,(q=q||q===0?q:this.length)!==(A=A||0)&&f.length!==0&&this.length!==0){B(A<=q,"sourceEnd < sourceStart"),B(0<=w&&w<f.length,"targetStart out of bounds"),B(0<=A&&A<this.length,"sourceStart out of bounds"),B(0<=q&&q<=this.length,"sourceEnd out of bounds"),q>this.length&&(q=this.length);var D=(q=f.length-w<q-A?f.length-w+A:q)-A;if(D<100||!m._useTypedArrays)for(var z=0;z<D;z++)f[z+w]=this[z+A];else f._set(this.subarray(A,A+D),w)}},m.prototype.slice=function(f,w){var A=this.length;if(f=he(f,A,0),w=he(w,A,A),m._useTypedArrays)return m._augment(this.subarray(f,w));for(var q=w-f,D=new m(q,void 0,!0),z=0;z<q;z++)D[z]=this[z+f];return D},m.prototype.get=function(f){return this.readUInt8(f)},m.prototype.set=function(f,w){return this.writeUInt8(f,w)},m.prototype.readUInt8=function(f,w){if(w||(B(f!=null,"missing offset"),B(f<this.length,"Trying to read beyond buffer length")),!(f>=this.length))return this[f]},m.prototype.readUInt16LE=function(f,w){return S(this,f,!0,w)},m.prototype.readUInt16BE=function(f,w){return S(this,f,!1,w)},m.prototype.readUInt32LE=function(f,w){return V(this,f,!0,w)},m.prototype.readUInt32BE=function(f,w){return V(this,f,!1,w)},m.prototype.readInt8=function(f,w){if(w||(B(f!=null,"missing offset"),B(f<this.length,"Trying to read beyond buffer length")),!(f>=this.length))return 128&this[f]?-1*(255-this[f]+1):this[f]},m.prototype.readInt16LE=function(f,w){return O(this,f,!0,w)},m.prototype.readInt16BE=function(f,w){return O(this,f,!1,w)},m.prototype.readInt32LE=function(f,w){return R(this,f,!0,w)},m.prototype.readInt32BE=function(f,w){return R(this,f,!1,w)},m.prototype.readFloatLE=function(f,w){return g(this,f,!0,w)},m.prototype.readFloatBE=function(f,w){return g(this,f,!1,w)},m.prototype.readDoubleLE=function(f,w){return _(this,f,!0,w)},m.prototype.readDoubleBE=function(f,w){return _(this,f,!1,w)},m.prototype.writeUInt8=function(f,w,A){A||(B(f!=null,"missing value"),B(w!=null,"missing offset"),B(w<this.length,"trying to write beyond buffer length"),yo(f,255)),w>=this.length||(this[w]=f)},m.prototype.writeUInt16LE=function(f,w,A){y(this,f,w,!0,A)},m.prototype.writeUInt16BE=function(f,w,A){y(this,f,w,!1,A)},m.prototype.writeUInt32LE=function(f,w,A){C(this,f,w,!0,A)},m.prototype.writeUInt32BE=function(f,w,A){C(this,f,w,!1,A)},m.prototype.writeInt8=function(f,w,A){A||(B(f!=null,"missing value"),B(w!=null,"missing offset"),B(w<this.length,"Trying to write beyond buffer length"),go(f,127,-128)),w>=this.length||(0<=f?this.writeUInt8(f,w,A):this.writeUInt8(255+f+1,w,A))},m.prototype.writeInt16LE=function(f,w,A){N(this,f,w,!0,A)},m.prototype.writeInt16BE=function(f,w,A){N(this,f,w,!1,A)},m.prototype.writeInt32LE=function(f,w,A){Q(this,f,w,!0,A)},m.prototype.writeInt32BE=function(f,w,A){Q(this,f,w,!1,A)},m.prototype.writeFloatLE=function(f,w,A){W(this,f,w,!0,A)},m.prototype.writeFloatBE=function(f,w,A){W(this,f,w,!1,A)},m.prototype.writeDoubleLE=function(f,w,A){te(this,f,w,!0,A)},m.prototype.writeDoubleBE=function(f,w,A){te(this,f,w,!1,A)},m.prototype.fill=function(f,w,A){if(w=w||0,A=A||this.length,B(typeof(f=typeof(f=f||0)=="string"?f.charCodeAt(0):f)=="number"&&!isNaN(f),"value is not a number"),B(w<=A,"end < start"),A!==w&&this.length!==0){B(0<=w&&w<this.length,"start out of bounds"),B(0<=A&&A<=this.length,"end out of bounds");for(var q=w;q<A;q++)this[q]=f}},m.prototype.inspect=function(){for(var f=[],w=this.length,A=0;A<w;A++)if(f[A]=pe(this[A]),A===r.INSPECT_MAX_BYTES){f[A+1]="...";break}return"<Buffer "+f.join(" ")+">"},m.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(m._useTypedArrays)return new m(this).buffer;for(var f=new Uint8Array(this.length),w=0,A=f.length;w<A;w+=1)f[w]=this[w];return f.buffer};var K=m.prototype;function he(f,w,A){return typeof f!="number"?A:w<=(f=~~f)?w:0<=f||0<=(f+=w)?f:0}function Re(f){return(f=~~Math.ceil(+f))<0?0:f}function me(f){return(Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"})(f)}function pe(f){return f<16?"0"+f.toString(16):f.toString(16)}function Pt(f){for(var w=[],A=0;A<f.length;A++){var q=f.charCodeAt(A);if(q<=127)w.push(f.charCodeAt(A));else for(var D=A,z=(55296<=q&&q<=57343&&A++,encodeURIComponent(f.slice(D,A+1)).substr(1).split("%")),ne=0;ne<z.length;ne++)w.push(parseInt(z[ne],16))}return w}function nc(f){return b.toByteArray(f)}function qi(f,w,A,q){for(var D=0;D<q&&!(D+A>=w.length||D>=f.length);D++)w[D+A]=f[D];return D}function ic(f){try{return decodeURIComponent(f)}catch{return String.fromCharCode(65533)}}function yo(f,w){B(typeof f=="number","cannot write a non-number as a number"),B(0<=f,"specified a negative value for writing an unsigned value"),B(f<=w,"value is larger than maximum value for type"),B(Math.floor(f)===f,"value has a fractional component")}function go(f,w,A){B(typeof f=="number","cannot write a non-number as a number"),B(f<=w,"value larger than maximum allowed value"),B(A<=f,"value smaller than minimum allowed value"),B(Math.floor(f)===f,"value has a fractional component")}function ac(f,w,A){B(typeof f=="number","cannot write a non-number as a number"),B(f<=w,"value larger than maximum allowed value"),B(A<=f,"value smaller than minimum allowed value")}function B(f,w){if(!f)throw new Error(w||"Failed assertion")}m._augment=function(f){return f._isBuffer=!0,f._get=f.get,f._set=f.set,f.get=K.get,f.set=K.set,f.write=K.write,f.toString=K.toString,f.toLocaleString=K.toString,f.toJSON=K.toJSON,f.copy=K.copy,f.slice=K.slice,f.readUInt8=K.readUInt8,f.readUInt16LE=K.readUInt16LE,f.readUInt16BE=K.readUInt16BE,f.readUInt32LE=K.readUInt32LE,f.readUInt32BE=K.readUInt32BE,f.readInt8=K.readInt8,f.readInt16LE=K.readInt16LE,f.readInt16BE=K.readInt16BE,f.readInt32LE=K.readInt32LE,f.readInt32BE=K.readInt32BE,f.readFloatLE=K.readFloatLE,f.readFloatBE=K.readFloatBE,f.readDoubleLE=K.readDoubleLE,f.readDoubleBE=K.readDoubleBE,f.writeUInt8=K.writeUInt8,f.writeUInt16LE=K.writeUInt16LE,f.writeUInt16BE=K.writeUInt16BE,f.writeUInt32LE=K.writeUInt32LE,f.writeUInt32BE=K.writeUInt32BE,f.writeInt8=K.writeInt8,f.writeInt16LE=K.writeInt16LE,f.writeInt16BE=K.writeInt16BE,f.writeInt32LE=K.writeInt32LE,f.writeInt32BE=K.writeInt32BE,f.writeFloatLE=K.writeFloatLE,f.writeFloatBE=K.writeFloatBE,f.writeDoubleLE=K.writeDoubleLE,f.writeDoubleBE=K.writeDoubleBE,f.fill=K.fill,f.inspect=K.inspect,f.toArrayBuffer=K.toArrayBuffer,f}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,e,r){(function(n,i,b,s,o,u,c,d,p){var b=t("buffer").Buffer,v=4,m=new b(v);m.fill(0),e.exports={hash:function(x,T,k,S){for(var V=T(function(y,C){y.length%v!=0&&(N=y.length+(v-y.length%v),y=b.concat([y,m],N));for(var N,Q=[],W=C?y.readInt32BE:y.readInt32LE,te=0;te<y.length;te+=v)Q.push(W.call(y,te));return Q}(x=b.isBuffer(x)?x:new b(x),S),8*x.length),T=S,O=new b(k),R=T?O.writeInt32BE:O.writeInt32LE,g=0;g<V.length;g++)R.call(O,V[g],4*g,!0);return O}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,e,r){(function(n,i,b,s,o,u,c,d,p){var b=t("buffer").Buffer,v=t("./sha"),m=t("./sha256"),x=t("./rng"),T={sha1:v,sha256:m,md5:t("./md5")},k=64,S=new b(k);function V(y,C){var N=T[y=y||"sha1"],Q=[];return N||O("algorithm:",y,"is not yet supported"),{update:function(W){return b.isBuffer(W)||(W=new b(W)),Q.push(W),W.length,this},digest:function(W){var te=b.concat(Q),te=C?function(K,he,Re){b.isBuffer(he)||(he=new b(he)),b.isBuffer(Re)||(Re=new b(Re)),he.length>k?he=K(he):he.length<k&&(he=b.concat([he,S],k));for(var me=new b(k),pe=new b(k),Pt=0;Pt<k;Pt++)me[Pt]=54^he[Pt],pe[Pt]=92^he[Pt];return Re=K(b.concat([me,Re])),K(b.concat([pe,Re]))}(N,C,te):N(te);return Q=null,W?te.toString(W):te}}}function O(){var y=[].slice.call(arguments).join(" ");throw new Error([y,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}S.fill(0),r.createHash=function(y){return V(y)},r.createHmac=V,r.randomBytes=function(y,C){if(!C||!C.call)return new b(x(y));try{C.call(this,void 0,new b(x(y)))}catch(N){C(N)}};var R,g=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],_=function(y){r[y]=function(){O("sorry,",y,"is not implemented yet")}};for(R in g)_(g[R],R)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,e,r){(function(n,i,a,s,o,u,c,d,p){var b=t("./helpers");function v(O,R){O[R>>5]|=128<<R%32,O[14+(R+64>>>9<<4)]=R;for(var g=1732584193,_=-271733879,y=-1732584194,C=271733878,N=0;N<O.length;N+=16){var Q=g,W=_,te=y,K=C,g=x(g,_,y,C,O[N+0],7,-680876936),C=x(C,g,_,y,O[N+1],12,-389564586),y=x(y,C,g,_,O[N+2],17,606105819),_=x(_,y,C,g,O[N+3],22,-1044525330);g=x(g,_,y,C,O[N+4],7,-176418897),C=x(C,g,_,y,O[N+5],12,1200080426),y=x(y,C,g,_,O[N+6],17,-1473231341),_=x(_,y,C,g,O[N+7],22,-45705983),g=x(g,_,y,C,O[N+8],7,1770035416),C=x(C,g,_,y,O[N+9],12,-1958414417),y=x(y,C,g,_,O[N+10],17,-42063),_=x(_,y,C,g,O[N+11],22,-1990404162),g=x(g,_,y,C,O[N+12],7,1804603682),C=x(C,g,_,y,O[N+13],12,-40341101),y=x(y,C,g,_,O[N+14],17,-1502002290),g=T(g,_=x(_,y,C,g,O[N+15],22,1236535329),y,C,O[N+1],5,-165796510),C=T(C,g,_,y,O[N+6],9,-1069501632),y=T(y,C,g,_,O[N+11],14,643717713),_=T(_,y,C,g,O[N+0],20,-373897302),g=T(g,_,y,C,O[N+5],5,-701558691),C=T(C,g,_,y,O[N+10],9,38016083),y=T(y,C,g,_,O[N+15],14,-660478335),_=T(_,y,C,g,O[N+4],20,-405537848),g=T(g,_,y,C,O[N+9],5,568446438),C=T(C,g,_,y,O[N+14],9,-1019803690),y=T(y,C,g,_,O[N+3],14,-187363961),_=T(_,y,C,g,O[N+8],20,1163531501),g=T(g,_,y,C,O[N+13],5,-1444681467),C=T(C,g,_,y,O[N+2],9,-51403784),y=T(y,C,g,_,O[N+7],14,1735328473),g=k(g,_=T(_,y,C,g,O[N+12],20,-1926607734),y,C,O[N+5],4,-378558),C=k(C,g,_,y,O[N+8],11,-2022574463),y=k(y,C,g,_,O[N+11],16,1839030562),_=k(_,y,C,g,O[N+14],23,-35309556),g=k(g,_,y,C,O[N+1],4,-1530992060),C=k(C,g,_,y,O[N+4],11,1272893353),y=k(y,C,g,_,O[N+7],16,-155497632),_=k(_,y,C,g,O[N+10],23,-1094730640),g=k(g,_,y,C,O[N+13],4,681279174),C=k(C,g,_,y,O[N+0],11,-358537222),y=k(y,C,g,_,O[N+3],16,-722521979),_=k(_,y,C,g,O[N+6],23,76029189),g=k(g,_,y,C,O[N+9],4,-640364487),C=k(C,g,_,y,O[N+12],11,-421815835),y=k(y,C,g,_,O[N+15],16,530742520),g=S(g,_=k(_,y,C,g,O[N+2],23,-995338651),y,C,O[N+0],6,-198630844),C=S(C,g,_,y,O[N+7],10,1126891415),y=S(y,C,g,_,O[N+14],15,-1416354905),_=S(_,y,C,g,O[N+5],21,-57434055),g=S(g,_,y,C,O[N+12],6,1700485571),C=S(C,g,_,y,O[N+3],10,-1894986606),y=S(y,C,g,_,O[N+10],15,-1051523),_=S(_,y,C,g,O[N+1],21,-2054922799),g=S(g,_,y,C,O[N+8],6,1873313359),C=S(C,g,_,y,O[N+15],10,-30611744),y=S(y,C,g,_,O[N+6],15,-1560198380),_=S(_,y,C,g,O[N+13],21,1309151649),g=S(g,_,y,C,O[N+4],6,-145523070),C=S(C,g,_,y,O[N+11],10,-1120210379),y=S(y,C,g,_,O[N+2],15,718787259),_=S(_,y,C,g,O[N+9],21,-343485551),g=V(g,Q),_=V(_,W),y=V(y,te),C=V(C,K)}return Array(g,_,y,C)}function m(O,R,g,_,y,C){return V((R=V(V(R,O),V(_,C)))<<y|R>>>32-y,g)}function x(O,R,g,_,y,C,N){return m(R&g|~R&_,O,R,y,C,N)}function T(O,R,g,_,y,C,N){return m(R&_|g&~_,O,R,y,C,N)}function k(O,R,g,_,y,C,N){return m(R^g^_,O,R,y,C,N)}function S(O,R,g,_,y,C,N){return m(g^(R|~_),O,R,y,C,N)}function V(O,R){var g=(65535&O)+(65535&R);return(O>>16)+(R>>16)+(g>>16)<<16|65535&g}e.exports=function(O){return b.hash(O,v,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,e,r){(function(n,i,a,s,o,u,c,d,p){var b;e.exports=b||function(v){for(var m,x=new Array(v),T=0;T<v;T++)!(3&T)&&(m=4294967296*Math.random()),x[T]=m>>>((3&T)<<3)&255;return x}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,e,r){(function(n,i,a,s,o,u,c,d,p){var b=t("./helpers");function v(T,k){T[k>>5]|=128<<24-k%32,T[15+(k+64>>9<<4)]=k;for(var S,V,O,R=Array(80),g=1732584193,_=-271733879,y=-1732584194,C=271733878,N=-1009589776,Q=0;Q<T.length;Q+=16){for(var W=g,te=_,K=y,he=C,Re=N,me=0;me<80;me++){R[me]=me<16?T[Q+me]:x(R[me-3]^R[me-8]^R[me-14]^R[me-16],1);var pe=m(m(x(g,5),(pe=_,V=y,O=C,(S=me)<20?pe&V|~pe&O:!(S<40)&&S<60?pe&V|pe&O|V&O:pe^V^O)),m(m(N,R[me]),(S=me)<20?1518500249:S<40?1859775393:S<60?-1894007588:-899497514)),N=C,C=y,y=x(_,30),_=g,g=pe}g=m(g,W),_=m(_,te),y=m(y,K),C=m(C,he),N=m(N,Re)}return Array(g,_,y,C,N)}function m(T,k){var S=(65535&T)+(65535&k);return(T>>16)+(k>>16)+(S>>16)<<16|65535&S}function x(T,k){return T<<k|T>>>32-k}e.exports=function(T){return b.hash(T,v,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,e,r){(function(n,i,a,s,o,u,c,d,p){function b(k,S){var V=(65535&k)+(65535&S);return(k>>16)+(S>>16)+(V>>16)<<16|65535&V}function v(k,S){var V,O=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),R=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),g=new Array(64);k[S>>5]|=128<<24-S%32,k[15+(S+64>>9<<4)]=S;for(var _,y,C=0;C<k.length;C+=16){for(var N=R[0],Q=R[1],W=R[2],te=R[3],K=R[4],he=R[5],Re=R[6],me=R[7],pe=0;pe<64;pe++)g[pe]=pe<16?k[pe+C]:b(b(b((y=g[pe-2],x(y,17)^x(y,19)^T(y,10)),g[pe-7]),(y=g[pe-15],x(y,7)^x(y,18)^T(y,3))),g[pe-16]),V=b(b(b(b(me,x(y=K,6)^x(y,11)^x(y,25)),K&he^~K&Re),O[pe]),g[pe]),_=b(x(_=N,2)^x(_,13)^x(_,22),N&Q^N&W^Q&W),me=Re,Re=he,he=K,K=b(te,V),te=W,W=Q,Q=N,N=b(V,_);R[0]=b(N,R[0]),R[1]=b(Q,R[1]),R[2]=b(W,R[2]),R[3]=b(te,R[3]),R[4]=b(K,R[4]),R[5]=b(he,R[5]),R[6]=b(Re,R[6]),R[7]=b(me,R[7])}return R}var m=t("./helpers"),x=function(k,S){return k>>>S|k<<32-S},T=function(k,S){return k>>>S};e.exports=function(k){return m.hash(k,v,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,e,r){(function(n,i,a,s,o,u,c,d,p){r.read=function(b,v,m,x,C){var k,S,V=8*C-x-1,O=(1<<V)-1,R=O>>1,g=-7,_=m?C-1:0,y=m?-1:1,C=b[v+_];for(_+=y,k=C&(1<<-g)-1,C>>=-g,g+=V;0<g;k=256*k+b[v+_],_+=y,g-=8);for(S=k&(1<<-g)-1,k>>=-g,g+=x;0<g;S=256*S+b[v+_],_+=y,g-=8);if(k===0)k=1-R;else{if(k===O)return S?NaN:1/0*(C?-1:1);S+=Math.pow(2,x),k-=R}return(C?-1:1)*S*Math.pow(2,k-x)},r.write=function(b,v,m,x,T,N){var S,V,O=8*N-T-1,R=(1<<O)-1,g=R>>1,_=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=x?0:N-1,C=x?1:-1,N=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(V=isNaN(v)?1:0,S=R):(S=Math.floor(Math.log(v)/Math.LN2),v*(x=Math.pow(2,-S))<1&&(S--,x*=2),2<=(v+=1<=S+g?_/x:_*Math.pow(2,1-g))*x&&(S++,x/=2),R<=S+g?(V=0,S=R):1<=S+g?(V=(v*x-1)*Math.pow(2,T),S+=g):(V=v*Math.pow(2,g-1)*Math.pow(2,T),S=0));8<=T;b[m+y]=255&V,y+=C,V/=256,T-=8);for(S=S<<T|V,O+=T;0<O;b[m+y]=255&S,y+=C,S/=256,O-=8);b[m+y-C]|=128*N}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,e,r){(function(n,i,a,s,o,u,c,d,p){var b,v,m;function x(){}(n=e.exports={}).nextTick=(v=typeof window<"u"&&window.setImmediate,m=typeof window<"u"&&window.postMessage&&window.addEventListener,v?function(T){return window.setImmediate(T)}:m?(b=[],window.addEventListener("message",function(T){var k=T.source;k!==window&&k!==null||T.data!=="process-tick"||(T.stopPropagation(),0<b.length&&b.shift()())},!0),function(T){b.push(T),window.postMessage("process-tick","*")}):function(T){setTimeout(T,0)}),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=x,n.addListener=x,n.once=x,n.off=x,n.removeListener=x,n.removeAllListeners=x,n.emit=x,n.binding=function(T){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(T){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})});var qp,Au,Fp=M(()=>{l();qp=be(Dp(),1),Au=(...t)=>(0,qp.default)(t.join("_"))});var Vp=L((sS,Up)=>{"use strict";l();Up.exports=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}});var Jp=L((uS,Pu)=>{"use strict";l();var tw=/[\p{Lu}]/u,rw=/[\p{Ll}]/u,Bp=/^[\p{Lu}](?![\p{Lu}])/gu,$p=/([\p{Alpha}\p{N}_]|$)/u,Zp=/[_.\- ]+/,nw=new RegExp("^"+Zp.source),zp=new RegExp(Zp.source+$p.source,"gu"),Kp=new RegExp("\\d+"+$p.source,"gu"),iw=(t,e,r)=>{let n=!1,i=!1,a=!1;for(let s=0;s<t.length;s++){let o=t[s];n&&tw.test(o)?(t=t.slice(0,s)+"-"+t.slice(s),n=!1,a=i,i=!0,s++):i&&a&&rw.test(o)?(t=t.slice(0,s-1)+"-"+t.slice(s-1),a=i,i=!1,n=!0):(n=e(o)===o&&r(o)!==o,a=i,i=r(o)===o&&e(o)!==o)}return t},aw=(t,e)=>(Bp.lastIndex=0,t.replace(Bp,r=>e(r))),sw=(t,e)=>(zp.lastIndex=0,Kp.lastIndex=0,t.replace(zp,(r,n)=>e(n)).replace(Kp,r=>e(r))),Hp=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(a=>a.trim()).filter(a=>a.length).join("-"):t=t.trim(),t.length===0)return"";let r=e.locale===!1?a=>a.toLowerCase():a=>a.toLocaleLowerCase(e.locale),n=e.locale===!1?a=>a.toUpperCase():a=>a.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?n(t):r(t):(t!==r(t)&&(t=iw(t,r,n)),t=t.replace(nw,""),e.preserveConsecutiveUppercase?t=aw(t,r):t=r(t),e.pascalCase&&(t=n(t.charAt(0))+t.slice(1)),sw(t,n))};Pu.exports=Hp;Pu.exports.default=Hp});function Wp(t,e){return e?.[t]||(0,Yp.default)(t)}function Gp(t,e,r){let n={};for(let i in t)Object.hasOwn(t,i)&&(n[e(i,r)]=t[i]);return n}var Yp,ow,Qp=M(()=>{l();Yp=be(Vp(),1),ow=be(Jp(),1)});function Xp(t){return Array.isArray(t)?[...t]:{...t}}function uw(t,e){let r=Xp(t);for(let[n,i]of Object.entries(e)){let[a,...s]=n.split(".").reverse(),o=r;for(let u of s.reverse()){if(o[u]===void 0)break;o[u]=Xp(o[u]),o=o[u]}o[a]!==void 0&&(o[a]={lc:1,type:"secret",id:[i]})}return r}var Ke,or=M(()=>{l();Qp();Ke=class t{get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...r){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof t||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let e={},r={},n=Object.keys(this.lc_kwargs).reduce((i,a)=>(i[a]=a in this?this[a]:this.lc_kwargs[a],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(r,Reflect.get(i,"lc_secrets",this)),Object.assign(n,Reflect.get(i,"lc_attributes",this));for(let i in r)i in this&&this[i]!==void 0&&(n[i]=this[i]||n[i]);return{lc:1,type:"constructor",id:[...this.lc_namespace,this.constructor.name],kwargs:Gp(Object.keys(r).length?uw(n,r):n,Wp,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:[...this.lc_namespace,this.constructor.name]}}}});var tn,St,ur,lr,ct,da,gt,pa,Qr,ha,fa,Xr,ma,ya,en,ga,rt=M(()=>{l();or();tn="__run",St=class t{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new t({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},ur=class extends Ke{get text(){return this.content}constructor(e,r){typeof e=="string"&&(e={content:e,additional_kwargs:r}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}},lr=class extends ur{static _mergeAdditionalKwargs(e,r){let n={...e};for(let[i,a]of Object.entries(r))if(n[i]===void 0)n[i]=a;else{if(typeof n[i]!=typeof a)throw new Error(`additional_kwargs[${i}] already exists in the message chunk, but with a different type.`);if(typeof n[i]=="string")n[i]=n[i]+a;else if(!Array.isArray(n[i])&&typeof n[i]=="object")n[i]=this._mergeAdditionalKwargs(n[i],a);else throw new Error(`additional_kwargs[${i}] already exists in this message chunk.`)}return n}},ct=class extends ur{_getType(){return"human"}},da=class t extends lr{_getType(){return"human"}concat(e){return new t({content:this.content+e.content,additional_kwargs:t._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}},gt=class extends ur{_getType(){return"ai"}},pa=class t extends lr{_getType(){return"ai"}concat(e){return new t({content:this.content+e.content,additional_kwargs:t._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}},Qr=class extends ur{_getType(){return"system"}},ha=class t extends lr{_getType(){return"system"}concat(e){return new t({content:this.content+e.content,additional_kwargs:t._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}},fa=class t extends lr{_getType(){return"function"}concat(e){return new t({content:this.content+e.content,additional_kwargs:t._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),name:this.name??""})}},Xr=class extends ur{constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}},ma=class t extends lr{constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new t({content:this.content+e.content,additional_kwargs:t._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),role:this.role})}},ya=class t extends St{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new t({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}},en=class extends Ke{},ga=class{}});var lw,ba,eh=M(()=>{l();Fp();rt();lw=new Map,ba=class t extends ga{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,r){return Promise.resolve(this.cache.get(Au(e,r))??null)}async update(e,r,n){this.cache.set(Au(e,r),n)}static global(){return new t(lw)}}});var rh=L((xS,th)=>{l();function nt(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}th.exports=nt;nt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};nt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};nt.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};nt.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};nt.prototype.try=function(t){this.attempt(t)};nt.prototype.start=function(t){this.attempt(t)};nt.prototype.start=nt.prototype.try;nt.prototype.errors=function(){return this._errors};nt.prototype.attempts=function(){return this._attempts};nt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],a=i.message,s=(t[a]||0)+1;t[a]=s,s>=r&&(e=i,r=s)}return e}});var nh=L(cr=>{l();var cw=rh();cr.operation=function(t){var e=cr.timeouts(t);return new cw(e,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})};cr.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<e.retries;i++)n.push(this.createTimeout(i,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(i,e)),n.sort(function(a,s){return a-s}),n};cr.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,n=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout),n};cr.wrap=function(t,e,r){if(e instanceof Array&&(r=e,e=null),!r){r=[];for(var n in t)typeof t[n]=="function"&&r.push(n)}for(var i=0;i<r.length;i++){var a=r[i],s=t[a];t[a]=function(u){var c=cr.operation(e),d=Array.prototype.slice.call(arguments,1),p=d.pop();d.push(function(b){c.retry(b)||(b&&(arguments[0]=c.mainError()),p.apply(this,arguments))}),c.attempt(function(){u.apply(t,d)})}.bind(t,s),t[a].options=e}}});var ah=L((ES,ih)=>{l();ih.exports=nh()});var Eu=L((CS,_a)=>{"use strict";l();var dw=ah(),pw=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],wa=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},hw=(t,e,r)=>{let n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t},fw=t=>pw.includes(t),sh=(t,e)=>new Promise((r,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};let i=dw.operation(e);i.attempt(async a=>{try{r(await t(a))}catch(s){if(!(s instanceof Error)){n(new TypeError(`Non-error was thrown: "${s}". You should only throw errors.`));return}if(s instanceof wa)i.stop(),n(s.originalError);else if(s instanceof TypeError&&!fw(s.message))i.stop(),n(s);else{hw(s,a,e);try{await e.onFailedAttempt(s)}catch(o){n(o);return}i.retry(s)||n(i.mainError())}}})});_a.exports=sh;_a.exports.default=sh;_a.exports.AbortError=wa});var uh=L((SS,Tu)=>{"use strict";l();var mw=Object.prototype.hasOwnProperty,$e="~";function Gn(){}Object.create&&(Gn.prototype=Object.create(null),new Gn().__proto__||($e=!1));function yw(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function oh(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var a=new yw(r,n||t,i),s=$e?$e+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function va(t,e){--t._eventsCount===0?t._events=new Gn:delete t._events[e]}function Le(){this._events=new Gn,this._eventsCount=0}Le.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)mw.call(r,n)&&e.push($e?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Le.prototype.listeners=function(e){var r=$e?$e+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s};Le.prototype.listenerCount=function(e){var r=$e?$e+e:e,n=this._events[r];return n?n.fn?1:n.length:0};Le.prototype.emit=function(e,r,n,i,a,s){var o=$e?$e+e:e;if(!this._events[o])return!1;var u=this._events[o],c=arguments.length,d,p;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,a),!0;case 6:return u.fn.call(u.context,r,n,i,a,s),!0}for(p=1,d=new Array(c-1);p<c;p++)d[p-1]=arguments[p];u.fn.apply(u.context,d)}else{var b=u.length,v;for(p=0;p<b;p++)switch(u[p].once&&this.removeListener(e,u[p].fn,void 0,!0),c){case 1:u[p].fn.call(u[p].context);break;case 2:u[p].fn.call(u[p].context,r);break;case 3:u[p].fn.call(u[p].context,r,n);break;case 4:u[p].fn.call(u[p].context,r,n,i);break;default:if(!d)for(v=1,d=new Array(c-1);v<c;v++)d[v-1]=arguments[v];u[p].fn.apply(u[p].context,d)}}return!0};Le.prototype.on=function(e,r,n){return oh(this,e,r,n,!1)};Le.prototype.once=function(e,r,n){return oh(this,e,r,n,!0)};Le.prototype.removeListener=function(e,r,n,i){var a=$e?$e+e:e;if(!this._events[a])return this;if(!r)return va(this,a),this;var s=this._events[a];if(s.fn)s.fn===r&&(!i||s.once)&&(!n||s.context===n)&&va(this,a);else{for(var o=0,u=[],c=s.length;o<c;o++)(s[o].fn!==r||i&&!s[o].once||n&&s[o].context!==n)&&u.push(s[o]);u.length?this._events[a]=u.length===1?u[0]:u:va(this,a)}return this};Le.prototype.removeAllListeners=function(e){var r;return e?(r=$e?$e+e:e,this._events[r]&&va(this,r)):(this._events=new Gn,this._eventsCount=0),this};Le.prototype.off=Le.prototype.removeListener;Le.prototype.addListener=Le.prototype.on;Le.prefixed=$e;Le.EventEmitter=Le;typeof Tu<"u"&&(Tu.exports=Le)});var ch=L((kS,lh)=>{"use strict";l();lh.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})))});var ph=L((NS,Oa)=>{"use strict";l();var gw=ch(),xa=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},dh=(t,e,r)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}let a=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(u){i(u)}return}let s=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new xa(s);typeof t.cancel=="function"&&t.cancel(),i(o)},e);gw(t.then(n,i),()=>{clearTimeout(a)})});Oa.exports=dh;Oa.exports.default=dh;Oa.exports.TimeoutError=xa});var hh=L(Cu=>{"use strict";l();Object.defineProperty(Cu,"__esModule",{value:!0});function bw(t,e,r){let n=0,i=t.length;for(;i>0;){let a=i/2|0,s=n+a;r(t[s],e)<=0?(n=++s,i-=a+1):i=a}return n}Cu.default=bw});var fh=L(Su=>{"use strict";l();Object.defineProperty(Su,"__esModule",{value:!0});var ww=hh(),Iu=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let i=ww.default(this._queue,n,(a,s)=>s.priority-a.priority);this._queue.splice(i,0,n)}dequeue(){let e=this._queue.shift();return e?.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};Su.default=Iu});var Pa=L(ku=>{"use strict";l();Object.defineProperty(ku,"__esModule",{value:!0});var _w=uh(),mh=ph(),vw=fh(),Aa=()=>{},xw=new mh.TimeoutError,ju=class extends _w{constructor(e){var r,n,i,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Aa,this._resolveIdle=Aa,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:vw.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Aa,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Aa,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{let a=async()=>{this._pendingCount++,this._intervalCount++;try{let s=this._timeout===void 0&&r.timeout===void 0?e():mh.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(xw)});n(await s)}catch(s){i(s)}this._next()};this._queue.enqueue(a,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};ku.default=ju});var yh,Ea,Ow,jt,Qn=M(()=>{l();yh=be(Eu(),1),Ea=be(Pa(),1),Ow=[400,401,403,404,405,406,407,408,409],jt=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;let r="default"in Ea.default?Ea.default.default:Ea.default;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>(0,yh.default)(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||n?.code==="ECONNABORTED")throw n;let i=n?.response?.status;if(i&&Ow.includes(+i))throw n;let a=n?.response?.data;if(a?.error?.code==="insufficient_quota"){let s=new Error(a?.error?.message);throw s.name="InsufficientQuotaError",s}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,a)=>{e.signal?.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}});var Aw,Pw,gh,Ru=M(()=>{l();Aw=Object.defineProperty,Pw=(t,e,r)=>e in t?Aw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gh=(t,e,r)=>(Pw(t,typeof e!="symbol"?e+"":e,r),r)});var _h=L(Ta=>{"use strict";l();Ta.byteLength=Tw;Ta.toByteArray=Iw;Ta.fromByteArray=kw;var bt=[],it=[],Ew=typeof Uint8Array<"u"?Uint8Array:Array,Nu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(dr=0,bh=Nu.length;dr<bh;++dr)bt[dr]=Nu[dr],it[Nu.charCodeAt(dr)]=dr;var dr,bh;it["-".charCodeAt(0)]=62;it["_".charCodeAt(0)]=63;function wh(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Tw(t){var e=wh(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Cw(t,e,r){return(e+r)*3/4-r}function Iw(t){var e,r=wh(t),n=r[0],i=r[1],a=new Ew(Cw(t,n,i)),s=0,o=i>0?n-4:n,u;for(u=0;u<o;u+=4)e=it[t.charCodeAt(u)]<<18|it[t.charCodeAt(u+1)]<<12|it[t.charCodeAt(u+2)]<<6|it[t.charCodeAt(u+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=it[t.charCodeAt(u)]<<2|it[t.charCodeAt(u+1)]>>4,a[s++]=e&255),i===1&&(e=it[t.charCodeAt(u)]<<10|it[t.charCodeAt(u+1)]<<4|it[t.charCodeAt(u+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function Sw(t){return bt[t>>18&63]+bt[t>>12&63]+bt[t>>6&63]+bt[t&63]}function jw(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(Sw(n));return i.join("")}function kw(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,o=r-n;s<o;s+=a)i.push(jw(t,s,s+a>o?o:s+a));return n===1?(e=t[r-1],i.push(bt[e>>2]+bt[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(bt[e>>10]+bt[e>>4&63]+bt[e<<2&63]+"=")),i.join("")}});function Rw(t,e){let r=Array.from({length:t.length},(n,i)=>({start:i,end:i+1}));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){let a=t.slice(r[i].start,r[i+1].end),s=e.get(a.join(","));s!=null&&(n==null||s<n[0])&&(n=[s,i])}if(n!=null){let i=n[1];r[i]={start:r[i].start,end:r[i+1].end},r.splice(i+1,1)}else break}return r}function Nw(t,e){return t.length===1?[e.get(t.join(","))]:Rw(t,e).map(r=>e.get(t.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function Mw(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}function Lu(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}var vh,Mu,Ca,xh=M(()=>{l();Ru();vh=be(_h(),1);Mu=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(t,e){this.patStr=t.pat_str;let r=t.bpe_ranks.split(`
`).filter(Boolean).reduce((n,i)=>{let[a,s,...o]=i.split(" "),u=Number.parseInt(s,10);return o.forEach((c,d)=>n[c]=u+d),n},{});for(let[n,i]of Object.entries(r)){let a=vh.default.toByteArray(n);this.rankMap.set(a.join(","),i),this.textMap.set(i,a)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[i,a])=>(n[a]=this.textEncoder.encode(i),n),{})}encode(t,e=[],r="all"){let n=new RegExp(this.patStr,"ug"),i=Mu.specialTokenRegex(Object.keys(this.specialTokens)),a=[],s=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(r==="all"?Object.keys(this.specialTokens).filter(c=>!s.has(c)):r);if(o.size>0){let c=Mu.specialTokenRegex([...o]),d=t.match(c);if(d!=null)throw new Error(`The text contains a special token that is not allowed: ${d[0]}`)}let u=0;for(;;){let c=null,d=u;for(;i.lastIndex=d,c=i.exec(t),!(c==null||s.has(c[0]));)d=c.index+1;let p=c?.index??t.length;for(let v of t.substring(u,p).matchAll(n)){let m=this.textEncoder.encode(v[0]),x=this.rankMap.get(m.join(","));if(x!=null){a.push(x);continue}a.push(...Nw(m,this.rankMap))}if(c==null)break;let b=this.specialTokens[c[0]];a.push(b),u=c.index+c[0].length}return a}decode(t){let e=[],r=0;for(let a=0;a<t.length;++a){let s=t[a],o=this.textMap.get(s)??this.inverseSpecialTokens[s];o!=null&&(e.push(o),r+=o.length)}let n=new Uint8Array(r),i=0;for(let a of e)n.set(a,i),i+=a.length;return this.textDecoder.decode(n)}},Ca=Mu;gh(Ca,"specialTokenRegex",t=>new RegExp(t.map(e=>Mw(e)).join("|"),"g"))});var Oh=M(()=>{l();xh();Ru()});async function Du(t,e){return t in Ia||(Ia[t]=Lw.fetch(`https://tiktoken.pages.dev/js/${t}.json`,{signal:e?.signal}).then(r=>r.json()).catch(r=>{throw delete Ia[t],r})),new Ca(await Ia[t],e?.extendedSpecialTokens)}async function Sa(t,e){return Du(Lu(t),e)}var Ia,Lw,ja=M(()=>{l();Oh();Qn();Ia={},Lw=new jt({})});var rn,Dw,qu,Xn=M(()=>{l();ja();rn=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t,Dw=t=>{switch(rn(t)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}},qu=async({prompt:t,modelName:e})=>{let r;try{r=(await Sa(e)).encode(t).length}catch{r=Math.ceil(t.length/4)}return Dw(e)-r}});function Fu(){if(!ka&&(ka=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ka))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ka(qw)}var ka,qw,Ah=M(()=>{l();qw=new Uint8Array(16)});function Ph(t,e=0){return(ke[t[e+0]]+ke[t[e+1]]+ke[t[e+2]]+ke[t[e+3]]+"-"+ke[t[e+4]]+ke[t[e+5]]+"-"+ke[t[e+6]]+ke[t[e+7]]+"-"+ke[t[e+8]]+ke[t[e+9]]+"-"+ke[t[e+10]]+ke[t[e+11]]+ke[t[e+12]]+ke[t[e+13]]+ke[t[e+14]]+ke[t[e+15]]).toLowerCase()}var ke,Eh=M(()=>{l();ke=[];for(let t=0;t<256;++t)ke.push((t+256).toString(16).slice(1))});var Fw,Uu,Th=M(()=>{l();Fw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Uu={randomUUID:Fw}});function Uw(t,e,r){if(Uu.randomUUID&&!e&&!t)return Uu.randomUUID();t=t||{};let n=t.random||(t.rng||Fu)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Ph(n)}var Xe,Ch=M(()=>{l();Th();Ah();Eh();Xe=Uw});var Ra=M(()=>{l();Ch()});var Vu,pr,Bu=M(()=>{l();Ra();or();Vu=class{},pr=class t extends Vu{get lc_namespace(){return["langchain","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:typeof process<"u"?h?.LANGCHAIN_CALLBACKS_BACKGROUND!=="true":!0}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever)}copy(){return new this.constructor(this)}toJSON(){return Ke.prototype.toJSON.call(this)}toJSONNotImplemented(){return Ke.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends t{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Xe()}),Object.assign(this,e)}}return new r}}});var Rh=L((Pj,kh)=>{"use strict";l();var Sh=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,jh=(t=0)=>(e,r,n)=>`\x1B[${38+t};2;${e};${r};${n}m`;function Vw(){let t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[r,n]of Object.entries(e)){for(let[i,a]of Object.entries(n))e[i]={open:`\x1B[${a[0]}m`,close:`\x1B[${a[1]}m`},n[i]=e[i],t.set(a[0],a[1]);Object.defineProperty(e,r,{value:n,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi256=Sh(),e.color.ansi16m=jh(),e.bgColor.ansi256=Sh(10),e.bgColor.ansi16m=jh(10),Object.defineProperties(e,{rgbToAnsi256:{value:(r,n,i)=>r===n&&n===i?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value:r=>{let n=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(r.toString(16));if(!n)return[0,0,0];let{colorString:i}=n.groups;i.length===3&&(i=i.split("").map(s=>s+s).join(""));let a=Number.parseInt(i,16);return[a>>16&255,a>>8&255,a&255]},enumerable:!1},hexToAnsi256:{value:r=>e.rgbToAnsi256(...e.hexToRgb(r)),enumerable:!1}}),e}Object.defineProperty(kh,"exports",{enumerable:!0,get:Vw})});var $t,Na=M(()=>{l();Bu();$t=class extends pr{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,r){e.child_runs.push(r)}_startTrace(e){if(e.parent_run_id!==void 0){let r=this.runMap.get(e.parent_run_id);r&&this._addChildRun(r,e)}this.runMap.set(e.id,e)}async _endTrace(e){let r=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id)}_getExecutionOrder(e){let r=e!==void 0&&this.runMap.get(e);return r?r.child_execution_order+1:1}async handleLLMStart(e,r,n,i,a,s,o){let u=this._getExecutionOrder(i),c=Date.now(),d=o?{...a,metadata:o}:a,p={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:{prompts:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d??{},tags:s||[]};this._startTrace(p),await this.onLLMStart?.(p)}async handleChatModelStart(e,r,n,i,a,s,o){let u=this._getExecutionOrder(i),c=Date.now(),d=o?{...a,metadata:o}:a,p={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:{messages:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d??{},tags:s||[]};this._startTrace(p),await this.onLLMStart?.(p)}async handleLLMEnd(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:n.end_time}),await this.onLLMEnd?.(n),await this._endTrace(n)}async handleLLMError(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await this.onLLMError?.(n),await this._endTrace(n)}async handleChainStart(e,r,n,i,a,s,o){let u=this._getExecutionOrder(i),c=Date.now(),d={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:r,execution_order:u,child_execution_order:u,run_type:o??"chain",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};this._startTrace(d),await this.onChainStart?.(d)}async handleChainEnd(e,r){let n=this.runMap.get(r);if(!n)throw new Error("No chain run to end.");n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:n.end_time}),await this.onChainEnd?.(n),await this._endTrace(n)}async handleChainError(e,r){let n=this.runMap.get(r);if(!n)throw new Error("No chain run to end.");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await this.onChainError?.(n),await this._endTrace(n)}async handleToolStart(e,r,n,i,a,s){let o=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:{input:r},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};this._startTrace(c),await this.onToolStart?.(c)}async handleToolEnd(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:n.end_time}),await this.onToolEnd?.(n),await this._endTrace(n)}async handleToolError(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await this.onToolError?.(n),await this._endTrace(n)}async handleAgentAction(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="chain")return;let i=n;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:Date.now(),kwargs:{action:e}}),await this.onAgentAction?.(n)}async handleAgentEnd(e,r){let n=this.runMap.get(r);!n||n?.run_type!=="chain"||(n.events.push({name:"agent_end",time:Date.now(),kwargs:{action:e}}),await this.onAgentEnd?.(n))}async handleRetrieverStart(e,r,n,i,a,s){let o=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:u}],inputs:{query:r},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};this._startTrace(c),await this.onRetrieverStart?.(c)}async handleRetrieverEnd(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="retriever")throw new Error("No retriever run to end");n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:n.end_time}),await this.onRetrieverEnd?.(n),await this._endTrace(n)}async handleRetrieverError(e,r){let n=this.runMap.get(r);if(!n||n?.run_type!=="retriever")throw new Error("No retriever run to end");n.end_time=Date.now(),n.error=e.message,n.events.push({name:"error",time:n.end_time}),await this.onRetrieverError?.(n),await this._endTrace(n)}async handleText(e,r){let n=this.runMap.get(r);!n||n?.run_type!=="chain"||(n.events.push({name:"text",time:Date.now(),kwargs:{text:e}}),await this.onText?.(n))}async handleLLMNewToken(e,r,n){let i=this.runMap.get(n);!i||i?.run_type!=="llm"||(i.events.push({name:"new_token",time:Date.now(),kwargs:{token:e,idx:r}}),await this.onLLMNewToken?.(i))}}});function Nh(t,e){return`${t.open}${e}${t.close}`}var zu,Bw,ei,Mh=M(()=>{l();zu=be(Rh(),1);Na();({color:Bw}=zu.default),ei=class extends $t{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){let r=[],n=e;for(;n.parent_run_id;){let i=this.runMap.get(n.parent_run_id);if(i)r.push(i),n=i;else break}return r}getBreadcrumbs(e){let n=[...this.getParents(e).reverse(),e].map((i,a,s)=>{let o=`${i.execution_order}:${i.run_type}:${i.name}`;return a===s.length-1?Nh(zu.default.bold,o):o}).join(" > ");return Nh(Bw.grey,n)}onChainStart(e){let r=this.getBreadcrumbs(e)}onChainEnd(e){let r=this.getBreadcrumbs(e)}onChainError(e){let r=this.getBreadcrumbs(e)}onLLMStart(e){let r=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs}onLLMEnd(e){let r=this.getBreadcrumbs(e)}onLLMError(e){let r=this.getBreadcrumbs(e)}onToolStart(e){let r=this.getBreadcrumbs(e)}onToolEnd(e){let r=this.getBreadcrumbs(e)}onToolError(e){let r=this.getBreadcrumbs(e)}onRetrieverStart(e){let r=this.getBreadcrumbs(e)}onRetrieverEnd(e){let r=this.getBreadcrumbs(e)}onRetrieverError(e){let r=this.getBreadcrumbs(e)}onAgentAction(e){let r=e,n=this.getBreadcrumbs(e)}}});var Lh,Ma,zw,La,Dh=M(()=>{l();Lh=be(Eu(),1),Ma=be(Pa(),1),zw=[400,401,403,404,405,406,407,408,409],La=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;let r="default"in Ma.default?Ma.default.default:Ma.default;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>(0,Lh.default)(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||n?.code==="ECONNABORTED")throw n;let i=n?.response?.status;if(i&&zw.includes(+i))throw n},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,a)=>{e.signal?.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}}});async function $u(){return Ku===void 0&&(Ku={library:"langsmith",runtime:Jw()}),Ku}function Da(t){try{return typeof process<"u"?h?.[t]:void 0}catch{return}}var Kw,$w,Zw,qh,Hw,Jw,Ku,Zu=M(()=>{l();Kw=()=>typeof window<"u"&&typeof window.document<"u",$w=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Zw=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),qh=()=>typeof Deno<"u",Hw=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!qh(),Jw=()=>{let t;return Kw()?t="browser":Hw()?t="node":$w()?t="webworker":Zw()?t="jsdom":qh()?t="deno":t="other",t}});async function Yw(t){let e=[];for await(let r of t)e.push(r);return e}function Uh(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}var Fh,ti,nn,Hu=M(()=>{l();Ra();Dh();Zu();Fh=t=>{let r=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"},ti=async(t,e)=>{let r=await t.text();if(!t.ok)throw new Error(`Failed to ${e}: ${t.status} ${t.statusText} ${r}`)};nn=class t{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=t.getDefaultClientConfig();this.apiUrl=Uh(e.apiUrl??r.apiUrl)??"",this.apiKey=Uh(e.apiKey??r.apiKey),this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new La(e.callerOptions??{})}static getDefaultClientConfig(){let e=Da("LANGCHAIN_API_KEY");return{apiUrl:Da("LANGCHAIN_ENDPOINT")??(e?"https://api.smith.langchain.com":"http://localhost:1984"),apiKey:e}}validateApiKeyIfHosted(){if(!Fh(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}getHostUrl(){return Fh(this.apiUrl)?"http://localhost":this.apiUrl.split(".",1)[0].includes("dev")?"https://dev.smith.langchain.com":"https://smith.langchain.com"}get headers(){let e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _get(e,r){let n=r?.toString()??"",i=`${this.apiUrl}${e}?${n}`,a=await this.caller.call(fetch,i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to fetch ${e}: ${a.status} ${a.statusText}`);return a.json()}async*_getPaginated(e,r=new URLSearchParams){let n=Number(r.get("offset"))||0,i=Number(r.get("limit"))||100;for(;;){r.set("offset",String(n)),r.set("limit",String(i));let a=`${this.apiUrl}${e}?${r}`,s=await this.caller.call(fetch,a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`);let o=await s.json();if(o.length===0||(yield o,o.length<i))break;n+=o.length}}async createRun(e){let r={...this.headers,"Content-Type":"application/json"},n=e.extra??{},i=await $u(),a=e.project_name;delete e.project_name;let s={session_name:a,...e,extra:{...e.extra,runtime:{...i,...n.runtime}}},o=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:r,body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)});await ti(o,"create run")}async updateRun(e,r){let n={...this.headers,"Content-Type":"application/json"},i=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});await ti(i,"update run")}async readRun(e,{loadChildRuns:r}={loadChildRuns:!1}){let n=await this._get(`/runs/${e}`);return r&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:e}){let r=await this.readRun(e);return r.app_path?`${this.getHostUrl()}${r.app_path}`:void 0}async _loadChildRuns(e){let r=await Yw(this.listRuns({id:e.child_run_ids})),n={},i={};r.sort((a,s)=>a.execution_order-s.execution_order);for(let a of r){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);a.parent_run_id in n||(n[a.parent_run_id]=[]),n[a.parent_run_id].push(a),i[a.id]=a}e.child_runs=n[e.id]||[];for(let a in n)a!==e.id&&(i[a].child_runs=n[a]);return e}async*listRuns({projectId:e,projectName:r,parentRunId:n,referenceExampleId:i,datasetId:a,startTime:s,endTime:o,executionOrder:u,runType:c,error:d,id:p,limit:b,offset:v,query:m,filter:x,orderBy:T}){let k=new URLSearchParams,S=e;if(r){if(e)throw new Error("Only one of projectId or projectName may be given");S=(await this.readProject({projectName:r})).id}if(S&&k.append("session",S),n&&k.append("parent_run",n),i&&k.append("reference_example",i),a&&k.append("dataset",a),s&&k.append("start_time",s.toISOString()),o&&k.append("end_time",o.toISOString()),u&&k.append("execution_order",u.toString()),c&&k.append("run_type",c),d!==void 0&&k.append("error",d.toString()),p!==void 0)for(let V of p)k.append("id",V);b!==void 0&&k.append("limit",b.toString()),v!==void 0&&k.append("offset",v.toString()),m!==void 0&&k.append("query",m),x!==void 0&&k.append("filter",x),T!==void 0&&T.map(V=>k.append("order_by",V));for await(let V of this._getPaginated("/runs",k))yield*V}async deleteRun(e){let r=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await ti(r,"delete run")}async shareRun(e,{shareId:r}={}){let n={run_id:e,share_token:r||Xe()},a=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)})).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){let r=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await ti(r,"unshare run")}async readRunSharedLink(e){let n=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async createProject({projectName:e,projectExtra:r,upsert:n}){let i=n?"?upsert=true":"",a=`${this.apiUrl}/sessions${i}`,s={name:e};r!==void 0&&(s.extra=r);let o=await this.caller.call(fetch,a,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)}),u=await o.json();if(!o.ok)throw new Error(`Failed to create session ${e}: ${o.status} ${o.statusText}`);return u}async readProject({projectId:e,projectName:r}){let n="/sessions",i=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide projectName or projectId");let a=await this._get(n,i),s;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);s=a[0]}else s=a;return s}async*listProjects(){for await(let e of this._getPaginated("/sessions"))yield*e}async deleteProject({projectId:e,projectName:r}){let n;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:r})).id:n=e;let i=await this.caller.call(fetch,`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await ti(i,`delete session ${n} (${r})`)}async uploadCsv({csvFile:e,fileName:r,inputKeys:n,outputKeys:i,description:a,dataType:s,name:o}){let u=`${this.apiUrl}/datasets/upload`,c=new FormData;c.append("file",e,r),n.forEach(b=>{c.append("input_keys",b)}),i.forEach(b=>{c.append("output_keys",b)}),a&&c.append("description",a),s&&c.append("data_type",s),o&&c.append("name",o);let d=await this.caller.call(fetch,u,{method:"POST",headers:this.headers,body:c,signal:AbortSignal.timeout(this.timeout_ms)});if(!d.ok){let b=await d.json();throw b.detail&&b.detail.includes("already exists")?new Error(`Dataset ${r} already exists`):new Error(`Failed to upload CSV: ${d.status} ${d.statusText}`)}return await d.json()}async createDataset(e,{description:r,dataType:n}={}){let i={name:e,description:r};n&&(i.data_type=n);let a=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok){let o=await a.json();throw o.detail&&o.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${a.status} ${a.statusText}`)}return await a.json()}async readDataset({datasetId:e,datasetName:r}){let n="/datasets",i=new URLSearchParams({limit:"1"});if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide datasetName or datasetId");let a=await this._get(n,i),s;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);s=a[0]}else s=a;return s}async*listDatasets({limit:e=100,offset:r=0}={}){let n="/datasets",i=new URLSearchParams({limit:e.toString(),offset:r.toString()});for await(let a of this._getPaginated(n,i))yield*a}async deleteDataset({datasetId:e,datasetName:r}){let n="/datasets",i=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(i=(await this.readDataset({datasetName:r})).id),i!==void 0)n+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");let a=await this.caller.call(fetch,this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to delete ${n}: ${a.status} ${a.statusText}`);await a.json()}async createExample(e,r,{datasetId:n,datasetName:i,createdAt:a}){let s=n;if(s===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:i})).id);let u={dataset_id:s,inputs:e,outputs:r,created_at:(a||new Date).toISOString()},c=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)});if(!c.ok)throw new Error(`Failed to create example: ${c.status} ${c.statusText}`);return await c.json()}async readExample(e){let r=`/examples/${e}`;return await this._get(r)}async*listExamples({datasetId:e,datasetName:r}={}){let n;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)n=e;else if(r!==void 0)n=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");let i=new URLSearchParams({dataset:n});for await(let a of this._getPaginated("/examples",i))yield*a}async deleteExample(e){let r=`/examples/${e}`,n=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);await n.json()}async updateExample(e,r){let n=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to update example ${e}: ${n.status} ${n.statusText}`);return await n.json()}async evaluateRun(e,r,{sourceInfo:n,loadChildRuns:i}={loadChildRuns:!1}){let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);let s;a.reference_example_id!==null&&a.reference_example_id!==void 0&&(s=await this.readExample(a.reference_example_id));let o=await r.evaluateRun(a,s),u=n??{};return o.evaluatorInfo&&(u={...u,...o.evaluatorInfo}),await this.createFeedback(a.id,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:u,feedbackSourceType:"MODEL"})}async createFeedback(e,r,{score:n,value:i,correction:a,comment:s,sourceInfo:o,feedbackSourceType:u="API"}){let c;if(u==="API")c={type:"api",metadata:o??{}};else if(u==="MODEL")c={type:"model",metadata:o??{}};else throw new Error(`Unknown feedback source type ${u}`);let d={id:Xe(),run_id:e,key:r,score:n,value:i,correction:a,comment:s,feedback_source:c},p=await this.caller.call(fetch,`${this.apiUrl}/feedback`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms)});if(!p.ok)throw new Error(`Failed to create feedback for run ${e}: ${p.status} ${p.statusText}`);return await p.json()}async readFeedback(e){let r=`/feedback/${e}`;return await this._get(r)}async deleteFeedback(e){let r=`/feedback/${e}`,n=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!n.ok)throw new Error(`Failed to delete ${r}: ${n.status} ${n.statusText}`);await n.json()}async*listFeedback({runIds:e}={}){let r=new URLSearchParams;e&&r.append("run",e.join(","));for await(let n of this._getPaginated("/feedback",r))yield*n}}});var Vh=M(()=>{l();Zu();Hu()});var Bh=M(()=>{l();Hu();Vh()});var zh=M(()=>{l();Bh()});var ri,Ju=M(()=>{l();zh();Tt();Na();ri=class extends $t{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{exampleId:r,projectName:n,client:i}=e;this.projectName=n??G("LANGCHAIN_PROJECT")??G("LANGCHAIN_SESSION"),this.exampleId=r,this.client=i??new nn({})}async _convertToCreate(e,r=void 0){return{...e,extra:{...e.extra,runtime:await xd()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:r}}async persistRun(e){}async _persistRunSingle(e){let r=await this._convertToCreate(e,this.exampleId);await this.client.createRun(r)}async _updateRunSingle(e){let r={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events};await this.client.updateRun(e.id,r)}async onRetrieverStart(e){await this._persistRunSingle(e)}async onRetrieverEnd(e){await this._updateRunSingle(e)}async onRetrieverError(e){await this._updateRunSingle(e)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}});function hr(t,e="Human",r="AI"){let n=[];for(let i of t){let a;if(i._getType()==="human")a=e;else if(i._getType()==="ai")a=r;else if(i._getType()==="system")a="System";else if(i._getType()==="function")a="Function";else if(i._getType()==="generic")a=i.role;else throw new Error(`Got unsupported message type: ${i}`);let s=i.name?`${i.name}, `:"";n.push(`${a}: ${s}${i.content}`)}return n.join(`
`)}var an=M(()=>{l()});var qa,Kh=M(()=>{l();an();Tt();Na();qa=class extends $t{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:G("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let e=G("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){let r={start_time:Date.now(),name:e},n=await this.persistSession(r);return this.session=n,n}async loadSession(e){let r=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(r)}async loadDefaultSession(){let e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){let r=this.session??await this.loadDefaultSession(),n=e.serialized,i;if(e.run_type==="llm"){let a=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(o=>hr(o));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,prompts:a,response:e.outputs}}else if(e.run_type==="chain"){let a=await Promise.all(e.child_runs.map(o=>this.convertV2RunToRun(o)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:a.filter(o=>o.type==="llm"),child_chain_runs:a.filter(o=>o.type==="chain"),child_tool_runs:a.filter(o=>o.type==="tool")}}else if(e.run_type==="tool"){let a=await Promise.all(e.child_runs.map(o=>this.convertV2RunToRun(o)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:r.id,tool_input:e.inputs.input,output:e.outputs?.output,action:JSON.stringify(n),child_llm_runs:a.filter(o=>o.type==="llm"),child_chain_runs:a.filter(o=>o.type==="chain"),child_tool_runs:a.filter(o=>o.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return i}async persistRun(e){let r,n;e.run_type!==void 0?n=await this.convertV2RunToRun(e):n=e,n.type==="llm"?r=`${this.endpoint}/llm-runs`:n.type==="chain"?r=`${this.endpoint}/chain-runs`:r=`${this.endpoint}/tool-runs`,(await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(n)})).ok}async persistSession(e){let r=`${this.endpoint}/sessions`,n=await fetch(r,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return n.ok?{id:(await n.json()).id,...e}:{id:1,...e}}async _handleSessionResponse(e){let r=await fetch(e,{method:"GET",headers:this.headers}),n;if(!r.ok)return n={id:1,start_time:Date.now()},this.session=n,n;let i=await r.json();return i.length===0?(n={id:1,start_time:Date.now()},this.session=n,n):([n]=i,this.session=n,n)}}});async function $h(t){let e=new qa;return t?await e.loadSession(t):await e.loadDefaultSession(),e}async function Zh(){return new ri}var Hh=M(()=>{l();Ju();Kh()});function Ww(){let t="default"in Fa.default?Fa.default.default:Fa.default;return new t({autoStart:!0,concurrency:1})}async function Ce(t,e){e===!0?await t():(typeof Yu>"u"&&(Yu=Ww()),Yu.add(t))}var Fa,Yu,Jh=M(()=>{l();Fa=be(Pa(),1)});function Va(t){return t?Array.isArray(t)||"name"in t?{callbacks:t}:t:{}}function Yh(t){return"name"in t?t:pr.fromMethods(t)}var Wu,sn,Gu,Ua,Qu,Xu,ge,on=M(()=>{l();Ra();Bu();Mh();Hh();an();Tt();Ju();Jh();Wu=class{setHandler(e){return this.setHandlers([e])}},sn=class{constructor(e,r,n,i,a,s,o,u){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:u})}async handleText(e){await Promise.all(this.handlers.map(r=>Ce(async()=>{try{await r.handleText?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}},Gu=class extends sn{getChild(e){let r=new ge(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(r=>Ce(async()=>{if(!r.ignoreRetriever)try{await r.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(r=>Ce(async()=>{if(!r.ignoreRetriever)try{await r.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}},Ua=class extends sn{async handleLLMNewToken(e,r={prompt:0,completion:0}){await Promise.all(this.handlers.map(n=>Ce(async()=>{if(!n.ignoreLLM)try{await n.handleLLMNewToken?.(e,r,this.runId,this._parentRunId,this.tags)}catch{}},n.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(r=>Ce(async()=>{if(!r.ignoreLLM)try{await r.handleLLMError?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(r=>Ce(async()=>{if(!r.ignoreLLM)try{await r.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}},Qu=class extends sn{getChild(e){let r=new ge(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleChainError(e){await Promise.all(this.handlers.map(r=>Ce(async()=>{if(!r.ignoreChain)try{await r.handleChainError?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleChainEnd(e){await Promise.all(this.handlers.map(r=>Ce(async()=>{if(!r.ignoreChain)try{await r.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(r=>Ce(async()=>{if(!r.ignoreAgent)try{await r.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(r=>Ce(async()=>{if(!r.ignoreAgent)try{await r.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}},Xu=class extends sn{getChild(e){let r=new ge(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleToolError(e){await Promise.all(this.handlers.map(r=>Ce(async()=>{if(!r.ignoreAgent)try{await r.handleToolError?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(r=>Ce(async()=>{if(!r.ignoreAgent)try{await r.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags)}catch{}},r.awaitHandlers)))}},ge=class t extends Wu{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,r,n=void 0,i=void 0,a=void 0){return Promise.all(r.map(async s=>{let o=Xe();return await Promise.all(this.handlers.map(u=>Ce(async()=>{if(!u.ignoreLLM)try{await u.handleLLMStart?.(e,[s],o,this._parentRunId,a,this.tags,this.metadata)}catch{}},u.awaitHandlers))),new Ua(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,r,n=void 0,i=void 0,a=void 0){return Promise.all(r.map(async s=>{let o=Xe();return await Promise.all(this.handlers.map(u=>Ce(async()=>{if(!u.ignoreLLM)try{if(u.handleChatModelStart)await u.handleChatModelStart?.(e,[s],o,this._parentRunId,a,this.tags,this.metadata);else if(u.handleLLMStart){let c=hr(s);await u.handleLLMStart?.(e,[c],o,this._parentRunId,a,this.tags,this.metadata)}}catch{}},u.awaitHandlers))),new Ua(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,r,n=Xe(),i=void 0){return await Promise.all(this.handlers.map(a=>Ce(async()=>{if(!a.ignoreChain)try{await a.handleChainStart?.(e,r,n,this._parentRunId,this.tags,this.metadata,i)}catch{}},a.awaitHandlers))),new Qu(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,r,n=Xe()){return await Promise.all(this.handlers.map(i=>Ce(async()=>{if(!i.ignoreAgent)try{await i.handleToolStart?.(e,r,n,this._parentRunId,this.tags,this.metadata)}catch{}},i.awaitHandlers))),new Xu(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,r,n=Xe(),i=void 0){return await Promise.all(this.handlers.map(a=>Ce(async()=>{if(!a.ignoreRetriever)try{await a.handleRetrieverStart?.(e,r,n,this._parentRunId,this.tags,this.metadata)}catch{}},a.awaitHandlers))),new Gu(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,r=!0){this.handlers.push(e),r&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(r=>r!==e),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==e)}setHandlers(e,r=!0){this.handlers=[],this.inheritableHandlers=[];for(let n of e)this.addHandler(n,r)}addTags(e,r=!0){this.removeTags(e),this.tags.push(...e),r&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(r=>!e.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!e.includes(r))}addMetadata(e,r=!0){this.metadata={...this.metadata,...e},r&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(let r of Object.keys(e))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(e=[],r=!0){let n=new t(this._parentRunId);for(let i of this.handlers){let a=this.inheritableHandlers.includes(i);n.addHandler(i,a)}for(let i of this.tags){let a=this.inheritableTags.includes(i);n.addTags([i],a)}for(let i of Object.keys(this.metadata)){let a=Object.keys(this.inheritableMetadata).includes(i);n.addMetadata({[i]:this.metadata[i]},a)}for(let i of e)n.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===i.name)||n.addHandler(i,r);return n}static fromHandlers(e){class r extends pr{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Xe()}),Object.assign(this,e)}}let n=new this;return n.addHandler(new r),n}static async configure(e,r,n,i,a,s,o){let u;(e||r)&&(Array.isArray(e)||!e?(u=new t,u.setHandlers(e?.map(Yh)??[],!0)):u=e,u=u.copy(Array.isArray(r)?r.map(Yh):r?.handlers,!1));let c=G("LANGCHAIN_VERBOSE")||o?.verbose,d=G("LANGCHAIN_TRACING_V2")??!1,p=d||(G("LANGCHAIN_TRACING")??!1);if(c||p){if(u||(u=new t),c&&!u.handlers.some(b=>b.name===ei.prototype.name)){let b=new ei;u.addHandler(b,!0)}if(p&&!u.handlers.some(b=>b.name==="langchain_tracer"))if(d)u.addHandler(await Zh(),!0);else{let b=G("LANGCHAIN_PROJECT")&&G("LANGCHAIN_SESSION");u.addHandler(await $h(b),!0)}}return(n||i)&&u&&(u.addTags(n??[]),u.addTags(i??[],!1)),(a||s)&&u&&(u.addMetadata(a??{}),u.addMetadata(s??{},!1)),u}}});function un(t,e=!1){if(t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();let r=t.getReader();return{async next(){try{let n=await r.read();return n.done&&r.releaseLock(),n}catch(n){throw r.releaseLock(),n}},async return(){if(e)r.releaseLock();else{let n=r.cancel();r.releaseLock(),await n}return{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var Ba,ni=M(()=>{l();Ba=class t extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{let e=await this.reader.read();return e.done&&this.reader.releaseLock(),e}catch(e){throw this.reader.releaseLock(),e}}async return(){this.ensureReader();let e=this.reader.cancel();return this.reader.releaseLock(),await e,{done:!0,value:void 0}}[Symbol.asyncIterator](){return this}static fromReadableStream(e){let r=e.getReader();return new t({start(n){return i();function i(){return r.read().then(({done:a,value:s})=>{if(a){n.close();return}return n.enqueue(s),i()})}}})}static fromAsyncGenerator(e){return new t({async pull(r){let{value:n,done:i}=await e.next();i?r.close():n&&r.enqueue(n)}})}}});function wt(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function fr(t){if(typeof t=="function")return new rl({func:t});if(Ie.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){let e={};for(let[r,n]of Object.entries(t))e[r]=fr(n);return new tl({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var Ie,el,tl,rl,nl,ln=M(()=>{l();on();or();ni();Ie=class extends Ke{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}bind(e){return new nl({bound:this,kwargs:e})}_getOptionsList(e,r=0){if(Array.isArray(e)){if(e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);return e}return Array.from({length:r},()=>e)}async batch(e,r,n){let i=this._getOptionsList(r??{},e.length),a=n?.maxConcurrency&&n.maxConcurrency>0?n?.maxConcurrency:e.length,s=[];for(let o=0;o<e.length;o+=a){let u=e.slice(o,o+a).map((d,p)=>this.invoke(d,i[p])),c=await Promise.all(u);s.push(c)}return s.flat()}async*_streamIterator(e,r){yield this.invoke(e,r)}async stream(e,r){return Ba.fromAsyncGenerator(this._streamIterator(e,r))}_separateRunnableConfigFromCallOptions(e={}){let r={callbacks:e.callbacks,tags:e.tags,metadata:e.metadata},n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,[r,n]}async _callWithConfig(e,r,n){let a=await(await ge.configure(n?.callbacks,void 0,n?.tags,void 0,n?.metadata))?.handleChainStart(this.toJSON(),wt(r,"input"),void 0,n?.runType),s;try{s=await e.bind(this)(r)}catch(o){throw await a?.handleChainError(o),o}return await a?.handleChainEnd(wt(s,"output")),s}async*_streamWithConfig(e,r){let i=await(await ge.configure(r?.callbacks,void 0,r?.tags,void 0,r?.metadata))?.handleChainStart(this.toJSON(),wt("<streamed value>","input"),void 0,r?.runType),a,s=!0;try{for await(let o of e)if(yield o,s)if(a===void 0)a=o;else try{a=a.concat(o)}catch{a=void 0,s=!1}}catch(o){throw await i?.handleChainError(o),o}await i?.handleChainEnd(wt(a,"output"))}_patchConfig(e={},r=void 0){return{...e,callbacks:r}}pipe(e){return new el({first:this,last:fr(e)})}static isRunnable(e){return e.lc_runnable}},el=class t extends Ie{constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,r){let i=await(await ge.configure(r?.callbacks,void 0,r?.tags,void 0,r?.metadata))?.handleChainStart(this.toJSON(),wt(e,"input")),a=e,s;try{for(let o of[this.first,...this.middle])a=await o.invoke(a,this._patchConfig(r,i?.getChild()));s=await this.last.invoke(a,this._patchConfig(r,i?.getChild()))}catch(o){throw await i?.handleChainError(o),o}return await i?.handleChainEnd(wt(s,"output")),s}async batch(e,r,n){let i=this._getOptionsList(r??{},e.length),a=await Promise.all(i.map(c=>ge.configure(c?.callbacks,void 0,c?.tags,void 0,c?.metadata))),s=await Promise.all(a.map((c,d)=>c?.handleChainStart(this.toJSON(),wt(e[d],"input")))),o=e,u;try{for(let c=0;c<[this.first,...this.middle].length;c+=1)o=await this.steps[c].batch(o,s.map(p=>this._patchConfig(i[c],p?.getChild()),n));u=await this.last.batch(o,s.map(c=>this._patchConfig(i[this.steps.length-1],c?.getChild()),n))}catch(c){throw await Promise.all(s.map(d=>d?.handleChainError(c))),c}return await Promise.all(s.map((c,d)=>c?.handleChainEnd(wt(u[d],"output")))),u}async*_streamIterator(e,r){let i=await(await ge.configure(r?.callbacks,void 0,r?.tags,void 0,r?.metadata))?.handleChainStart(this.toJSON(),wt(e,"input")),a=e,s=[this.first,...this.middle,this.last],o=s.length-[...s].reverse().findIndex(d=>typeof d.transform!="function")-1;try{for(let d of s.slice(0,o))a=await d.invoke(a,this._patchConfig(r,i?.getChild()))}catch(d){throw await i?.handleChainError(d),d}let u=!0,c;try{let d=await s[o]._streamIterator(a,this._patchConfig(r,i?.getChild()));for(let p of s.slice(o+1))d=await p.transform(d,this._patchConfig(r,i?.getChild()));for await(let p of d)if(yield p,u)if(c===void 0)c=p;else try{c=c.concat(p)}catch{c=void 0,u=!1}}catch(d){throw await i?.handleChainError(d),d}await i?.handleChainEnd(wt(c,"output"))}pipe(e){return t.isRunnableSequence(e)?new t({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last}):new t({first:this.first,middle:[...this.middle,this.last],last:fr(e)})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Ie.isRunnable(e)}static from([e,...r]){return new t({first:fr(e),middle:r.slice(0,-1).map(fr),last:fr(r[r.length-1])})}},tl=class extends Ie{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(let[r,n]of Object.entries(e.steps))this.steps[r]=fr(n)}async invoke(e,r){let i=await(await ge.configure(r?.callbacks,void 0,r?.tags,void 0,r?.metadata))?.handleChainStart(this.toJSON(),{input:e}),a={};try{for(let[s,o]of Object.entries(this.steps)){let u=await o.invoke(e,this._patchConfig(r,i?.getChild()));a[s]=u}}catch(s){throw await i?.handleChainError(s),s}return await i?.handleChainEnd(a),a}},rl=class extends Ie{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}async invoke(e,r){return this._callWithConfig(async n=>this.func(n),e,r)}};nl=class t extends Ie{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs}bind(e){return new t({bound:this.bound,kwargs:{...this.kwargs,...e}})}async invoke(e,r){return this.bound.invoke(e,{...r,...this.kwargs})}async batch(e,r,n){let i=Array.isArray(r)?r.map(a=>({...a,...this.kwargs})):{...r,...this.kwargs};return this.bound.batch(e,i,n)}async stream(e,r){return this.bound.stream(e,{...r,...this.kwargs})}}});var Wh,al,il,Gw,cn,sl,ii,dn=M(()=>{l();Wh=t=>{let e=t.split(""),r=[],n=(a,s)=>{for(let o=s;o<e.length;o+=1)if(a.includes(e[o]))return o;return-1},i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")r.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")r.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){let a=n("}",i);if(a<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:e.slice(i+1,a).join("")}),i=a+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{let a=n("{}",i),s=(a<0?e.slice(i):e.slice(i,a)).join("");r.push({type:"literal",text:s}),i=a<0?e.length:a}}return r},al=(t,e)=>Wh(t).reduce((r,n)=>{if(n.type==="variable"){if(n.name in e)return r+e[n.name];throw new Error(`Missing value for input ${n.name}`)}return r+n.text},""),il={"f-string":al,jinja2:(t,e)=>""},Gw={"f-string":Wh,jinja2:t=>[]},cn=(t,e,r)=>il[e](t,r),sl=(t,e)=>Gw[e](t),ii=(t,e,r)=>{if(!(e in il)){let n=Object.keys(il);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{let n=r.reduce((i,a)=>(i[a]="foo",i),{});cn(t,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}}});var ol={};ut(ol,{PromptTemplate:()=>ae});var ae,ve=M(()=>{l();_t();dn();ae=class t extends mr{constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),ii(this.template,this.templateFormat,r)}}_getPromptType(){return"prompt"}async format(e){let r=await this.mergePartialAndUserVariables(e);return cn(this.template,this.templateFormat,r)}static fromExamples(e,r,n,i=`

`,a=""){let s=[a,...e,r].join(i);return new t({inputVariables:n,template:s})}static fromTemplate(e,{templateFormat:r="f-string",...n}={}){let i=new Set;return sl(e,r).forEach(a=>{a.type==="variable"&&i.add(a.name)}),new t({inputVariables:[...i],templateFormat:r,template:e,...n})}async partial(e){let r={...this};return r.inputVariables=this.inputVariables.filter(n=>!(n in e)),r.partialVariables={...this.partialVariables??{},...e},new t(r)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new t({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}});var Gh={};ut(Gh,{FewShotPromptTemplate:()=>ai});var ai,za=M(()=>{l();_t();dn();ve();ai=class t extends mr{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),ii(this.prefix+this.suffix,this.templateFormat,r)}}_getPromptType(){return"few_shot"}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(e){let r={...this};return r.inputVariables=this.inputVariables.filter(n=>!(n in e)),r.partialVariables={...this.partialVariables??{},...e},new t(r)}async format(e){let r=await this.mergePartialAndUserVariables(e),n=await this.getExamples(r),i=await Promise.all(n.map(s=>this.examplePrompt.format(s))),a=[this.prefix,...i,this.suffix].join(this.exampleSeparator);return cn(a,this.templateFormat,r)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(e){let{example_prompt:r}=e;if(!r)throw new Error("Missing example prompt");let n=await ae.deserialize(r),i;if(Array.isArray(e.examples))i=e.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new t({inputVariables:e.input_variables,examplePrompt:n,examples:i,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})}}});var pn,kt,mr,_t=M(()=>{l();rt();or();ln();pn=class extends en{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","base"]}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new ct(this.value)]}},kt=class extends Ie{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:{}});let{inputVariables:r}=e;if(r.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){let r=this.partialVariables??{},n={};for(let[a,s]of Object.entries(r))typeof s=="string"?n[a]=s:n[a]=await s();return{...n,...e}}async invoke(e,r){return this._callWithConfig(n=>this.formatPromptValue(n),e,{...r,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{let{PromptTemplate:r}=await Promise.resolve().then(()=>(ve(),ol));return r.deserialize(e)}case void 0:{let{PromptTemplate:r}=await Promise.resolve().then(()=>(ve(),ol));return r.deserialize({...e,_type:"prompt"})}case"few_shot":{let{FewShotPromptTemplate:r}=await Promise.resolve().then(()=>(za(),Gh));return r.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}},mr=class extends kt{async formatPromptValue(e){let r=await this.format(e);return new pn(r)}}});var ul,si,oi,Ka,dt,ui,Zt,pt,yr=M(()=>{l();rt();or();_t();ve();ul=class extends Ke{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}},si=class extends en{constructor(e){Array.isArray(e)&&(e={messages:e}),super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}},oi=class extends ul{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}},Ka=class extends kt{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){let r=await this.formatMessages(e);return new si(r)}},dt=class extends oi{async format(e){return new ct(await this.prompt.format(e))}static fromTemplate(e){return new this(ae.fromTemplate(e))}},ui=class extends oi{async format(e){return new gt(await this.prompt.format(e))}static fromTemplate(e){return new this(ae.fromTemplate(e))}},Zt=class extends oi{async format(e){return new Qr(await this.prompt.format(e))}static fromTemplate(e){return new this(ae.fromTemplate(e))}},pt=class t extends Ka{get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let r=new Set;for(let s of this.promptMessages)for(let o of s.inputVariables)r.add(o);let n=new Set(this.partialVariables?this.inputVariables.concat(Object.keys(this.partialVariables)):this.inputVariables),i=new Set([...n].filter(s=>!r.has(s)));if(i.size>0)throw new Error(`Input variables \`${[...i]}\` are not used in any of the prompt messages.`);let a=new Set([...r].filter(s=>!n.has(s)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async formatMessages(e){let r=await this.mergePartialAndUserVariables(e),n=[];for(let i of this.promptMessages){let a=i.inputVariables.reduce((o,u)=>{if(!(u in r))throw new Error(`Missing value for input variable \`${u}\``);return o[u]=r[u],o},{}),s=await i.formatMessages(a);n=n.concat(s)}return n}async partial(e){let r={...this};return r.inputVariables=this.inputVariables.filter(n=>!(n in e)),r.partialVariables={...this.partialVariables??{},...e},new t(r)}static fromPromptMessages(e){let r=e.reduce((a,s)=>a.concat(s instanceof t?s.promptMessages:[s]),[]),n=e.reduce((a,s)=>s instanceof t?Object.assign(a,s.partialVariables):a,Object.create(null)),i=new Set;for(let a of r)for(let s of a.inputVariables)s in n||i.add(s);return new t({inputVariables:[...i],promptMessages:r,partialVariables:n})}}});var $a,Qh=M(()=>{l();rt();li();on();$a=class t extends Ht{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){let[r,n]=super._separateRunnableConfigFromCallOptions(e);return n?.timeout&&!n.signal&&(n.signal=AbortSignal.timeout(n.timeout)),[r,n]}async invoke(e,r){let n=t._convertInputToPromptValue(e);return(await this.generatePrompt([n],r,r?.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,r,n){throw new Error("Not implemented.")}async*_streamIterator(e,r){if(this._streamResponseChunks===t.prototype._streamResponseChunks)yield this.invoke(e,r);else{let i=t._convertInputToPromptValue(e).toChatMessages(),[a,s]=this._separateRunnableConfigFromCallOptions(r),o=await ge.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),u={options:s,invocation_params:this?.invocationParams(s)},c=await o?.handleChatModelStart(this.toJSON(),[i],void 0,void 0,u),d;try{for await(let p of this._streamResponseChunks(i,s,c?.[0]))yield p.message,d?d=d.concat(p):d=p}catch(p){throw await Promise.all((c??[]).map(b=>b?.handleLLMError(p))),p}await Promise.all((c??[]).map(p=>p?.handleLLMEnd({generations:[[d]]})))}}async generate(e,r,n){let i;Array.isArray(r)?i={stop:r}:i=r;let[a,s]=this._separateRunnableConfigFromCallOptions(i),o=await ge.configure(a.callbacks??n,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),u={options:s,invocation_params:this?.invocationParams(i)},c=await o?.handleChatModelStart(this.toJSON(),e,void 0,void 0,u),d=await Promise.allSettled(e.map((m,x)=>this._generate(m,{...s,promptIndex:x},c?.[x]))),p=[],b=[];await Promise.all(d.map(async(m,x)=>{if(m.status==="fulfilled"){let T=m.value;return p[x]=T.generations,b[x]=T.llmOutput,c?.[x]?.handleLLMEnd({generations:[T.generations],llmOutput:T.llmOutput})}else return await c?.[x]?.handleLLMError(m.reason),Promise.reject(m.reason)}));let v={generations:p,llmOutput:b.length?this._combineLLMOutput?.(...b):void 0};return Object.defineProperty(v,tn,{value:c?{runIds:c?.map(m=>m.runId)}:void 0,configurable:!0}),v}invocationParams(e){return{}}_modelType(){return"base_chat_model"}async generatePrompt(e,r,n){let i=e.map(a=>a.toChatMessages());return this.generate(i,r,n)}async call(e,r,n){return(await this.generate([e],r,n)).generations[0][0].message}async callPrompt(e,r,n){let i=e.toChatMessages();return this.call(i,r,n)}async predictMessages(e,r,n){return this.call(e,r,n)}async predict(e,r,n){let i=new ct(e);return(await this.call([i],r,n)).content}}});var hn,Za=M(()=>{l();hn=async(t,e,r,n,i,a,s,o,u)=>(await t.call(fetch,"https://api.promptlayer.com/track-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({function_name:e,provider:"langchain",args:r,kwargs:n,tags:i,request_response:a,request_start_time:Math.floor(s/1e3),request_end_time:Math.floor(o/1e3),api_key:u})})).json()});var ci=L(de=>{"use strict";l();Object.defineProperty(de,"__esModule",{value:!0});de.getParsedType=de.ZodParsedType=de.objectUtil=de.util=void 0;var Xh;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let a={};for(let s of i)a[s]=s;return a},t.getValidEnumValues=i=>{let a=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),s={};for(let o of a)s[o]=i[o];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let a=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&a.push(s);return a},t.find=(i,a)=>{for(let s of i)if(a(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Xh=de.util||(de.util={}));var Qw;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Qw=de.objectUtil||(de.objectUtil={}));de.ZodParsedType=Xh.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);var Xw=t=>{switch(typeof t){case"undefined":return de.ZodParsedType.undefined;case"string":return de.ZodParsedType.string;case"number":return isNaN(t)?de.ZodParsedType.nan:de.ZodParsedType.number;case"boolean":return de.ZodParsedType.boolean;case"function":return de.ZodParsedType.function;case"bigint":return de.ZodParsedType.bigint;case"symbol":return de.ZodParsedType.symbol;case"object":return Array.isArray(t)?de.ZodParsedType.array:t===null?de.ZodParsedType.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?de.ZodParsedType.promise:typeof Map<"u"&&t instanceof Map?de.ZodParsedType.map:typeof Set<"u"&&t instanceof Set?de.ZodParsedType.set:typeof Date<"u"&&t instanceof Date?de.ZodParsedType.date:de.ZodParsedType.object;default:return de.ZodParsedType.unknown}};de.getParsedType=Xw});var Ha=L(Jt=>{"use strict";l();Object.defineProperty(Jt,"__esModule",{value:!0});Jt.ZodError=Jt.quotelessJson=Jt.ZodIssueCode=void 0;var ef=ci();Jt.ZodIssueCode=ef.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var e_=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");Jt.quotelessJson=e_;var di=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(let s of a.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let o=n,u=0;for(;u<s.path.length;){let c=s.path[u];u===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(r(s))):o[c]=o[c]||{_errors:[]},o=o[c],u++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,ef.util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Jt.ZodError=di;di.create=t=>new di(t)});var cl=L(ll=>{"use strict";l();Object.defineProperty(ll,"__esModule",{value:!0});var gr=ci(),De=Ha(),t_=(t,e)=>{let r;switch(t.code){case De.ZodIssueCode.invalid_type:t.received===gr.ZodParsedType.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case De.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,gr.util.jsonStringifyReplacer)}`;break;case De.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${gr.util.joinValues(t.keys,", ")}`;break;case De.ZodIssueCode.invalid_union:r="Invalid input";break;case De.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${gr.util.joinValues(t.options)}`;break;case De.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${gr.util.joinValues(t.options)}, received '${t.received}'`;break;case De.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case De.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case De.ZodIssueCode.invalid_date:r="Invalid date";break;case De.ZodIssueCode.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:gr.util.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case De.ZodIssueCode.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case De.ZodIssueCode.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case De.ZodIssueCode.custom:r="Invalid input";break;case De.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case De.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case De.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=e.defaultError,gr.util.assertNever(t)}return{message:r}};ll.default=t_});var Ja=L(vt=>{"use strict";l();var r_=vt&&vt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vt,"__esModule",{value:!0});vt.getErrorMap=vt.setErrorMap=vt.defaultErrorMap=void 0;var tf=r_(cl());vt.defaultErrorMap=tf.default;var rf=tf.default;function n_(t){rf=t}vt.setErrorMap=n_;function i_(){return rf}vt.getErrorMap=i_});var pl=L(oe=>{"use strict";l();var a_=oe&&oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oe,"__esModule",{value:!0});oe.isAsync=oe.isValid=oe.isDirty=oe.isAborted=oe.OK=oe.DIRTY=oe.INVALID=oe.ParseStatus=oe.addIssueToContext=oe.EMPTY_PATH=oe.makeIssue=void 0;var s_=Ja(),o_=a_(cl()),u_=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],s={...i,path:a},o="",u=n.filter(c=>!!c).slice().reverse();for(let c of u)o=c(s,{data:e,defaultError:o}).message;return{...i,path:a,message:i.message||o}};oe.makeIssue=u_;oe.EMPTY_PATH=[];function l_(t,e){let r=(0,oe.makeIssue)({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,s_.getErrorMap)(),o_.default].filter(n=>!!n)});t.common.issues.push(r)}oe.addIssueToContext=l_;var dl=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return oe.INVALID;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r)n.push({key:await i.key,value:await i.value});return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:a,value:s}=i;if(a.status==="aborted"||s.status==="aborted")return oe.INVALID;a.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[a.value]=s.value)}return{status:e.value,value:n}}};oe.ParseStatus=dl;oe.INVALID=Object.freeze({status:"aborted"});var c_=t=>({status:"dirty",value:t});oe.DIRTY=c_;var d_=t=>({status:"valid",value:t});oe.OK=d_;var p_=t=>t.status==="aborted";oe.isAborted=p_;var h_=t=>t.status==="dirty";oe.isDirty=h_;var f_=t=>t.status==="valid";oe.isValid=f_;var m_=t=>typeof Promise<"u"&&t instanceof Promise;oe.isAsync=m_});var af=L(nf=>{"use strict";l();Object.defineProperty(nf,"__esModule",{value:!0})});var sf=L(pi=>{"use strict";l();Object.defineProperty(pi,"__esModule",{value:!0});pi.errorUtil=void 0;var y_;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(y_=pi.errorUtil||(pi.errorUtil={}))});var hf=L(P=>{"use strict";l();Object.defineProperty(P,"__esModule",{value:!0});P.date=P.boolean=P.bigint=P.array=P.any=P.coerce=P.ZodFirstPartyTypeKind=P.late=P.ZodSchema=P.Schema=P.custom=P.ZodReadonly=P.ZodPipeline=P.ZodBranded=P.BRAND=P.ZodNaN=P.ZodCatch=P.ZodDefault=P.ZodNullable=P.ZodOptional=P.ZodTransformer=P.ZodEffects=P.ZodPromise=P.ZodNativeEnum=P.ZodEnum=P.ZodLiteral=P.ZodLazy=P.ZodFunction=P.ZodSet=P.ZodMap=P.ZodRecord=P.ZodTuple=P.ZodIntersection=P.ZodDiscriminatedUnion=P.ZodUnion=P.ZodObject=P.ZodArray=P.ZodVoid=P.ZodNever=P.ZodUnknown=P.ZodAny=P.ZodNull=P.ZodUndefined=P.ZodSymbol=P.ZodDate=P.ZodBoolean=P.ZodBigInt=P.ZodNumber=P.ZodString=P.ZodType=void 0;P.NEVER=P.void=P.unknown=P.union=P.undefined=P.tuple=P.transformer=P.symbol=P.string=P.strictObject=P.set=P.record=P.promise=P.preprocess=P.pipeline=P.ostring=P.optional=P.onumber=P.oboolean=P.object=P.number=P.nullable=P.null=P.never=P.nativeEnum=P.nan=P.map=P.literal=P.lazy=P.intersection=P.instanceof=P.function=P.enum=P.effect=P.discriminatedUnion=void 0;var Ya=Ja(),H=sf(),I=pl(),U=ci(),F=Ha(),at=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},of=(t,e)=>{if((0,I.isValid)(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new F.ZodError(t.common.issues);return this._error=r,this._error}}};function X(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,o)=>s.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:n??o.defaultError}:{message:r??o.defaultError},description:i}}var ee=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return(0,U.getParsedType)(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:(0,U.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new I.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,U.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if((0,I.isAsync)(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,U.getParsedType)(e)},a=this._parseSync({data:e,path:i.path,parent:i});return of(i,a)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,U.getParsedType)(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await((0,I.isAsync)(i)?i:Promise.resolve(i));return of(n,a)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{let s=e(i),o=()=>a.addIssue({code:F.ZodIssueCode.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new et({schema:this,typeName:Y.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ht.create(this,this._def)}nullable(){return Mt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Nt.create(this,this._def)}promise(){return Gt.create(this,this._def)}or(e){return Ar.create([this,e],this._def)}and(e){return Pr.create(this,e,this._def)}transform(e){return new et({...X(this._def),schema:this,typeName:Y.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Sr({...X(this._def),innerType:this,defaultValue:r,typeName:Y.ZodDefault})}brand(){return new es({typeName:Y.ZodBranded,type:this,...X(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new wn({...X(this._def),innerType:this,catchValue:r,typeName:Y.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return hi.create(this,e)}readonly(){return vn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};P.ZodType=ee;P.Schema=ee;P.ZodSchema=ee;var g_=/^c[^\s-]{8,}$/i,b_=/^[a-z][a-z0-9]*$/,w_=/[0-9A-HJKMNP-TV-Z]{26}/,__=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,v_=/^([A-Z0-9_+-]+\.?)*[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,x_=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,O_=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,A_=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,P_=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function E_(t,e){return!!((e==="v4"||!e)&&O_.test(t)||(e==="v6"||!e)&&A_.test(t))}var Yt=class t extends ee{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(i=>e.test(i),{validation:r,code:F.ZodIssueCode.invalid_string,...H.errorUtil.errToObj(n)}),this.nonempty=e=>this.min(1,H.errorUtil.errToObj(e)),this.trim=()=>new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==U.ZodParsedType.string){let a=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(a,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.string,received:a.parsedType}),I.INVALID}let n=new I.ParseStatus,i;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{code:F.ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{code:F.ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){let s=e.data.length>a.value,o=e.data.length<a.value;(s||o)&&(i=this._getOrReturnCtx(e,i),s?(0,I.addIssueToContext)(i,{code:F.ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&(0,I.addIssueToContext)(i,{code:F.ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")v_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{validation:"email",code:F.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")x_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{validation:"emoji",code:F.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")__.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{validation:"uuid",code:F.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")g_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{validation:"cuid",code:F.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")b_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{validation:"cuid2",code:F.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")w_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{validation:"ulid",code:F.ZodIssueCode.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{validation:"url",code:F.ZodIssueCode.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{validation:"regex",code:F.ZodIssueCode.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{code:F.ZodIssueCode.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{code:F.ZodIssueCode.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{code:F.ZodIssueCode.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?P_(a).test(e.data)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{code:F.ZodIssueCode.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="ip"?E_(e.data,a.version)||(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{validation:"ip",code:F.ZodIssueCode.invalid_string,message:a.message}),n.dirty()):U.util.assertNever(a);return{status:n.value,value:e.data}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...H.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...H.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...H.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...H.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...H.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...H.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...H.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...H.errorUtil.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...H.errorUtil.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...H.errorUtil.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...H.errorUtil.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...H.errorUtil.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...H.errorUtil.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...H.errorUtil.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...H.errorUtil.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...H.errorUtil.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};P.ZodString=Yt;Yt.create=t=>{var e;return new Yt({checks:[],typeName:Y.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...X(t)})};function T_(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return a%s/Math.pow(10,i)}var br=class t extends ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==U.ZodParsedType.number){let a=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(a,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.number,received:a.parsedType}),I.INVALID}let n,i=new I.ParseStatus;for(let a of this._def.checks)a.kind==="int"?U.util.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?T_(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.not_finite,message:a.message}),i.dirty()):U.util.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,H.errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,H.errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,H.errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,H.errorUtil.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:H.errorUtil.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:H.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:H.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:H.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:H.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:H.errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:H.errorUtil.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:H.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:H.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:H.errorUtil.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&U.util.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};P.ZodNumber=br;br.create=t=>new br({checks:[],typeName:Y.ZodNumber,coerce:t?.coerce||!1,...X(t)});var wr=class t extends ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==U.ZodParsedType.bigint){let a=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(a,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.bigint,received:a.parsedType}),I.INVALID}let n,i=new I.ParseStatus;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):U.util.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,H.errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,H.errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,H.errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,H.errorUtil.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:H.errorUtil.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:H.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:H.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:H.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:H.errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:H.errorUtil.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};P.ZodBigInt=wr;wr.create=t=>{var e;return new wr({checks:[],typeName:Y.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...X(t)})};var _r=class extends ee{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==U.ZodParsedType.boolean){let n=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.boolean,received:n.parsedType}),I.INVALID}return(0,I.OK)(e.data)}};P.ZodBoolean=_r;_r.create=t=>new _r({typeName:Y.ZodBoolean,coerce:t?.coerce||!1,...X(t)});var vr=class t extends ee{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==U.ZodParsedType.date){let a=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(a,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.date,received:a.parsedType}),I.INVALID}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(a,{code:F.ZodIssueCode.invalid_date}),I.INVALID}let n=new I.ParseStatus,i;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{code:F.ZodIssueCode.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),(0,I.addIssueToContext)(i,{code:F.ZodIssueCode.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):U.util.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:H.errorUtil.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:H.errorUtil.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};P.ZodDate=vr;vr.create=t=>new vr({checks:[],coerce:t?.coerce||!1,typeName:Y.ZodDate,...X(t)});var mn=class extends ee{_parse(e){if(this._getType(e)!==U.ZodParsedType.symbol){let n=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.symbol,received:n.parsedType}),I.INVALID}return(0,I.OK)(e.data)}};P.ZodSymbol=mn;mn.create=t=>new mn({typeName:Y.ZodSymbol,...X(t)});var xr=class extends ee{_parse(e){if(this._getType(e)!==U.ZodParsedType.undefined){let n=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.undefined,received:n.parsedType}),I.INVALID}return(0,I.OK)(e.data)}};P.ZodUndefined=xr;xr.create=t=>new xr({typeName:Y.ZodUndefined,...X(t)});var Or=class extends ee{_parse(e){if(this._getType(e)!==U.ZodParsedType.null){let n=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.null,received:n.parsedType}),I.INVALID}return(0,I.OK)(e.data)}};P.ZodNull=Or;Or.create=t=>new Or({typeName:Y.ZodNull,...X(t)});var Wt=class extends ee{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,I.OK)(e.data)}};P.ZodAny=Wt;Wt.create=t=>new Wt({typeName:Y.ZodAny,...X(t)});var Rt=class extends ee{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,I.OK)(e.data)}};P.ZodUnknown=Rt;Rt.create=t=>new Rt({typeName:Y.ZodUnknown,...X(t)});var ft=class extends ee{_parse(e){let r=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(r,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.never,received:r.parsedType}),I.INVALID}};P.ZodNever=ft;ft.create=t=>new ft({typeName:Y.ZodNever,...X(t)});var yn=class extends ee{_parse(e){if(this._getType(e)!==U.ZodParsedType.undefined){let n=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.void,received:n.parsedType}),I.INVALID}return(0,I.OK)(e.data)}};P.ZodVoid=yn;yn.create=t=>new yn({typeName:Y.ZodVoid,...X(t)});var Nt=class t extends ee{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==U.ZodParsedType.array)return(0,I.addIssueToContext)(r,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.array,received:r.parsedType}),I.INVALID;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(s||o)&&((0,I.addIssueToContext)(r,{code:s?F.ZodIssueCode.too_big:F.ZodIssueCode.too_small,minimum:o?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&((0,I.addIssueToContext)(r,{code:F.ZodIssueCode.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&((0,I.addIssueToContext)(r,{code:F.ZodIssueCode.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,o)=>i.type._parseAsync(new at(r,s,r.path,o)))).then(s=>I.ParseStatus.mergeArray(n,s));let a=[...r.data].map((s,o)=>i.type._parseSync(new at(r,s,r.path,o)));return I.ParseStatus.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:H.errorUtil.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:H.errorUtil.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:H.errorUtil.toString(r)}})}nonempty(e){return this.min(1,e)}};P.ZodArray=Nt;Nt.create=(t,e)=>new Nt({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Y.ZodArray,...X(e)});function fn(t){if(t instanceof Je){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=ht.create(fn(n))}return new Je({...t._def,shape:()=>e})}else return t instanceof Nt?new Nt({...t._def,type:fn(t.element)}):t instanceof ht?ht.create(fn(t.unwrap())):t instanceof Mt?Mt.create(fn(t.unwrap())):t instanceof xt?xt.create(t.items.map(e=>fn(e))):t}var Je=class t extends ee{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=U.util.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==U.ZodParsedType.object){let c=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(c,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.object,received:c.parsedType}),I.INVALID}let{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof ft&&this._def.unknownKeys==="strip"))for(let c in i.data)s.includes(c)||o.push(c);let u=[];for(let c of s){let d=a[c],p=i.data[c];u.push({key:{status:"valid",value:c},value:d._parse(new at(i,p,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof ft){let c=this._def.unknownKeys;if(c==="passthrough")for(let d of o)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(c==="strict")o.length>0&&((0,I.addIssueToContext)(i,{code:F.ZodIssueCode.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let d of o){let p=i.data[d];u.push({key:{status:"valid",value:d},value:c._parse(new at(i,p,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let c=[];for(let d of u){let p=await d.key;c.push({key:p,value:await d.value,alwaysSet:d.alwaysSet})}return c}).then(c=>I.ParseStatus.mergeObjectSync(n,c)):I.ParseStatus.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return H.errorUtil.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a,s,o;let u=(s=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=H.errorUtil.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Y.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return U.util.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return U.util.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return fn(this)}partial(e){let r={};return U.util.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return U.util.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof ht;)a=a._def.innerType;r[n]=a}}),new t({...this._def,shape:()=>r})}keyof(){return uf(U.util.objectKeys(this.shape))}};P.ZodObject=Je;Je.create=(t,e)=>new Je({shape:()=>t,unknownKeys:"strip",catchall:ft.create(),typeName:Y.ZodObject,...X(e)});Je.strictCreate=(t,e)=>new Je({shape:()=>t,unknownKeys:"strict",catchall:ft.create(),typeName:Y.ZodObject,...X(e)});Je.lazycreate=(t,e)=>new Je({shape:t,unknownKeys:"strip",catchall:ft.create(),typeName:Y.ZodObject,...X(e)});var Ar=class extends ee{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(let o of a)if(o.result.status==="valid")return o.result;for(let o of a)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;let s=a.map(o=>new F.ZodError(o.ctx.common.issues));return(0,I.addIssueToContext)(r,{code:F.ZodIssueCode.invalid_union,unionErrors:s}),I.INVALID}if(r.common.async)return Promise.all(n.map(async a=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let a,s=[];for(let u of n){let c={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;let o=s.map(u=>new F.ZodError(u));return(0,I.addIssueToContext)(r,{code:F.ZodIssueCode.invalid_union,unionErrors:o}),I.INVALID}}get options(){return this._def.options}};P.ZodUnion=Ar;Ar.create=(t,e)=>new Ar({options:t,typeName:Y.ZodUnion,...X(e)});var Wa=t=>t instanceof Er?Wa(t.schema):t instanceof et?Wa(t.innerType()):t instanceof Tr?[t.value]:t instanceof Cr?t.options:t instanceof Ir?Object.keys(t.enum):t instanceof Sr?Wa(t._def.innerType):t instanceof xr?[void 0]:t instanceof Or?[null]:null,Ga=class t extends ee{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==U.ZodParsedType.object)return(0,I.addIssueToContext)(r,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.object,received:r.parsedType}),I.INVALID;let n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):((0,I.addIssueToContext)(r,{code:F.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),I.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let a of r){let s=Wa(a.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of s){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,a)}}return new t({typeName:Y.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...X(n)})}};P.ZodDiscriminatedUnion=Ga;function hl(t,e){let r=(0,U.getParsedType)(t),n=(0,U.getParsedType)(e);if(t===e)return{valid:!0,data:t};if(r===U.ZodParsedType.object&&n===U.ZodParsedType.object){let i=U.util.objectKeys(e),a=U.util.objectKeys(t).filter(o=>i.indexOf(o)!==-1),s={...t,...e};for(let o of a){let u=hl(t[o],e[o]);if(!u.valid)return{valid:!1};s[o]=u.data}return{valid:!0,data:s}}else if(r===U.ZodParsedType.array&&n===U.ZodParsedType.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let a=0;a<t.length;a++){let s=t[a],o=e[a],u=hl(s,o);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===U.ZodParsedType.date&&n===U.ZodParsedType.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Pr=class extends ee{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(a,s)=>{if((0,I.isAborted)(a)||(0,I.isAborted)(s))return I.INVALID;let o=hl(a.value,s.value);return o.valid?(((0,I.isDirty)(a)||(0,I.isDirty)(s))&&r.dirty(),{status:r.value,value:o.data}):((0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_intersection_types}),I.INVALID)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,s])=>i(a,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};P.ZodIntersection=Pr;Pr.create=(t,e,r)=>new Pr({left:t,right:e,typeName:Y.ZodIntersection,...X(r)});var xt=class t extends ee{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==U.ZodParsedType.array)return(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.array,received:n.parsedType}),I.INVALID;if(n.data.length<this._def.items.length)return(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),I.INVALID;!this._def.rest&&n.data.length>this._def.items.length&&((0,I.addIssueToContext)(n,{code:F.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let a=[...n.data].map((s,o)=>{let u=this._def.items[o]||this._def.rest;return u?u._parse(new at(n,s,n.path,o)):null}).filter(s=>!!s);return n.common.async?Promise.all(a).then(s=>I.ParseStatus.mergeArray(r,s)):I.ParseStatus.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};P.ZodTuple=xt;xt.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xt({items:t,typeName:Y.ZodTuple,rest:null,...X(e)})};var Qa=class t extends ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==U.ZodParsedType.object)return(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.object,received:n.parsedType}),I.INVALID;let i=[],a=this._def.keyType,s=this._def.valueType;for(let o in n.data)i.push({key:a._parse(new at(n,o,n.path,o)),value:s._parse(new at(n,n.data[o],n.path,o))});return n.common.async?I.ParseStatus.mergeObjectAsync(r,i):I.ParseStatus.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ee?new t({keyType:e,valueType:r,typeName:Y.ZodRecord,...X(n)}):new t({keyType:Yt.create(),valueType:e,typeName:Y.ZodRecord,...X(r)})}};P.ZodRecord=Qa;var gn=class extends ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==U.ZodParsedType.map)return(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.map,received:n.parsedType}),I.INVALID;let i=this._def.keyType,a=this._def.valueType,s=[...n.data.entries()].map(([o,u],c)=>({key:i._parse(new at(n,o,n.path,[c,"key"])),value:a._parse(new at(n,u,n.path,[c,"value"]))}));if(n.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let u of s){let c=await u.key,d=await u.value;if(c.status==="aborted"||d.status==="aborted")return I.INVALID;(c.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(c.value,d.value)}return{status:r.value,value:o}})}else{let o=new Map;for(let u of s){let c=u.key,d=u.value;if(c.status==="aborted"||d.status==="aborted")return I.INVALID;(c.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(c.value,d.value)}return{status:r.value,value:o}}}};P.ZodMap=gn;gn.create=(t,e,r)=>new gn({valueType:e,keyType:t,typeName:Y.ZodMap,...X(r)});var bn=class t extends ee{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==U.ZodParsedType.set)return(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.set,received:n.parsedType}),I.INVALID;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&((0,I.addIssueToContext)(n,{code:F.ZodIssueCode.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&((0,I.addIssueToContext)(n,{code:F.ZodIssueCode.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let a=this._def.valueType;function s(u){let c=new Set;for(let d of u){if(d.status==="aborted")return I.INVALID;d.status==="dirty"&&r.dirty(),c.add(d.value)}return{status:r.value,value:c}}let o=[...n.data.values()].map((u,c)=>a._parse(new at(n,u,n.path,c)));return n.common.async?Promise.all(o).then(u=>s(u)):s(o)}min(e,r){return new t({...this._def,minSize:{value:e,message:H.errorUtil.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:H.errorUtil.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};P.ZodSet=bn;bn.create=(t,e)=>new bn({valueType:t,minSize:null,maxSize:null,typeName:Y.ZodSet,...X(e)});var Xa=class t extends ee{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==U.ZodParsedType.function)return(0,I.addIssueToContext)(r,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.function,received:r.parsedType}),I.INVALID;function n(o,u){return(0,I.makeIssue)({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,(0,Ya.getErrorMap)(),Ya.defaultErrorMap].filter(c=>!!c),issueData:{code:F.ZodIssueCode.invalid_arguments,argumentsError:u}})}function i(o,u){return(0,I.makeIssue)({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,(0,Ya.getErrorMap)(),Ya.defaultErrorMap].filter(c=>!!c),issueData:{code:F.ZodIssueCode.invalid_return_type,returnTypeError:u}})}let a={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof Gt){let o=this;return(0,I.OK)(async function(...u){let c=new F.ZodError([]),d=await o._def.args.parseAsync(u,a).catch(v=>{throw c.addIssue(n(u,v)),c}),p=await Reflect.apply(s,this,d);return await o._def.returns._def.type.parseAsync(p,a).catch(v=>{throw c.addIssue(i(p,v)),c})})}else{let o=this;return(0,I.OK)(function(...u){let c=o._def.args.safeParse(u,a);if(!c.success)throw new F.ZodError([n(u,c.error)]);let d=Reflect.apply(s,this,c.data),p=o._def.returns.safeParse(d,a);if(!p.success)throw new F.ZodError([i(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:xt.create(e).rest(Rt.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||xt.create([]).rest(Rt.create()),returns:r||Rt.create(),typeName:Y.ZodFunction,...X(n)})}};P.ZodFunction=Xa;var Er=class extends ee{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};P.ZodLazy=Er;Er.create=(t,e)=>new Er({getter:t,typeName:Y.ZodLazy,...X(e)});var Tr=class extends ee{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(r,{received:r.data,code:F.ZodIssueCode.invalid_literal,expected:this._def.value}),I.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}};P.ZodLiteral=Tr;Tr.create=(t,e)=>new Tr({value:t,typeName:Y.ZodLiteral,...X(e)});function uf(t,e){return new Cr({values:t,typeName:Y.ZodEnum,...X(e)})}var Cr=class t extends ee{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return(0,I.addIssueToContext)(r,{expected:U.util.joinValues(n),received:r.parsedType,code:F.ZodIssueCode.invalid_type}),I.INVALID}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return(0,I.addIssueToContext)(r,{received:r.data,code:F.ZodIssueCode.invalid_enum_value,options:n}),I.INVALID}return(0,I.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return t.create(e)}exclude(e){return t.create(this.options.filter(r=>!e.includes(r)))}};P.ZodEnum=Cr;Cr.create=uf;var Ir=class extends ee{_parse(e){let r=U.util.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==U.ZodParsedType.string&&n.parsedType!==U.ZodParsedType.number){let i=U.util.objectValues(r);return(0,I.addIssueToContext)(n,{expected:U.util.joinValues(i),received:n.parsedType,code:F.ZodIssueCode.invalid_type}),I.INVALID}if(r.indexOf(e.data)===-1){let i=U.util.objectValues(r);return(0,I.addIssueToContext)(n,{received:n.data,code:F.ZodIssueCode.invalid_enum_value,options:i}),I.INVALID}return(0,I.OK)(e.data)}get enum(){return this._def.values}};P.ZodNativeEnum=Ir;Ir.create=(t,e)=>new Ir({values:t,typeName:Y.ZodNativeEnum,...X(e)});var Gt=class extends ee{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==U.ZodParsedType.promise&&r.common.async===!1)return(0,I.addIssueToContext)(r,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.promise,received:r.parsedType}),I.INVALID;let n=r.parsedType===U.ZodParsedType.promise?r.data:Promise.resolve(r.data);return(0,I.OK)(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};P.ZodPromise=Gt;Gt.create=(t,e)=>new Gt({type:t,typeName:Y.ZodPromise,...X(e)});var et=class extends ee{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:s=>{(0,I.addIssueToContext)(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){let s=i.transform(n.data,a);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(s).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:s,path:n.path,parent:n})}if(i.type==="refinement"){let s=o=>{let u=i.refinement(o,a);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?I.INVALID:(o.status==="dirty"&&r.dirty(),s(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?I.INVALID:(o.status==="dirty"&&r.dirty(),s(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!(0,I.isValid)(s))return s;let o=i.transform(s.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>(0,I.isValid)(s)?Promise.resolve(i.transform(s.value,a)).then(o=>({status:r.value,value:o})):s);U.util.assertNever(i)}};P.ZodEffects=et;P.ZodTransformer=et;et.create=(t,e,r)=>new et({schema:t,typeName:Y.ZodEffects,effect:e,...X(r)});et.createWithPreprocess=(t,e,r)=>new et({schema:e,effect:{type:"preprocess",transform:t},typeName:Y.ZodEffects,...X(r)});var ht=class extends ee{_parse(e){return this._getType(e)===U.ZodParsedType.undefined?(0,I.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};P.ZodOptional=ht;ht.create=(t,e)=>new ht({innerType:t,typeName:Y.ZodOptional,...X(e)});var Mt=class extends ee{_parse(e){return this._getType(e)===U.ZodParsedType.null?(0,I.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};P.ZodNullable=Mt;Mt.create=(t,e)=>new Mt({innerType:t,typeName:Y.ZodNullable,...X(e)});var Sr=class extends ee{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===U.ZodParsedType.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};P.ZodDefault=Sr;Sr.create=(t,e)=>new Sr({innerType:t,typeName:Y.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...X(e)});var wn=class extends ee{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return(0,I.isAsync)(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new F.ZodError(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new F.ZodError(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};P.ZodCatch=wn;wn.create=(t,e)=>new wn({innerType:t,typeName:Y.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...X(e)});var _n=class extends ee{_parse(e){if(this._getType(e)!==U.ZodParsedType.nan){let n=this._getOrReturnCtx(e);return(0,I.addIssueToContext)(n,{code:F.ZodIssueCode.invalid_type,expected:U.ZodParsedType.nan,received:n.parsedType}),I.INVALID}return{status:"valid",value:e.data}}};P.ZodNaN=_n;_n.create=t=>new _n({typeName:Y.ZodNaN,...X(t)});P.BRAND=Symbol("zod_brand");var es=class extends ee{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}};P.ZodBranded=es;var hi=class t extends ee{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?I.INVALID:a.status==="dirty"?(r.dirty(),(0,I.DIRTY)(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?I.INVALID:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Y.ZodPipeline})}};P.ZodPipeline=hi;var vn=class extends ee{_parse(e){let r=this._def.innerType._parse(e);return(0,I.isValid)(r)&&(r.value=Object.freeze(r.value)),r}};P.ZodReadonly=vn;vn.create=(t,e)=>new vn({innerType:t,typeName:Y.ZodReadonly,...X(e)});var C_=(t,e={},r)=>t?Wt.create().superRefine((n,i)=>{var a,s;if(!t(n)){let o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(s=(a=o.fatal)!==null&&a!==void 0?a:r)!==null&&s!==void 0?s:!0,c=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...c,fatal:u})}}):Wt.create();P.custom=C_;P.late={object:Je.lazycreate};var Y;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Y=P.ZodFirstPartyTypeKind||(P.ZodFirstPartyTypeKind={}));var I_=(t,e={message:`Input not instance of ${t.name}`})=>(0,P.custom)(r=>r instanceof t,e);P.instanceof=I_;var lf=Yt.create;P.string=lf;var cf=br.create;P.number=cf;var S_=_n.create;P.nan=S_;var j_=wr.create;P.bigint=j_;var df=_r.create;P.boolean=df;var k_=vr.create;P.date=k_;var R_=mn.create;P.symbol=R_;var N_=xr.create;P.undefined=N_;var M_=Or.create;P.null=M_;var L_=Wt.create;P.any=L_;var D_=Rt.create;P.unknown=D_;var q_=ft.create;P.never=q_;var F_=yn.create;P.void=F_;var U_=Nt.create;P.array=U_;var V_=Je.create;P.object=V_;var B_=Je.strictCreate;P.strictObject=B_;var z_=Ar.create;P.union=z_;var K_=Ga.create;P.discriminatedUnion=K_;var $_=Pr.create;P.intersection=$_;var Z_=xt.create;P.tuple=Z_;var H_=Qa.create;P.record=H_;var J_=gn.create;P.map=J_;var Y_=bn.create;P.set=Y_;var W_=Xa.create;P.function=W_;var G_=Er.create;P.lazy=G_;var Q_=Tr.create;P.literal=Q_;var X_=Cr.create;P.enum=X_;var ev=Ir.create;P.nativeEnum=ev;var tv=Gt.create;P.promise=tv;var pf=et.create;P.effect=pf;P.transformer=pf;var rv=ht.create;P.optional=rv;var nv=Mt.create;P.nullable=nv;var iv=et.createWithPreprocess;P.preprocess=iv;var av=hi.create;P.pipeline=av;var sv=()=>lf().optional();P.ostring=sv;var ov=()=>cf().optional();P.onumber=ov;var uv=()=>df().optional();P.oboolean=uv;P.coerce={string:t=>Yt.create({...t,coerce:!0}),number:t=>br.create({...t,coerce:!0}),boolean:t=>_r.create({...t,coerce:!0}),bigint:t=>wr.create({...t,coerce:!0}),date:t=>vr.create({...t,coerce:!0})};P.NEVER=I.INVALID});var fl=L(st=>{"use strict";l();var lv=st&&st.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xn=st&&st.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lv(e,t,r)};Object.defineProperty(st,"__esModule",{value:!0});xn(Ja(),st);xn(pl(),st);xn(af(),st);xn(ci(),st);xn(hf(),st);xn(Ha(),st)});var ts=L(Ye=>{"use strict";l();var ff=Ye&&Ye.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cv=Ye&&Ye.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dv=Ye&&Ye.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ff(e,t,r);return cv(e,t),e},pv=Ye&&Ye.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ff(e,t,r)};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.z=void 0;var mf=dv(fl());Ye.z=mf;pv(fl(),Ye);Ye.default=mf});var yf=L(rs=>{"use strict";l();Object.defineProperty(rs,"__esModule",{value:!0});rs.parseAnyDef=void 0;function hv(){return{}}rs.parseAnyDef=hv});var jr=L(On=>{"use strict";l();Object.defineProperty(On,"__esModule",{value:!0});On.setResponseValueAndErrors=On.addErrorMessage=void 0;function gf(t,e,r,n){n?.errorMessages&&r&&(t.errorMessage=Object.assign(Object.assign({},t.errorMessage),{[e]:r}))}On.addErrorMessage=gf;function fv(t,e,r,n,i){t[e]=r,gf(t,e,n,i)}On.setResponseValueAndErrors=fv});var bf=L(is=>{"use strict";l();Object.defineProperty(is,"__esModule",{value:!0});is.parseArrayDef=void 0;var mv=ts(),ns=jr(),yv=Se();function gv(t,e){var r,n;let i={type:"array"};return((n=(r=t.type)===null||r===void 0?void 0:r._def)===null||n===void 0?void 0:n.typeName)!==mv.ZodFirstPartyTypeKind.ZodAny&&(i.items=(0,yv.parseDef)(t.type._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items"]}))),t.minLength&&(0,ns.setResponseValueAndErrors)(i,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&(0,ns.setResponseValueAndErrors)(i,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&((0,ns.setResponseValueAndErrors)(i,"minItems",t.exactLength.value,t.exactLength.message,e),(0,ns.setResponseValueAndErrors)(i,"maxItems",t.exactLength.value,t.exactLength.message,e)),i}is.parseArrayDef=gv});var wf=L(as=>{"use strict";l();Object.defineProperty(as,"__esModule",{value:!0});as.parseBigintDef=void 0;var kr=jr();function bv(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?(0,kr.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,kr.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,kr.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,kr.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,kr.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,kr.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,kr.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}as.parseBigintDef=bv});var _f=L(ss=>{"use strict";l();Object.defineProperty(ss,"__esModule",{value:!0});ss.parseBooleanDef=void 0;function wv(){return{type:"boolean"}}ss.parseBooleanDef=wv});var vf=L(os=>{"use strict";l();Object.defineProperty(os,"__esModule",{value:!0});os.parseBrandedDef=void 0;var _v=Se();function vv(t,e){return(0,_v.parseDef)(t.type._def,e)}os.parseBrandedDef=vv});var xf=L(us=>{"use strict";l();Object.defineProperty(us,"__esModule",{value:!0});us.parseCatchDef=void 0;var xv=Se(),Ov=(t,e)=>(0,xv.parseDef)(t.innerType._def,e);us.parseCatchDef=Ov});var Af=L(ls=>{"use strict";l();Object.defineProperty(ls,"__esModule",{value:!0});ls.parseDateDef=void 0;var Of=jr();function Av(t,e){return e.dateStrategy=="integer"?Pv(t,e):{type:"string",format:"date-time"}}ls.parseDateDef=Av;var Pv=(t,e)=>{let r={type:"integer",format:"unix-time"};for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"&&(0,Of.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e);break;case"max":e.target==="jsonSchema7"&&(0,Of.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e);break}return r}});var Pf=L(cs=>{"use strict";l();Object.defineProperty(cs,"__esModule",{value:!0});cs.parseDefaultDef=void 0;var Ev=Se();function Tv(t,e){return Object.assign(Object.assign({},(0,Ev.parseDef)(t.innerType._def,e)),{default:t.defaultValue()})}cs.parseDefaultDef=Tv});var Ef=L(ds=>{"use strict";l();Object.defineProperty(ds,"__esModule",{value:!0});ds.parseEffectsDef=void 0;var Cv=Se();function Iv(t,e){return e.effectStrategy==="input"?(0,Cv.parseDef)(t.schema._def,e):{}}ds.parseEffectsDef=Iv});var Tf=L(ps=>{"use strict";l();Object.defineProperty(ps,"__esModule",{value:!0});ps.parseEnumDef=void 0;function Sv(t){return{type:"string",enum:t.values}}ps.parseEnumDef=Sv});var If=L(An=>{"use strict";l();var jv=An&&An.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(An,"__esModule",{value:!0});An.parseIntersectionDef=void 0;var Cf=Se(),kv=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function Rv(t,e){let r=[(0,Cf.parseDef)(t.left._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf","0"]})),(0,Cf.parseDef)(t.right._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf","1"]}))].filter(a=>!!a),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(a=>{if(kv(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let s=a;if("additionalProperties"in a&&a.additionalProperties===!1){let{additionalProperties:o}=a;s=jv(a,["additionalProperties"])}else n=void 0;i.push(s)}}),i.length?Object.assign({allOf:i},n):void 0}An.parseIntersectionDef=Rv});var Sf=L(hs=>{"use strict";l();Object.defineProperty(hs,"__esModule",{value:!0});hs.parseLiteralDef=void 0;function Nv(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}hs.parseLiteralDef=Nv});var kf=L(fs=>{"use strict";l();Object.defineProperty(fs,"__esModule",{value:!0});fs.parseMapDef=void 0;var jf=Se();function Mv(t,e){let r=(0,jf.parseDef)(t.keyType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items","items","0"]}))||{},n=(0,jf.parseDef)(t.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}fs.parseMapDef=Mv});var Rf=L(ms=>{"use strict";l();Object.defineProperty(ms,"__esModule",{value:!0});ms.parseNativeEnumDef=void 0;function Lv(t){let e=t.values,n=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(n.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}ms.parseNativeEnumDef=Lv});var Nf=L(ys=>{"use strict";l();Object.defineProperty(ys,"__esModule",{value:!0});ys.parseNeverDef=void 0;function Dv(){return{not:{}}}ys.parseNeverDef=Dv});var Mf=L(gs=>{"use strict";l();Object.defineProperty(gs,"__esModule",{value:!0});gs.parseNullDef=void 0;function qv(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}gs.parseNullDef=qv});var ml=L(Qt=>{"use strict";l();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.parseUnionDef=Qt.primitiveMappings=void 0;var Fv=Se();Qt.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Uv(t,e){if(e.target==="openApi3")return Lf(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in Qt.primitiveMappings&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((i,a)=>{let s=Qt.primitiveMappings[a._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((i,a)=>{let s=typeof a._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){let i=n.filter((a,s,o)=>o.indexOf(a)===s);return{type:i.length>1?i:i[0],enum:r.reduce((a,s)=>a.includes(s._def.value)?a:[...a,s._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(a=>!n.includes(a))],[])};return Lf(t,e)}Qt.parseUnionDef=Uv;var Lf=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>(0,Fv.parseDef)(n._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"anyOf",`${i}`]}))).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0}});var Ff=L(bs=>{"use strict";l();Object.defineProperty(bs,"__esModule",{value:!0});bs.parseNullableDef=void 0;var Df=Se(),qf=ml();function Vv(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:qf.primitiveMappings[t.innerType._def.typeName],nullable:!0}:{type:[qf.primitiveMappings[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=(0,Df.parseDef)(t.innerType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath]}));return n&&Object.assign(Object.assign({},n),{nullable:!0})}let r=(0,Df.parseDef)(t.innerType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"anyOf","0"]}));return r&&{anyOf:[r,{type:"null"}]}}bs.parseNullableDef=Vv});var Uf=L(ws=>{"use strict";l();Object.defineProperty(ws,"__esModule",{value:!0});ws.parseNumberDef=void 0;var Xt=jr();function Bv(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",(0,Xt.addErrorMessage)(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?(0,Xt.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e):(0,Xt.setResponseValueAndErrors)(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),(0,Xt.setResponseValueAndErrors)(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,Xt.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e):(0,Xt.setResponseValueAndErrors)(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),(0,Xt.setResponseValueAndErrors)(r,"maximum",n.value,n.message,e));break;case"multipleOf":(0,Xt.setResponseValueAndErrors)(r,"multipleOf",n.value,n.message,e);break}return r}ws.parseNumberDef=Bv});var Vf=L(En=>{"use strict";l();Object.defineProperty(En,"__esModule",{value:!0});En.parseObjectDef=En.parseObjectDefX=void 0;var Pn=Se();function zv(t,e){var r,n;Object.keys(t.shape()).reduce((a,s)=>{let o=t.shape()[s],u=o.isOptional();u||(o=Object.assign({},o._def.innerSchema));let c=(0,Pn.parseDef)(o._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"properties",s],propertyPath:[...e.currentPath,"properties",s]}));return c!==void 0&&(a.properties[s]=c,u||(a.required||(a.required=[]),a.required.push(s))),a},{type:"object",properties:{},additionalProperties:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(r=(0,Pn.parseDef)(t.catchall._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!==null&&r!==void 0?r:!0});let i=Object.assign(Object.assign({type:"object"},Object.entries(t.shape()).reduce((a,[s,o])=>{if(o===void 0||o._def===void 0)return a;let u=(0,Pn.parseDef)(o._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"properties",s],propertyPath:[...e.currentPath,"properties",s]}));return u===void 0?a:{properties:Object.assign(Object.assign({},a.properties),{[s]:u}),required:o.isOptional()?a.required:[...a.required,s]}},{properties:{},required:[]})),{additionalProperties:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(n=(0,Pn.parseDef)(t.catchall._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!==null&&n!==void 0?n:!0});return i.required.length||delete i.required,i}En.parseObjectDefX=zv;function Kv(t,e){var r;let n=Object.assign(Object.assign({type:"object"},Object.entries(t.shape()).reduce((i,[a,s])=>{if(s===void 0||s._def===void 0)return i;let o=(0,Pn.parseDef)(s._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]}));return o===void 0?i:{properties:Object.assign(Object.assign({},i.properties),{[a]:o}),required:s.isOptional()?i.required:[...i.required,a]}},{properties:{},required:[]})),{additionalProperties:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(r=(0,Pn.parseDef)(t.catchall._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!==null&&r!==void 0?r:!0});return n.required.length||delete n.required,n}En.parseObjectDef=Kv});var zf=L(_s=>{"use strict";l();Object.defineProperty(_s,"__esModule",{value:!0});_s.parseOptionalDef=void 0;var Bf=Se(),$v=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)===null||r===void 0?void 0:r.toString()))return(0,Bf.parseDef)(t.innerType._def,e);let n=(0,Bf.parseDef)(t.innerType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"anyOf","1"]}));return n?{anyOf:[{not:{}},n]}:{}};_s.parseOptionalDef=$v});var Kf=L(vs=>{"use strict";l();Object.defineProperty(vs,"__esModule",{value:!0});vs.parsePipelineDef=void 0;var yl=Se(),Zv=(t,e)=>{if(e.pipeStrategy==="input")return(0,yl.parseDef)(t.in._def,e);let r=(0,yl.parseDef)(t.in._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf","0"]})),n=(0,yl.parseDef)(t.out._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf",r?"1":"0"]}));return{allOf:[r,n].filter(i=>i!==void 0)}};vs.parsePipelineDef=Zv});var $f=L(xs=>{"use strict";l();Object.defineProperty(xs,"__esModule",{value:!0});xs.parsePromiseDef=void 0;var Hv=Se();function Jv(t,e){return(0,Hv.parseDef)(t.type._def,e)}xs.parsePromiseDef=Jv});var bl=L(Ae=>{"use strict";l();Object.defineProperty(Ae,"__esModule",{value:!0});Ae.parseStringDef=Ae.emojiPattern=Ae.ulidPattern=Ae.cuid2Pattern=Ae.cuidPattern=Ae.emailPattern=void 0;var Tn=jr();Ae.emailPattern='^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$';Ae.cuidPattern="^c[^\\s-]{8,}$";Ae.cuid2Pattern="^[a-z][a-z0-9]*$";Ae.ulidPattern="/[0-9A-HJKMNP-TV-Z]{26}/";Ae.emojiPattern="/^(p{Extended_Pictographic}|p{Emoji_Component})+$/u";function Yv(t,e){let r={type:"string"};if(t.checks)for(let n of t.checks)switch(n.kind){case"min":(0,Tn.setResponseValueAndErrors)(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":(0,Tn.setResponseValueAndErrors)(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Rr(r,"email",n.message,e);break;case"format:idn-email":Rr(r,"idn-email",n.message,e);break;case"pattern:zod":Lt(r,Ae.emailPattern,n.message,e);break}break;case"url":Rr(r,"uri",n.message,e);break;case"uuid":Rr(r,"uuid",n.message,e);break;case"regex":Lt(r,n.regex.source,n.message,e);break;case"cuid":Lt(r,Ae.cuidPattern,n.message,e);break;case"cuid2":Lt(r,Ae.cuid2Pattern,n.message,e);break;case"startsWith":Lt(r,"^"+gl(n.value),n.message,e);break;case"endsWith":Lt(r,gl(n.value)+"$",n.message,e);break;case"datetime":Rr(r,"date-time",n.message,e);break;case"length":(0,Tn.setResponseValueAndErrors)(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),(0,Tn.setResponseValueAndErrors)(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{Lt(r,gl(n.value),n.message,e);break}case"ip":{n.version!=="v6"&&Rr(r,"ipv4",n.message,e),n.version!=="v4"&&Rr(r,"ipv6",n.message,e);break}case"emoji":Lt(r,Ae.emojiPattern,n.message,e);break;case"ulid":{Lt(r,Ae.ulidPattern,n.message,e);break}case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}Ae.parseStringDef=Yv;var gl=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),Rr=(t,e,r,n)=>{var i;t.format||!((i=t.anyOf)===null||i===void 0)&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push(Object.assign({format:t.format},t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}})),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push(Object.assign({format:e},r&&n.errorMessages&&{errorMessage:{format:r}}))):(0,Tn.setResponseValueAndErrors)(t,"format",e,r,n)},Lt=(t,e,r,n)=>{var i;t.pattern||!((i=t.allOf)===null||i===void 0)&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push(Object.assign({pattern:t.pattern},t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}})),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push(Object.assign({pattern:e},r&&n.errorMessages&&{errorMessage:{pattern:r}}))):(0,Tn.setResponseValueAndErrors)(t,"pattern",e,r,n)}});var Hf=L(Os=>{"use strict";l();Object.defineProperty(Os,"__esModule",{value:!0});Os.parseRecordDef=void 0;var wl=ts(),Zf=Se(),Wv=bl();function Gv(t,e){var r,n,i,a,s;if(e.target==="openApi3"&&((r=t.keyType)===null||r===void 0?void 0:r._def.typeName)===wl.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((u,c)=>{var d;return Object.assign(Object.assign({},u),{[c]:(d=(0,Zf.parseDef)(t.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"properties",c]})))!==null&&d!==void 0?d:{}})},{}),additionalProperties:!1};let o={type:"object",additionalProperties:(n=(0,Zf.parseDef)(t.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!==null&&n!==void 0?n:{}};if(e.target==="openApi3")return o;if(((i=t.keyType)===null||i===void 0?void 0:i._def.typeName)===wl.ZodFirstPartyTypeKind.ZodString&&(!((a=t.keyType._def.checks)===null||a===void 0)&&a.length)){let u=Object.entries((0,Wv.parseStringDef)(t.keyType._def,e)).reduce((c,[d,p])=>d==="type"?c:Object.assign(Object.assign({},c),{[d]:p}),{});return Object.assign(Object.assign({},o),{propertyNames:u})}else if(((s=t.keyType)===null||s===void 0?void 0:s._def.typeName)===wl.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},o),{propertyNames:{enum:t.keyType._def.values}});return o}Os.parseRecordDef=Gv});var Yf=L(As=>{"use strict";l();Object.defineProperty(As,"__esModule",{value:!0});As.parseSetDef=void 0;var Jf=jr(),Qv=Se();function Xv(t,e){let n={type:"array",uniqueItems:!0,items:(0,Qv.parseDef)(t.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items"]}))};return t.minSize&&(0,Jf.setResponseValueAndErrors)(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&(0,Jf.setResponseValueAndErrors)(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}As.parseSetDef=Xv});var Wf=L(Ps=>{"use strict";l();Object.defineProperty(Ps,"__esModule",{value:!0});Ps.parseTupleDef=void 0;var _l=Se();function e0(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>(0,_l.parseDef)(r._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items",`${n}`]}))).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:(0,_l.parseDef)(t.rest._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalItems"]}))}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>(0,_l.parseDef)(r._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items",`${n}`]}))).reduce((r,n)=>n===void 0?r:[...r,n],[])}}Ps.parseTupleDef=e0});var Gf=L(Es=>{"use strict";l();Object.defineProperty(Es,"__esModule",{value:!0});Es.parseUndefinedDef=void 0;function t0(){return{not:{}}}Es.parseUndefinedDef=t0});var Qf=L(Ts=>{"use strict";l();Object.defineProperty(Ts,"__esModule",{value:!0});Ts.parseUnknownDef=void 0;function r0(){return{}}Ts.parseUnknownDef=r0});var Se=L(Cs=>{"use strict";l();Object.defineProperty(Cs,"__esModule",{value:!0});Cs.parseDef=void 0;var ie=ts(),n0=yf(),i0=bf(),a0=wf(),s0=_f(),o0=vf(),u0=xf(),l0=Af(),c0=Pf(),d0=Ef(),p0=Tf(),h0=If(),f0=Sf(),m0=kf(),y0=Rf(),g0=Nf(),b0=Mf(),w0=Ff(),_0=Uf(),v0=Vf(),x0=zf(),O0=Kf(),A0=$f(),P0=Hf(),E0=Yf(),T0=bl(),C0=Wf(),I0=Gf(),S0=ml(),j0=Qf();function Xf(t,e,r=!1){let n=e.seen.get(t);if(n&&!r){let s=k0(n,e);if(s!==void 0)return s}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let a=N0(t,t.typeName,e);return a&&M0(t,e,a),i.jsonSchema=a,a}Cs.parseDef=Xf;var k0=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.length===0?"":t.path.length===1?`${t.path[0]}/`:t.path.join("/")};case"relative":return{$ref:R0(e.currentPath,t.path)};case"none":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?{}:void 0;case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?{}:t.jsonSchema}},R0=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},N0=(t,e,r)=>{switch(e){case ie.ZodFirstPartyTypeKind.ZodString:return(0,T0.parseStringDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodNumber:return(0,_0.parseNumberDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodObject:return(0,v0.parseObjectDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodBigInt:return(0,a0.parseBigintDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodBoolean:return(0,s0.parseBooleanDef)();case ie.ZodFirstPartyTypeKind.ZodDate:return(0,l0.parseDateDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodUndefined:return(0,I0.parseUndefinedDef)();case ie.ZodFirstPartyTypeKind.ZodNull:return(0,b0.parseNullDef)(r);case ie.ZodFirstPartyTypeKind.ZodArray:return(0,i0.parseArrayDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodUnion:case ie.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,S0.parseUnionDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodIntersection:return(0,h0.parseIntersectionDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodTuple:return(0,C0.parseTupleDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodRecord:return(0,P0.parseRecordDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodLiteral:return(0,f0.parseLiteralDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodEnum:return(0,p0.parseEnumDef)(t);case ie.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,y0.parseNativeEnumDef)(t);case ie.ZodFirstPartyTypeKind.ZodNullable:return(0,w0.parseNullableDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodOptional:return(0,x0.parseOptionalDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodMap:return(0,m0.parseMapDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodSet:return(0,E0.parseSetDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodLazy:return Xf(t.getter()._def,r);case ie.ZodFirstPartyTypeKind.ZodPromise:return(0,A0.parsePromiseDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodNaN:case ie.ZodFirstPartyTypeKind.ZodNever:return(0,g0.parseNeverDef)();case ie.ZodFirstPartyTypeKind.ZodEffects:return(0,d0.parseEffectsDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodAny:return(0,n0.parseAnyDef)();case ie.ZodFirstPartyTypeKind.ZodUnknown:return(0,j0.parseUnknownDef)();case ie.ZodFirstPartyTypeKind.ZodDefault:return(0,c0.parseDefaultDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodBranded:return(0,o0.parseBrandedDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodCatch:return(0,u0.parseCatchDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodPipeline:return(0,O0.parsePipelineDef)(t,r);case ie.ZodFirstPartyTypeKind.ZodFunction:case ie.ZodFirstPartyTypeKind.ZodVoid:case ie.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(n=>{})(e)}},M0=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r)});var em=L(er=>{"use strict";l();Object.defineProperty(er,"__esModule",{value:!0});er.getDefaultOptions=er.defaultOptions=void 0;er.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,emailStrategy:"format:email"};var L0=t=>typeof t=="string"?Object.assign(Object.assign({},er.defaultOptions),{name:t}):Object.assign(Object.assign({},er.defaultOptions),t);er.getDefaultOptions=L0});var tm=L(Is=>{"use strict";l();Object.defineProperty(Is,"__esModule",{value:!0});Is.getRefs=void 0;var D0=em(),q0=t=>{let e=(0,D0.getDefaultOptions)(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return Object.assign(Object.assign({},e),{currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))})};Is.getRefs=q0});var nm=L(Ss=>{"use strict";l();Object.defineProperty(Ss,"__esModule",{value:!0});Ss.zodToJsonSchema=void 0;var rm=Se(),F0=tm(),U0=(t,e)=>{var r;let n=(0,F0.getRefs)(e),i=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[c,d])=>{var p;return Object.assign(Object.assign({},u),{[c]:(p=(0,rm.parseDef)(d._def,Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,c]}),!0))!==null&&p!==void 0?p:{}})},{}):void 0,a=typeof e=="string"?e:e?.name,s=(r=(0,rm.parseDef)(t._def,a===void 0?n:Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,a]}),!1))!==null&&r!==void 0?r:{},o=a===void 0?i?Object.assign(Object.assign({},s),{[n.definitionPath]:i}):s:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:Object.assign(Object.assign({},i),{[a]:s})};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};Ss.zodToJsonSchema=U0});var mi=L(fi=>{"use strict";l();Object.defineProperty(fi,"__esModule",{value:!0});fi.zodToJsonSchema=void 0;var im=nm();Object.defineProperty(fi,"zodToJsonSchema",{enumerable:!0,get:function(){return im.zodToJsonSchema}});fi.default=im.zodToJsonSchema});function sm(t){return{name:t.name,description:t.description,parameters:(0,am.zodToJsonSchema)(t.schema)}}var am,om=M(()=>{l();am=be(mi(),1)});function tr(t){let{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:i,basePath:a}=t;if(n&&i&&e)return`${i}/${e}`;if(n){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${e}`}return a}var yi=M(()=>{l()});var um={};ut(um,{ChatOpenAI:()=>gi,PromptLayerChatOpenAI:()=>vl});function V0(t){return t.role!=="system"&&t.role!=="assistant"&&t.role!=="user"&&t.role,t.role}function js(t){let e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"generic":{if(!Xr.isInstance(t))throw new Error("Invalid generic chat message");return V0(t)}default:throw new Error(`Unknown message type: ${e}`)}}function B0(t){switch(t.role){case"user":return new ct(t.content||"");case"assistant":return new gt(t.content||"",{function_call:t.function_call});case"system":return new Qr(t.content||"");default:return new Xr(t.content||"",t.role??"unknown")}}function z0(t,e){let r=t.role??e,n=t.content??"",i;return t.function_call?i={function_call:t.function_call}:i={},r==="user"?new da({content:n}):r==="assistant"?new pa({content:n,additional_kwargs:i}):r==="system"?new ha({content:n}):r==="function"?new fa({content:n,additional_kwargs:i,name:t.name}):new ma({content:n,role:r})}var ks,gi,vl,xl=M(()=>{l();ks=be(Kr(),1);Tt();Gr();Qh();rt();Xn();Za();om();yi();ni();gi=class extends $a{get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","promptIndex"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.openAIApiKey??G("OPENAI_API_KEY"),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??G("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??G("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=e?.azureOpenAIApiDeploymentName??G("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??G("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??G("AZURE_OPENAI_BASE_PATH"),this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.maxTokens=e?.maxTokens,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:this.openAIApiKey,...r,...e?.configuration}}invocationParams(e){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stop,stream:this.streaming,functions:e?.functions??(e?.tools?e?.tools.map(sm):void 0),function_call:e?.function_call,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,r,n){let i=e.map(u=>({role:js(u),content:u.content,name:u.name,function_call:u.additional_kwargs.function_call})),a={...this.invocationParams(r),messages:i,stream:!0},s="assistant",o=this.startStream(a,r);for await(let u of o){let d=JSON.parse(u).choices?.[0];if(!d)continue;let{delta:p}=d,b=z0(p,s);s=p.role??s;let v=new ya({message:b,text:b.content});yield v,n?.handleLLMNewToken(v.text??"")}}startStream(e,r){let n=!1,i=new TransformStream,a=i.writable.getWriter(),s=un(i.readable),o;return this.completionWithRetry(e,{...r,adapter:Me,responseType:"stream",onmessage:u=>{if(!n)if(u.data?.trim?.()==="[DONE]")n=!0,a.close();else{let c=JSON.parse(u.data);if(c.error)throw n=!0,c.error;a.write(u.data)}}}).catch(u=>{n||(o=u,n=!0,a.close())}),{async next(){let u=await s.next();if(o)throw o;return u},[Symbol.asyncIterator](){return this}}}identifyingParams(){return this._identifyingParams()}async _generate(e,r,n){let i={},a=this.invocationParams(r),s=e.map(b=>({role:js(b),content:b.content,name:b.name,function_call:b.additional_kwargs.function_call})),o=a.stream?await new Promise((b,v)=>{let m,x=!1,T=!1;this.completionWithRetry({...a,messages:s},{signal:r?.signal,...r?.options,adapter:Me,responseType:"stream",onmessage:k=>{if(k.data?.trim?.()==="[DONE]"){if(T||x)return;T=!0,b(m)}else{let S=JSON.parse(k.data);if(!S.id)return;if(S?.error){if(x)return;x=!0,v(S.error);return}let V=S;m||(m={id:V.id,object:V.object,created:V.created,model:V.model,choices:[]});for(let O of V.choices??[])if(O!=null){let R=m.choices.find(g=>g.index===O.index);R||(R={index:O.index,finish_reason:O.finish_reason??void 0},m.choices[O.index]=R),R.message||(R.message={role:O.delta?.role,content:""}),O.delta.function_call&&!R.message.function_call&&(R.message.function_call={name:"",arguments:""}),R.message.content+=O.delta?.content??"",R.message.function_call&&(R.message.function_call.name+=O.delta?.function_call?.name??"",R.message.function_call.arguments+=O.delta?.function_call?.arguments??""),n?.handleLLMNewToken(O.delta?.content??"",{prompt:r.promptIndex??0,completion:O.index})}!T&&!x&&V.choices?.every(O=>O.finish_reason!=null)&&(T=!0,b(m))}}}).catch(k=>{x||(x=!0,v(k))})}):await this.completionWithRetry({...a,messages:s},{signal:r?.signal,...r?.options}),{completion_tokens:u,prompt_tokens:c,total_tokens:d}=o.usage??{};u&&(i.completionTokens=(i.completionTokens??0)+u),c&&(i.promptTokens=(i.promptTokens??0)+c),d&&(i.totalTokens=(i.totalTokens??0)+d);let p=[];for(let b of o.choices){let v=b.message?.content??"";p.push({text:v,message:B0(b.message??{role:"assistant"})})}return{generations:p,llmOutput:{tokenUsage:i}}}async getNumTokensFromMessages(e){let r=0,n=0,i=0;rn(this.modelName)==="gpt-3.5-turbo"?(n=4,i=-1):rn(this.modelName).startsWith("gpt-4")&&(n=3,i=1);let a=await Promise.all(e.map(async s=>{let o=await this.getNumTokens(s.content),u=await this.getNumTokens(js(s)),c=s.name!==void 0?i+await this.getNumTokens(s.name):0,d=o+n+u+c;return r+=d,d}));return r+=3,{totalCount:r,countPerMessage:a}}async completionWithRetry(e,r){if(!this.client){let i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},a=tr(i),s=new ks.Configuration({...this.clientConfig,basePath:a,baseOptions:{timeout:this.timeout,...this.clientConfig.baseOptions}});this.client=new ks.OpenAIApi(s)}let n={adapter:Et()?void 0:Me,...this.clientConfig.baseOptions,...r};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.params={"api-version":this.azureOpenAIApiVersion,...n.params}),this.caller.call(this.client.createChatCompletion.bind(this.client),e,n).then(i=>i.data)}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((r,n)=>(n&&n.tokenUsage&&(r.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,r.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,r.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),r),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}},vl=class extends gi{constructor(e){super(e),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.promptLayerApiKey=e?.promptLayerApiKey??(typeof process<"u"?h?.PROMPTLAYER_API_KEY:void 0),this.plTags=e?.plTags??[],this.returnPromptLayerId=e?.returnPromptLayerId??!1}async _generate(e,r,n){let i=Date.now(),a;Array.isArray(r)?a={stop:r}:r?.timeout&&!r.signal?a={...r,signal:AbortSignal.timeout(r.timeout)}:a=r??{};let s=await super._generate(e,a,n),o=Date.now(),u=d=>{let p;if(d._getType()==="human")p={role:"user",content:d.content};else if(d._getType()==="ai")p={role:"assistant",content:d.content};else if(d._getType()==="function")p={role:"assistant",content:d.content};else if(d._getType()==="system")p={role:"system",content:d.content};else if(d._getType()==="generic")p={role:d.role,content:d.content};else throw new Error(`Got unknown type ${d}`);return p},c=(d,p)=>{let b={...this.invocationParams(),model:this.modelName};if(p?.stop&&Object.keys(b).includes("stop"))throw new Error("`stop` found in both the input and default params.");return d.map(m=>u(m))};for(let d=0;d<s.generations.length;d+=1){let p=s.generations[d],b=c(e,a),v,m=[{content:p.text,role:js(p.message)}],x=await hn(this.caller,"langchain.PromptLayerChatOpenAI",b,this._identifyingParams(),this.plTags,m,i,o,this.promptLayerApiKey);this.returnPromptLayerId===!0&&(x.success===!0&&(v=x.request_id),(!p.generationInfo||typeof p.generationInfo!="object")&&(p.generationInfo={}),p.generationInfo.promptLayerRequestId=v)}return s}}});var K0,bi,Ht,li=M(()=>{l();Qn();Xn();ja();ln();_t();yr();Xn();K0=()=>!1,bi=class extends Ie{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??K0(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}},Ht=class extends bi{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:r,...n}){super({callbacks:e??r,...n}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new jt(n??{})}async getNumTokens(e){let r=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await Sa("modelName"in this?rn(this.modelName):"gpt2")}catch{}return this._encoding&&(r=this._encoding.encode(e).length),r}static _convertInputToPromptValue(e){return typeof e=="string"?new pn(e):Array.isArray(e)?new si(e):e}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){let{_type:r,_model:n,...i}=e;if(n&&n!=="base_chat_model")throw new Error(`Cannot load LLM with model ${n}`);let a={openai:(await Promise.resolve().then(()=>(xl(),um))).ChatOpenAI}[r];if(a===void 0)throw new Error(`Cannot load LLM with type ${r}`);return new a(i)}}});var wi,Rs,Ol=M(()=>{l();eh();rt();li();on();an();wi=class t extends Ht{constructor({cache:e,concurrency:r,...n}){super(r?{maxConcurrency:r,...n}:n),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof e=="object"?this.cache=e:e?this.cache=ba.global():this.cache=void 0}async invoke(e,r){let n=t._convertInputToPromptValue(e);return(await this.generatePrompt([n],r,r?.callbacks)).generations[0][0].text}async*_streamResponseChunks(e,r,n){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptions(e){let[r,n]=super._separateRunnableConfigFromCallOptions(e);return n?.timeout&&!n.signal&&(n.signal=AbortSignal.timeout(n.timeout)),[r,n]}async*_streamIterator(e,r){if(this._streamResponseChunks===t.prototype._streamResponseChunks)yield this.invoke(e,r);else{let n=t._convertInputToPromptValue(e),[i,a]=this._separateRunnableConfigFromCallOptions(r),s=await ge.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),o={options:a,invocation_params:this?.invocationParams(a)},u=await s?.handleLLMStart(this.toJSON(),[n.toString()],void 0,void 0,o),c=new St({text:""});try{for await(let d of this._streamResponseChunks(e.toString(),a,u?.[0]))c?c=c.concat(d):c=d,yield d.text}catch(d){throw await Promise.all((u??[]).map(p=>p?.handleLLMError(d))),d}await Promise.all((u??[]).map(d=>d?.handleLLMEnd({generations:[[c]]})))}}async generatePrompt(e,r,n){let i=e.map(a=>a.toString());return this.generate(i,r,n)}invocationParams(e){return{}}_flattenLLMResult(e){let r=[];for(let n=0;n<e.generations.length;n+=1){let i=e.generations[n];if(n===0)r.push({generations:[i],llmOutput:e.llmOutput});else{let a=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;r.push({generations:[i],llmOutput:a})}}return r}async _generateUncached(e,r,n){let i=await ge.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),a={options:r,invocation_params:this?.invocationParams(r)},s=await i?.handleLLMStart(this.toJSON(),e,void 0,void 0,a),o;try{o=await this._generate(e,r,s?.[0])}catch(d){throw await Promise.all((s??[]).map(p=>p?.handleLLMError(d))),d}let u=this._flattenLLMResult(o);await Promise.all((s??[]).map((d,p)=>d?.handleLLMEnd(u[p])));let c=s?.map(d=>d.runId)||void 0;return Object.defineProperty(o,tn,{value:c?{runIds:c}:void 0,configurable:!0}),o}async generate(e,r,n){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let i;Array.isArray(r)?i={stop:r}:i=r;let[a,s]=this._separateRunnableConfigFromCallOptions(i);if(a.callbacks=a.callbacks??n,!this.cache)return this._generateUncached(e,s,a);let{cache:o}=this,u=this.serialize();u.stop=s.stop??u.stop;let c=`${Object.entries(u).sort()}`,d=[],p=await Promise.all(e.map(async(v,m)=>{let x=await o.lookup(v,c);return x||d.push(m),x})),b={};if(d.length>0){let v=await this._generateUncached(d.map(m=>e[m]),s,a);await Promise.all(v.generations.map(async(m,x)=>{let T=d[x];return p[T]=m,o.update(e[T],c,m)})),b=v.llmOutput??{}}return{generations:p,llmOutput:b}}async call(e,r,n){let{generations:i}=await this.generate([e],r,n);return i[0][0].text}async predict(e,r,n){return this.call(e,r,n)}async predictMessages(e,r,n){let i=hr(e),a=await this.call(i,r,n);return new gt(a)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}static async deserialize(e){let{_type:r,_model:n,...i}=e;if(n&&n!=="base_llm")throw new Error(`Cannot load LLM with model ${n}`);let a={openai:(await Promise.resolve().then(()=>(Al(),lm))).OpenAI}[r];if(a===void 0)throw new Error(`Cannot load  LLM with type ${r}`);return new a(i)}},Rs=class extends wi{async _generate(e,r,n){return{generations:await Promise.all(e.map((a,s)=>this._call(a,{...r,promptIndex:s},n).then(o=>[{text:o}])))}}}});var Ms,Nr,Ns,Pl=M(()=>{l();Ms=be(Kr(),1);Tt();Gr();Ol();rt();Za();yi();ni();Nr=class extends Rs{get callKeys(){return[...super.callKeys,"options","promptIndex"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"prefixMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.openAIApiKey??G("OPENAI_API_KEY"),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??G("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??G("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIApiCompletionsDeploymentName||e?.azureOpenAIApiDeploymentName)??(G("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||G("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??G("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??G("AZURE_OPENAI_BASE_PATH"),this.modelName=e?.modelName??this.modelName,this.prefixMessages=e?.prefixMessages??this.prefixMessages,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.maxTokens=e?.maxTokens,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.n>1)throw new Error("Cannot use n > 1 in OpenAIChat LLM. Use ChatOpenAI Chat Model instead.");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:this.openAIApiKey,...r,...e?.configuration}}invocationParams(e){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,logit_bias:this.logitBias,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,stop:e?.stop??this.stop,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}formatMessages(e){let r={role:"user",content:e};return this.prefixMessages?[...this.prefixMessages,r]:[r]}async*_streamResponseChunks(e,r,n){let i={...this.invocationParams(r),messages:this.formatMessages(e),stream:!0},a=this.startStream(i,r);for await(let s of a){let u=JSON.parse(s).choices?.[0];if(!u)continue;let{delta:c}=u,d=new St({text:c.content??""});yield d,n?.handleLLMNewToken(d.text??"")}}startStream(e,r){let n=!1,i=new TransformStream,a=i.writable.getWriter(),s=un(i.readable),o;return this.completionWithRetry(e,{...r,adapter:Me,responseType:"stream",onmessage:u=>{if(!n)if(u.data?.trim?.()==="[DONE]")n=!0,a.close();else{let c=JSON.parse(u.data);if(c.error)throw n=!0,c.error;a.write(u.data)}}}).catch(u=>{n||(o=u,n=!0,a.close())}),{async next(){let u=await s.next();if(o)throw o;return u},[Symbol.asyncIterator](){return this}}}async _call(e,r,n){let i=this.invocationParams(r);return(i.stream?await new Promise((s,o)=>{let u,c=!1,d=!1;this.completionWithRetry({...i,messages:this.formatMessages(e)},{signal:r.signal,...r.options,adapter:Me,responseType:"stream",onmessage:p=>{if(p.data?.trim?.()==="[DONE]"){if(d||c)return;d=!0,s(u)}else{let b=JSON.parse(p.data);if(b?.error){if(c)return;c=!0,o(b.error);return}let v=b;u||(u={id:v.id,object:v.object,created:v.created,model:v.model,choices:[]});for(let m of v.choices)if(m!=null){let x=u.choices.find(T=>T.index===m.index);x||(x={index:m.index,finish_reason:m.finish_reason??void 0},u.choices.push(x)),x.message||(x.message={role:m.delta?.role,content:m.delta?.content??""}),x.message.content+=m.delta?.content??"",n?.handleLLMNewToken(m.delta?.content??"",{prompt:r.promptIndex??0,completion:m.index})}!d&&!c&&v.choices.every(m=>m.finish_reason!=null)&&(d=!0,s(u))}}}).catch(p=>{c||(c=!0,o(p))})}):await this.completionWithRetry({...i,messages:this.formatMessages(e)},{signal:r.signal,...r.options})).choices[0].message?.content??""}async completionWithRetry(e,r){if(!this.client){let i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},a=tr(i),s=new Ms.Configuration({...this.clientConfig,basePath:a,baseOptions:{timeout:this.timeout,...this.clientConfig.baseOptions}});this.client=new Ms.OpenAIApi(s)}let n={adapter:Et()?void 0:Me,...this.clientConfig.baseOptions,...r};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.params={"api-version":this.azureOpenAIApiVersion,...n.params}),this.caller.call(this.client.createChatCompletion.bind(this.client),e,n).then(i=>i.data)}_llmType(){return"openai"}},Ns=class extends Nr{get lc_secrets(){return{promptLayerApiKey:"PROMPTLAYER_API_KEY"}}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plTags=e?.plTags??[],this.returnPromptLayerId=e?.returnPromptLayerId??!1,this.promptLayerApiKey=e?.promptLayerApiKey??G("PROMPTLAYER_API_KEY"),!this.promptLayerApiKey)throw new Error("Missing PromptLayer API key")}async completionWithRetry(e,r){return e.stream?super.completionWithRetry(e,r):await super.completionWithRetry(e)}async _generate(e,r,n){let i;return{generations:await Promise.all(e.map(async s=>{let o=Date.now(),u=await this._call(s,r,n),c=Date.now();i=[{text:u}];let d={text:u},p=await hn(this.caller,"langchain.PromptLayerOpenAIChat",[s],this._identifyingParams(),this.plTags,d,o,c,this.promptLayerApiKey);return this.returnPromptLayerId===!0&&p.success===!0&&(i[0].generationInfo={promptLayerRequestId:p.request_id}),i}))}}}});var lm={};ut(lm,{OpenAI:()=>Cn,OpenAIChat:()=>Nr,PromptLayerOpenAI:()=>El,PromptLayerOpenAIChat:()=>Ns});var Ls,Cn,El,Al=M(()=>{l();Ls=be(Kr(),1);Tt();Gr();Ou();Ol();Xn();Pl();rt();Za();yi();ni();Pl();Cn=class extends wi{get callKeys(){return[...super.callKeys,"options"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,r){if(e?.modelName?.startsWith("gpt-3.5-turbo")||e?.modelName?.startsWith("gpt-4")||e?.modelName?.startsWith("gpt-4-32k"))return new Nr(e,r);if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:256}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"bestOf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-davinci-003"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.openAIApiKey??G("OPENAI_API_KEY"),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??G("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??G("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIApiCompletionsDeploymentName||e?.azureOpenAIApiDeploymentName)??(G("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||G("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??G("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??G("AZURE_OPENAI_BASE_PATH"),this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.batchSize=e?.batchSize??this.batchSize,this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.maxTokens=e?.maxTokens??this.maxTokens,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.bestOf=e?.bestOf??this.bestOf,this.logitBias=e?.logitBias,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.streaming&&this.bestOf&&this.bestOf>1)throw new Error("Cannot stream results when bestOf > 1");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:this.openAIApiKey,...r,...e?.configuration}}invocationParams(e){return{model:this.modelName,temperature:this.temperature,max_tokens:this.maxTokens,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,best_of:this.bestOf,logit_bias:this.logitBias,stop:e?.stop??this.stop,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}async _generate(e,r,n){let i=Wn(e,this.batchSize),a=[],s={},o=this.invocationParams(r);if(o.max_tokens===-1){if(e.length!==1)throw new Error("max_tokens set to -1 not supported for multiple inputs");o.max_tokens=await qu({prompt:e[0],modelName:this.modelName})}for(let c=0;c<i.length;c+=1){let d=o.stream?await new Promise((m,x)=>{let T=[],k,S=!1,V=!1;this.completionWithRetry({...o,prompt:i[c]},{signal:r.signal,...r.options,adapter:Me,responseType:"stream",onmessage:O=>{if(O.data?.trim?.()==="[DONE]"){if(V||S)return;V=!0,m({...k,choices:T})}else{let R=JSON.parse(O.data);if(R?.error){if(S)return;S=!0,x(R.error);return}let g=R;k||(k={id:g.id,object:g.object,created:g.created,model:g.model});for(let _ of g.choices)if(_!=null&&_.index!=null){T[_.index]||(T[_.index]={});let y=T[_.index];y.text=(y.text??"")+(_.text??""),y.finish_reason=_.finish_reason,y.logprobs=_.logprobs,n?.handleLLMNewToken(_.text??"",{prompt:Math.floor(_.index/this.n),completion:_.index%this.n})}!V&&!S&&T.every(_=>_.finish_reason!=null)&&(V=!0,m({...k,choices:T}))}}}).catch(O=>{S||(S=!0,x(O))})}):await this.completionWithRetry({...o,prompt:i[c]},{signal:r.signal,...r.options});a.push(...d.choices);let{completion_tokens:p,prompt_tokens:b,total_tokens:v}=d.usage??{};p&&(s.completionTokens=(s.completionTokens??0)+p),b&&(s.promptTokens=(s.promptTokens??0)+b),v&&(s.totalTokens=(s.totalTokens??0)+v)}return{generations:Wn(a,this.n).map(c=>c.map(d=>({text:d.text??"",generationInfo:{finishReason:d.finish_reason,logprobs:d.logprobs}}))),llmOutput:{tokenUsage:s}}}async*_streamResponseChunks(e,r,n){let i={...this.invocationParams(r),prompt:e,stream:!0},a=this.startStream(i,r);for await(let s of a){let u=JSON.parse(s).choices?.[0];if(!u)continue;let c=new St({text:u.text,generationInfo:{finishReason:u.finish_reason,logprobs:u.logprobs}});yield c,n?.handleLLMNewToken(c.text??"")}}startStream(e,r){let n=!1,i=new TransformStream,a=i.writable.getWriter(),s=un(i.readable),o;return this.completionWithRetry(e,{...r,adapter:Me,responseType:"stream",onmessage:u=>{if(!n)if(u.data?.trim?.()==="[DONE]")n=!0,a.close();else{let c=JSON.parse(u.data);if(c.error)throw n=!0,c.error;a.write(u.data)}}}).catch(u=>{n||(o=u,n=!0,a.close())}),{async next(){let u=await s.next();if(o)throw o;return u},[Symbol.asyncIterator](){return this}}}async completionWithRetry(e,r){if(!this.client){let i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},a=tr(i),s=new Ls.Configuration({...this.clientConfig,basePath:a,baseOptions:{timeout:this.timeout,...this.clientConfig.baseOptions}});this.client=new Ls.OpenAIApi(s)}let n={adapter:Et()?void 0:Me,...this.clientConfig.baseOptions,...r};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.params={"api-version":this.azureOpenAIApiVersion,...n.params}),this.caller.call(this.client.createCompletion.bind(this.client),e,n).then(i=>i.data)}_llmType(){return"openai"}},El=class extends Cn{get lc_secrets(){return{promptLayerApiKey:"PROMPTLAYER_API_KEY"}}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plTags=e?.plTags??[],this.promptLayerApiKey=e?.promptLayerApiKey??G("PROMPTLAYER_API_KEY"),this.returnPromptLayerId=e?.returnPromptLayerId,!this.promptLayerApiKey)throw new Error("Missing PromptLayer API key")}async completionWithRetry(e,r){return e.stream?super.completionWithRetry(e,r):await super.completionWithRetry(e)}async _generate(e,r,n){let i=Date.now(),a=await super._generate(e,r,n);for(let s=0;s<a.generations.length;s+=1){let o=Date.now(),u={text:a.generations[s][0].text,llm_output:a.llmOutput},c=await hn(this.caller,"langchain.PromptLayerOpenAI",[e[s]],this._identifyingParams(),this.plTags,u,i,o,this.promptLayerApiKey),d;this.returnPromptLayerId===!0&&(c&&c.success===!0&&(d=c.request_id),a.generations[s][0].generationInfo={...a.generations[s][0].generationInfo,promptLayerRequestId:d})}return a}}});var dm=L((GD,cm)=>{l();cm.exports=function(t,e,r,n,i){var a,s;if(n===void 0)n=0;else if(n=n|0,n<0||n>=t.length)throw new RangeError("invalid lower bound");if(i===void 0)i=t.length-1;else if(i=i|0,i<n||i>=t.length)throw new RangeError("invalid upper bound");for(;n<=i;)if(a=n+(i-n>>>1),s=+r(t[a],e,a,t),s<0)n=a+1;else if(s>0)i=a-1;else return a;return~n}});var pm=L(Tl=>{"use strict";l();function $s(t){if(typeof t!="number")throw new TypeError("Expected a number")}Tl.ascending=(t,e)=>($s(t),$s(e),Number.isNaN(t)?-1:Number.isNaN(e)?1:t-e);Tl.descending=(t,e)=>($s(t),$s(e),Number.isNaN(t)?1:Number.isNaN(e)?-1:e-t)});var Dt,Ys=M(()=>{l();Dt=class{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent?e.pageContent.toString():this.pageContent,this.metadata=e.metadata??{}}}});var ro,Pi,Ei=M(()=>{l();ln();ro=class extends Ie{parseResultWithPrompt(e,r,n){return this.parseResult(e,n)}async invoke(e,r){return typeof e=="string"?this._callWithConfig(async n=>this.parseResult([{text:n}]),e,{...r,runType:"parser"}):this._callWithConfig(async n=>this.parseResult([{message:n,text:n.content}]),e,{...r,runType:"parser"})}},Pi=class extends ro{parseResult(e,r){return this.parse(e[0].text,r)}async parseWithPrompt(e,r,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}}});var no,gm=M(()=>{l();Ei();no=class extends Pi{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}});var bm={};ut(bm,{LLMChain:()=>se});var se,qe=M(()=>{l();Fe();_t();li();gm();se=class t extends le{get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??new no,this.prompt.outputParser){if(e.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}_selectMemoryInputs(e){let r=super._selectMemoryInputs(e);for(let n of this.llm.callKeys)n in e&&delete r[n];return r}async _getFinalOutput(e,r,n){let i;return this.outputParser?i=await this.outputParser.parseResultWithPrompt(e,r,n?.getChild()):i=e[0].text,i}call(e,r){return super.call(e,r)}async _call(e,r){let n={...e},i={...this.llmKwargs};for(let o of this.llm.callKeys)o in e&&(i[o]=e[o],delete n[o]);let a=await this.prompt.formatPromptValue(n),{generations:s}=await this.llm.generatePrompt([a],i,r?.getChild());return{[this.outputKey]:await this._getFinalOutput(s[0],a,r)}}async predict(e,r){return(await this.call(e,r))[this.outputKey]}_chainType(){return"llm"}static async deserialize(e){let{llm:r,prompt:n}=e;if(!r)throw new Error("LLMChain must have llm");if(!n)throw new Error("LLMChain must have prompt");return new t({llm:await Ht.deserialize(r),prompt:await kt.deserialize(n)})}serialize(){return{_type:`${this._chainType()}_chain`,llm:this.llm.serialize(),prompt:this.prompt.serialize()}}}});function ql(t,e){let r=new Set;for(let n of e)t.has(n)&&r.add(n);return r}function wm(t,e){let r=new Set(t);for(let n of e)r.add(n);return r}function Ti(t,e){let r=new Set(t);for(let n of e)r.delete(n);return r}var _m=M(()=>{l()});var Fl={};ut(Fl,{SequentialChain:()=>Ii,SimpleSequentialChain:()=>io});function Ci(t){return Array.from(t).map(e=>`"${e}"`).join(", ")}var Ii,io,Si=M(()=>{l();Fe();_m();Ii=class t extends le{get inputKeys(){return this.inputVariables}get outputKeys(){return this.outputVariables}constructor(e){if(super(e),Object.defineProperty(this,"chains",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chains=e.chains,this.inputVariables=e.inputVariables,this.outputVariables=e.outputVariables??[],this.outputVariables.length>0&&e.returnAll)throw new Error("Either specify variables to return using `outputVariables` or use `returnAll` param. Cannot apply both conditions at the same time.");this.returnAll=e.returnAll??!1,this._validateChains()}_validateChains(){if(this.chains.length===0)throw new Error("Sequential chain must have at least one chain.");let e=this.memory?.memoryKeys??[],r=new Set(this.inputKeys),n=new Set(e),i=ql(r,n);if(i.size>0)throw new Error(`The following keys: ${Ci(i)} are overlapping between memory and input keys of the chain variables. This can lead to unexpected behaviour. Please use input and memory keys that don't overlap.`);let a=wm(r,n);for(let s of this.chains){let o=Ti(new Set(s.inputKeys),a);if(s.memory&&(o=Ti(o,new Set(s.memory.memoryKeys))),o.size>0)throw new Error(`Missing variables for chain "${s._chainType()}": ${Ci(o)}. Only got the following variables: ${Ci(a)}.`);let u=new Set(s.outputKeys),c=ql(a,u);if(c.size>0)throw new Error(`The following output variables for chain "${s._chainType()}" are overlapping: ${Ci(c)}. This can lead to unexpected behaviour.`);for(let d of u)a.add(d)}if(this.outputVariables.length===0)if(this.returnAll){let s=Ti(a,r);this.outputVariables=Array.from(s)}else this.outputVariables=this.chains[this.chains.length-1].outputKeys;else{let s=Ti(new Set(this.outputVariables),new Set(a));if(s.size>0)throw new Error(`The following output variables were expected to be in the final chain output but were not found: ${Ci(s)}.`)}}async _call(e,r){let n={},i=e,a=0;for(let o of this.chains){a+=1,n=await o.call(i,r?.getChild(`step_${a}`));for(let u of Object.keys(n))i[u]=n[u]}let s={};for(let o of this.outputVariables)s[o]=i[o];return s}_chainType(){return"sequential_chain"}static async deserialize(e){let r=[],n=e.input_variables,i=e.output_variables,a=e.chains;for(let s of a){let o=await le.deserialize(s);r.push(o)}return new t({chains:r,inputVariables:n,outputVariables:i})}serialize(){let e=[];for(let r of this.chains)e.push(r.serialize());return{_type:this._chainType(),input_variables:this.inputVariables,output_variables:this.outputVariables,chains:e}}},io=class t extends le{get inputKeys(){return[this.inputKey]}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"chains",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output"}),Object.defineProperty(this,"trimOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chains=e.chains,this.trimOutputs=e.trimOutputs??!1,this._validateChains()}_validateChains(){for(let e of this.chains){if(e.inputKeys.filter(r=>!e.memory?.memoryKeys.includes(r)).length!==1)throw new Error(`Chains used in SimpleSequentialChain should all have one input, got ${e.inputKeys.length} for ${e._chainType()}.`);if(e.outputKeys.length!==1)throw new Error(`Chains used in SimpleSequentialChain should all have one output, got ${e.outputKeys.length} for ${e._chainType()}.`)}}async _call(e,r){let n=e[this.inputKey],i=0;for(let a of this.chains)i+=1,n=(await a.call({[a.inputKeys[0]]:n,signal:e.signal},r?.getChild(`step_${i}`)))[a.outputKeys[0]],this.trimOutputs&&(n=n.trim()),await r?.handleText(n);return{[this.outputKey]:n}}_chainType(){return"simple_sequential_chain"}static async deserialize(e){let r=[],n=e.chains;for(let i of n){let a=await le.deserialize(i);r.push(a)}return new t({chains:r})}serialize(){let e=[];for(let r of this.chains)e.push(r.serialize());return{_type:this._chainType(),chains:e}}}});var ao={};ut(ao,{MapReduceDocumentsChain:()=>Mr,RefineDocumentsChain:()=>rr,StuffDocumentsChain:()=>Ot});var Ot,Mr,rr,Lr=M(()=>{l();Fe();qe();ve();Ot=class t extends le{get inputKeys(){return[this.inputKey,...this.llmChain.inputKeys].filter(e=>e!==this.documentVariableName)}get outputKeys(){return this.llmChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),this.llmChain=e.llmChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey}_prepInputs(e){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let{[this.inputKey]:r,...n}=e,a=r.map(({pageContent:s})=>s).join(`

`);return{...n,[this.documentVariableName]:a}}async _call(e,r){return await this.llmChain.call(this._prepInputs(e),r?.getChild("combine_documents"))}_chainType(){return"stuff_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");return new t({llmChain:await se.deserialize(e.llm_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize()}}},Mr=class t extends le{get inputKeys(){return[this.inputKey,...this.combineDocumentChain.inputKeys]}get outputKeys(){return this.combineDocumentChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"returnIntermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"maxIterations",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"ensureMapStep",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"combineDocumentChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmChain=e.llmChain,this.combineDocumentChain=e.combineDocumentChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.ensureMapStep=e.ensureMapStep??this.ensureMapStep,this.inputKey=e.inputKey??this.inputKey,this.maxTokens=e.maxTokens??this.maxTokens,this.maxIterations=e.maxIterations??this.maxIterations,this.returnIntermediateSteps=e.returnIntermediateSteps??!1}async _call(e,r){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let{[this.inputKey]:n,...i}=e,a=n,s=[];for(let c=0;c<this.maxIterations;c+=1){let d=a.map(m=>({[this.documentVariableName]:m.pageContent,...i}));if(c!==0||!this.ensureMapStep){let m=await this.combineDocumentChain.llmChain.prompt.format(this.combineDocumentChain._prepInputs({[this.combineDocumentChain.inputKey]:a,...i}));if(await this.combineDocumentChain.llmChain.llm.getNumTokens(m)<this.maxTokens)break}let b=await this.llmChain.apply(d,r?Array.from({length:d.length},(m,x)=>r.getChild(`map_${x+1}`)):void 0),{outputKey:v}=this.llmChain;this.returnIntermediateSteps&&(s=s.concat(b.map(m=>m[v]))),a=b.map(m=>({pageContent:m[v],metadata:{}}))}let o={[this.combineDocumentChain.inputKey]:a,...i},u=await this.combineDocumentChain.call(o,r?.getChild("combine_documents"));return this.returnIntermediateSteps?{...u,intermediateSteps:s}:u}_chainType(){return"map_reduce_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");if(!e.combine_document_chain)throw new Error("Missing combine_document_chain");return new t({llmChain:await se.deserialize(e.llm_chain),combineDocumentChain:await Ot.deserialize(e.combine_document_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),combine_document_chain:this.combineDocumentChain.serialize()}}},rr=class t extends le{get defaultDocumentPrompt(){return new ae({inputVariables:["page_content"],template:"{page_content}"})}get inputKeys(){return[...new Set([this.inputKey,...this.llmChain.inputKeys,...this.refineLLMChain.inputKeys])].filter(e=>e!==this.documentVariableName&&e!==this.initialResponseName)}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output_text"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"initialResponseName",{enumerable:!0,configurable:!0,writable:!0,value:"existing_answer"}),Object.defineProperty(this,"refineLLMChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"documentPrompt",{enumerable:!0,configurable:!0,writable:!0,value:this.defaultDocumentPrompt}),this.llmChain=e.llmChain,this.refineLLMChain=e.refineLLMChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.documentPrompt=e.documentPrompt??this.documentPrompt,this.initialResponseName=e.initialResponseName??this.initialResponseName}async _constructInitialInputs(e,r){let n={page_content:e.pageContent,...e.metadata},i={};return this.documentPrompt.inputVariables.forEach(o=>{i[o]=n[o]}),{...{[this.documentVariableName]:await this.documentPrompt.format({...i})},...r}}async _constructRefineInputs(e,r){let n={page_content:e.pageContent,...e.metadata},i={};this.documentPrompt.inputVariables.forEach(o=>{i[o]=n[o]});let a={[this.documentVariableName]:await this.documentPrompt.format({...i})};return{[this.initialResponseName]:r,...a}}async _call(e,r){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let{[this.inputKey]:n,...i}=e,a=n,s=await this._constructInitialInputs(a[0],i),o=await this.llmChain.predict({...s},r?.getChild("answer")),u=[o];for(let c=1;c<a.length;c+=1){let p={...await this._constructRefineInputs(a[c],o),...i};o=await this.refineLLMChain.predict({...p},r?.getChild("refine")),u.push(o)}return{[this.outputKey]:o}}_chainType(){return"refine_documents_chain"}static async deserialize(e){let r=e.llm_chain;if(!r)throw new Error("Missing llm_chain");let n=e.refine_llm_chain;if(!n)throw new Error("Missing refine_llm_chain");return new t({llmChain:await se.deserialize(r),refineLLMChain:await se.deserialize(n)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),refine_llm_chain:this.refineLLMChain.serialize()}}}});function Dr(t){return t._modelType()==="base_chat_model"}var so,qt,ji=M(()=>{l();so=class{async getPromptAsync(e,r){return this.getPrompt(e).partial(r?.partialVariables??{})}},qt=class extends so{constructor(e,r=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=r}getPrompt(e){for(let[r,n]of this.conditionals)if(r(e))return n;return this.defaultPrompt}}});var Y0,W0,G0,Q0,vm,xm=M(()=>{l();ve();yr();ji();Y0=new ae({template:`Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.

{context}

Question: {question}
Helpful Answer:`,inputVariables:["context","question"]}),W0=`Use the following pieces of context to answer the users question. 
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}`,G0=[Zt.fromTemplate(W0),dt.fromTemplate("{question}")],Q0=pt.fromPromptMessages(G0),vm=new qt(Y0,[[Dr,Q0]])});var Om=M(()=>{l();ve();yr();ji()});var Pm=M(()=>{l();_t()});var Em=M(()=>{l();Ys();_t()});var Tm=M(()=>{l();_t();yr()});var Cm=M(()=>{l();_t();ve();ji();Pm();Em();za();yr();dn();Tm()});var X0,ex,tx,rx,nx,Im,ix,ax,sx,ox,ux,Sm,jm=M(()=>{l();Cm();ji();X0=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,ex=new ae({inputVariables:["question","existing_answer","context"],template:X0}),tx=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,rx=[dt.fromTemplate("{question}"),ui.fromTemplate("{existing_answer}"),dt.fromTemplate(tx)],nx=pt.fromPromptMessages(rx),Im=new qt(ex,[[Dr,nx]]),ix=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer the question: {question}`,ax=new ae({inputVariables:["context","question"],template:ix}),sx=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer any questions`,ox=[Zt.fromTemplate(sx),dt.fromTemplate("{question}")],ux=pt.fromPromptMessages(ox),Sm=new qt(ax,[[Dr,ux]])});function In(t,e={}){let{prompt:r=vm.getPrompt(t),verbose:n}=e,i=new se({prompt:r,llm:t,verbose:n});return new Ot({llmChain:i,verbose:n})}function Ul(t,e={}){let{questionPrompt:r=Sm.getPrompt(t),refinePrompt:n=Im.getPrompt(t),verbose:i}=e,a=new se({prompt:r,llm:t,verbose:i}),s=new se({prompt:n,llm:t,verbose:i});return new rr({llmChain:a,refineLLMChain:s,verbose:i})}var Sn=M(()=>{l();qe();Lr();xm();Om();jm()});var km={};ut(km,{VectorDBQAChain:()=>oo});var oo,Vl=M(()=>{l();Fe();Sn();oo=class t extends le{get inputKeys(){return[this.inputKey]}get outputKeys(){return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments?["sourceDocuments"]:[])}constructor(e){super(e),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"query"}),Object.defineProperty(this,"vectorstore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"combineDocumentsChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSourceDocuments",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.vectorstore=e.vectorstore,this.combineDocumentsChain=e.combineDocumentsChain,this.inputKey=e.inputKey??this.inputKey,this.k=e.k??this.k,this.returnSourceDocuments=e.returnSourceDocuments??this.returnSourceDocuments}async _call(e,r){if(!(this.inputKey in e))throw new Error(`Question key ${this.inputKey} not found.`);let n=e[this.inputKey],i=await this.vectorstore.similaritySearch(n,this.k,e.filter,r?.getChild("vectorstore")),a={question:n,input_documents:i},s=await this.combineDocumentsChain.call(a,r?.getChild("combine_documents"));return this.returnSourceDocuments?{...s,sourceDocuments:i}:s}_chainType(){return"vector_db_qa"}static async deserialize(e,r){if(!("vectorstore"in r))throw new Error("Need to pass in a vectorstore to deserialize VectorDBQAChain");let{vectorstore:n}=r;if(!e.combine_documents_chain)throw new Error("VectorDBQAChain must have combine_documents_chain in serialized data");return new t({combineDocumentsChain:await le.deserialize(e.combine_documents_chain),k:e.k,vectorstore:n})}serialize(){return{_type:this._chainType(),combine_documents_chain:this.combineDocumentsChain.serialize(),k:this.k}}static fromLLM(e,r,n){let i=In(e);return new this({vectorstore:r,combineDocumentsChain:i,...n})}}});var Rm,Nm,lx,Mm,Lm=M(()=>{l();ve();Rm=`You are given the below API Documentation:
{api_docs}
Using this documentation, generate the full API url to call for answering the user question.
You should build the API url in order to get a response that is as short as possible, while still getting the necessary information to answer the question. Pay attention to deliberately exclude any unnecessary pieces of data in the API call.

Question:{question}
API url:`,Nm=new ae({inputVariables:["api_docs","question"],template:Rm}),lx=`${Rm} {api_url}

Here is the response from the API:

{api_response}

Summarize this response to answer the original question.

Summary:`,Mm=new ae({inputVariables:["api_docs","question","api_url","api_response"],template:lx})});var Dm={};ut(Dm,{APIChain:()=>uo});var uo,Bl=M(()=>{l();Fe();qe();Lm();uo=class t extends le{get inputKeys(){return[this.inputKey]}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"apiAnswerChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiRequestChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiDocs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"question"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output"}),this.apiRequestChain=e.apiRequestChain,this.apiAnswerChain=e.apiAnswerChain,this.apiDocs=e.apiDocs,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.headers=e.headers??this.headers}async _call(e,r){let n=e[this.inputKey],i=await this.apiRequestChain.predict({question:n,api_docs:this.apiDocs},r?.getChild("request")),s=await(await fetch(i,{headers:this.headers})).text(),o=await this.apiAnswerChain.predict({question:n,api_docs:this.apiDocs,api_url:i,api_response:s},r?.getChild("response"));return{[this.outputKey]:o}}_chainType(){return"api_chain"}static async deserialize(e){let{api_request_chain:r,api_answer_chain:n,api_docs:i}=e;if(!r)throw new Error("LLMChain must have api_request_chain");if(!n)throw new Error("LLMChain must have api_answer_chain");if(!i)throw new Error("LLMChain must have api_docs");return new t({apiAnswerChain:await se.deserialize(n),apiRequestChain:await se.deserialize(r),apiDocs:i})}serialize(){return{_type:this._chainType(),api_answer_chain:this.apiAnswerChain.serialize(),api_request_chain:this.apiRequestChain.serialize(),api_docs:this.apiDocs}}static fromLLMAndAPIDocs(e,r,n={}){let{apiUrlPrompt:i=Nm,apiResponsePrompt:a=Mm}=n,s=new se({prompt:i,llm:e}),o=new se({prompt:a,llm:e});return new this({apiAnswerChain:o,apiRequestChain:s,apiDocs:r,...n})}}});var le,Fe=M(()=>{l();rt();on();li();le=class extends bi{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,r,n){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){let{memory:i,callbackManager:a,...s}=e;super({...s,callbacks:a??s.callbacks}),this.memory=i}else super({verbose:r,callbacks:n}),this.memory=e}_selectMemoryInputs(e){let r={...e};return"signal"in r&&delete r.signal,"timeout"in r&&delete r.timeout,r}async invoke(e,r){return this.call(e,r)}serialize(){throw new Error("Method not implemented.")}async run(e,r){let n=this.inputKeys.filter(u=>!this.memory?.memoryKeys.includes(u));if(!(n.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);let a=n.length?{[n[0]]:e}:{},s=await this.call(a,r),o=Object.keys(s);if(o.length===1)return s[o[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async _formatValues(e){let r={...e};if(r.timeout&&!r.signal&&(r.signal=AbortSignal.timeout(r.timeout),delete r.timeout),this.memory!=null){let n=await this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(let[i,a]of Object.entries(n))r[i]=a}return r}async call(e,r,n){let i=await this._formatValues(e),a=Va(r),o=await(await ge.configure(a.callbacks,this.callbacks,a.tags||n,this.tags,a.metadata,this.metadata,{verbose:this.verbose}))?.handleChainStart(this.toJSON(),i),u;try{u=await(e.signal?Promise.race([this._call(i,o),new Promise((c,d)=>{e.signal?.addEventListener("abort",()=>{d(new Error("AbortError"))})})]):this._call(i,o))}catch(c){throw await o?.handleChainError(c),c}return this.memory!=null&&await this.memory.saveContext(this._selectMemoryInputs(e),u),await o?.handleChainEnd(u),Object.defineProperty(u,tn,{value:o?{runId:o?.runId}:void 0,configurable:!0}),u}async apply(e,r){return Promise.all(e.map(async(n,i)=>this.call(n,r?.[i])))}static async deserialize(e,r={}){switch(e._type){case"llm_chain":{let{LLMChain:n}=await Promise.resolve().then(()=>(qe(),bm));return n.deserialize(e)}case"sequential_chain":{let{SequentialChain:n}=await Promise.resolve().then(()=>(Si(),Fl));return n.deserialize(e)}case"simple_sequential_chain":{let{SimpleSequentialChain:n}=await Promise.resolve().then(()=>(Si(),Fl));return n.deserialize(e)}case"stuff_documents_chain":{let{StuffDocumentsChain:n}=await Promise.resolve().then(()=>(Lr(),ao));return n.deserialize(e)}case"map_reduce_documents_chain":{let{MapReduceDocumentsChain:n}=await Promise.resolve().then(()=>(Lr(),ao));return n.deserialize(e)}case"refine_documents_chain":{let{RefineDocumentsChain:n}=await Promise.resolve().then(()=>(Lr(),ao));return n.deserialize(e)}case"vector_db_qa":{let{VectorDBQAChain:n}=await Promise.resolve().then(()=>(Vl(),km));return n.deserialize(e,r)}case"api_chain":{let{APIChain:n}=await Promise.resolve().then(()=>(Bl(),Dm));return n.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}});l();l();Al();l();l();l();l();l();l();l();l();l();l();l();l();l();function Ds(t,e){let r=0,n=0;for(let i=0;i<t.length;i++)r+=Math.min(t[i],e[i]),n+=t[i]+e[i];return 2*r/n}l();function qs(t,e){let r=0,n=0,i=0;for(let a=0;a<t.length;a++)r+=t[a]*t[a],n+=e[a]*e[a],i+=(t[a]-e[a])*(t[a]-e[a]);return i/(r+n)}l();l();l();l();l();l();l();function Fs(t,e){let r=0;for(let n=0;n<t.length;n++)r+=Math.min(t[n],e[n]);return 1-r}l();l();function Us(t,e){let r=0,n=0,i=0;for(let a=0;a<t.length;a++)r+=t[a]*e[a],n+=t[a]*t[a],i+=e[a]*e[a];return r/(n+i-r)}l();l();l();l();l();function Vs(t,e){let r=0,n=0;for(let i=0;i<t.length;i++)r+=Math.abs(t[i]-e[i]),n+=Math.min(t[i],e[i]);return r/n}l();l();l();l();l();l();l();function Bs(t,e){let r=0,n=0;for(let i=0;i<t.length;i++)r+=Math.min(t[i],e[i]),n+=t[i]+e[i];return 1-r/n}l();l();l();l();l();l();l();l();function zs(t,e){let r=0;for(let n=0;n<t.length;n++)r+=(Math.sqrt(t[n])-Math.sqrt(e[n]))**2;return r}l();l();l();function Ks(t,e,r){if(r){let n=0,i=0;for(let a=0;a<t.length;a++)n+=t[a]&&e[a],i+=t[a]||e[a];return i===0?1:n/i}else{let n=0,i=0,a=0;for(let s=0;s<t.length;s++)n+=t[s],i+=e[s],a+=Math.min(t[s],e[s]);return 1-(n+i-2*a)/(n+i-a)}}l();l();var Zs={};ut(Zs,{cosine:()=>Oi,czekanowski:()=>Ds,dice:()=>Sl,intersection:()=>jl,kulczynski:()=>kl,kumarHassebrook:()=>Us,motyka:()=>Rl,pearson:()=>Ml,squaredChord:()=>Ll,tanimoto:()=>Ks,tree:()=>Il});l();var Il={};ut(Il,{createTree:()=>vi,getFunction:()=>H0,treeSimilarity:()=>Z0});l();l();l();var hm=be(dm()),fm=be(pm());function vi(t,e={}){var r=t[0];let{minWindow:n=.16,threshold:i=.01,from:a=r[0],to:s=r[r.length-1]}=e;return _i(t[0],t[1],a,s,n,i)}function _i(t,e,r,n,i,a){if(n-r<i)return null;var s=(0,hm.default)(t,r,fm.ascending);s<0&&(s=~s);for(var o=0,u=0,c=s;c<t.length&&!(t[c]>=n);c++)o+=e[c],u+=t[c]*e[c];return o<a||(u/=o,u-r<1e-6||n-u<1e-6)?null:u-r<i/4?_i(t,e,u,n,i,a):n-u<i/4?_i(t,e,r,u,i,a):new Cl(o,u,_i(t,e,r,u,i,a),_i(t,e,u,n,i,a))}var Cl=class{constructor(e,r,n,i){this.sum=e,this.center=r,this.left=n,this.right=i}};function xi(t,e,r={}){let{alpha:n=.1,beta:i=.33,gamma:a=.001}=r;if(t===null||e===null)return 0;Array.isArray(t)&&(t=vi(t)),Array.isArray(e)&&(e=vi(e));var s=n*Math.min(t.sum,e.sum)/Math.max(t.sum,e.sum)+(1-n)*Math.exp(-a*Math.abs(t.center-e.center));return i*s+(1-i)*(xi(t.left,e.left,r)+xi(t.right,e.right,r))/2}function Z0(t,e,r={}){return xi(t,e,r)}function H0(t={}){return(e,r)=>xi(e,r,t)}l();function Oi(t,e){let r=0,n=0,i=0;for(let a=0;a<t.length;a++)r+=t[a]*e[a],n+=t[a]*t[a],i+=e[a]*e[a];return r/(Math.sqrt(n)*Math.sqrt(i))}l();function Sl(t,e){return 1-qs(t,e)}l();function jl(t,e){return 1-Fs(t,e)}l();function kl(t,e){return 1/Vs(t,e)}l();function Rl(t,e){return 1-Bs(t,e)}l();l();l();l();var J0=Object.prototype.toString;function mm(t){let e=J0.call(t);return e.endsWith("Array]")&&!e.includes("Big")}function ym(t){if(!mm(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");for(var e=0,r=0;r<t.length;r++)e+=t[r];return e}function Nl(t){return ym(t)/t.length}function Ml(t,e){let r=Nl(t),n=Nl(e),i=new Array(t.length),a=new Array(e.length);for(let s=0;s<i.length;s++)i[s]=t[s]-r,a[s]=e[s]-n;return Oi(i,a)}l();function Ll(t,e){return 1-zs(t,e)}l();l();on();ln();var Hs=class extends Ie{constructor(e){super(e),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callbacks=e?.callbacks,this.tags=e?.tags??[],this.metadata=e?.metadata??{},this.verbose=e?.verbose??!1}_getRelevantDocuments(e,r){throw new Error("Not implemented!")}async invoke(e,r){return this.getRelevantDocuments(e,r)}async getRelevantDocuments(e,r){let n=Va(r),a=await(await ge.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}))?.handleRetrieverStart(this.toJSON(),e);try{let s=await this._getRelevantDocuments(e,a);return await a?.handleRetrieverEnd(s),s}catch(s){throw await a?.handleRetrieverError(s),s}}};or();var Ai=class extends Hs{get lc_namespace(){return["langchain","retrievers","base"]}_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){super(e),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"searchType",{enumerable:!0,configurable:!0,writable:!0,value:"similarity"}),Object.defineProperty(this,"searchKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.searchType=e.searchType??this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}async _getRelevantDocuments(e,r){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,{k:this.k,filter:this.filter,...this.searchKwargs},r?.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,r?.getChild("vectorstore"))}async addDocuments(e,r){return this.vectorStore.addDocuments(e,r)}},Js=class extends Ke{constructor(e,r){super(r),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","vectorstores",this._vectorstoreType()]}),Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}async delete(e){throw new Error("Not implemented.")}async similaritySearch(e,r=4,n=void 0,i=void 0){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),r,n)).map(s=>s[0])}async similaritySearchWithScore(e,r=4,n=void 0,i=void 0){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),r,n)}static fromTexts(e,r,n,i){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,r,n){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,r,n,i,a,s){if(typeof e=="number")return new Ai({vectorStore:this,k:e,filter:r,tags:[...i??[],this._vectorstoreType()],metadata:a,verbose:s,callbacks:n});{let o={vectorStore:this,k:e?.k,filter:e?.filter,tags:[...e?.tags??[],this._vectorstoreType()],metadata:e?.metadata,verbose:e?.verbose,callbacks:e?.callbacks,searchType:e?.searchType};return e?.searchType==="mmr"?new Ai({...o,searchKwargs:e.searchKwargs}):new Ai({...o})}}};Ys();var Ws=class t extends Js{_vectorstoreType(){return"memory"}constructor(e,{similarity:r,...n}={}){super(e,n),Object.defineProperty(this,"memoryVectors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"similarity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.similarity=r??Zs.cosine}async addDocuments(e){let r=e.map(({pageContent:n})=>n);return this.addVectors(await this.embeddings.embedDocuments(r),e)}async addVectors(e,r){let n=e.map((i,a)=>({content:r[a].pageContent,embedding:i,metadata:r[a].metadata}));this.memoryVectors=this.memoryVectors.concat(n)}async similaritySearchVectorWithScore(e,r,n){let i=u=>{if(!n)return!0;let c=new Dt({metadata:u.metadata,pageContent:u.content});return n(c)},a=this.memoryVectors.filter(i);return a.map((u,c)=>({similarity:this.similarity(e,u.embedding),index:c})).sort((u,c)=>u.similarity>c.similarity?-1:0).slice(0,r).map(u=>[new Dt({metadata:a[u.index].metadata,pageContent:a[u.index].content}),u.similarity])}static async fromTexts(e,r,n,i){let a=[];for(let s=0;s<e.length;s+=1){let o=Array.isArray(r)?r[s]:r,u=new Dt({pageContent:e[s],metadata:o});a.push(u)}return t.fromDocuments(a,n,i)}static async fromDocuments(e,r,n){let i=new this(r,n);return await i.addDocuments(e),i}static async fromExistingIndex(e,r){return new this(e,r)}};l();l();var Xs=be(Kr(),1);Tt();Gr();Ou();l();Qn();var Gs=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new jt(e??{})}};yi();var Qs=class extends Gs{constructor(e,r){super(e??{}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let n=e?.openAIApiKey??G("OPENAI_API_KEY"),i=e?.azureOpenAIApiKey??G("AZURE_OPENAI_API_KEY");if(!i&&!n)throw new Error("OpenAI or Azure OpenAI API key not found");let a=e?.azureOpenAIApiInstanceName??G("AZURE_OPENAI_API_INSTANCE_NAME"),s=(e?.azureOpenAIApiEmbeddingsDeploymentName||e?.azureOpenAIApiDeploymentName)??(G("AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME")||G("AZURE_OPENAI_API_DEPLOYMENT_NAME")),o=e?.azureOpenAIApiVersion??G("AZURE_OPENAI_API_VERSION");if(this.azureOpenAIBasePath=e?.azureOpenAIBasePath??G("AZURE_OPENAI_BASE_PATH"),this.modelName=e?.modelName??this.modelName,this.batchSize=e?.batchSize??(i?1:this.batchSize),this.stripNewLines=e?.stripNewLines??this.stripNewLines,this.timeout=e?.timeout,this.azureOpenAIApiVersion=o,this.azureOpenAIApiKey=i,this.azureOpenAIApiInstanceName=a,this.azureOpenAIApiDeploymentName=s,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:n,...r}}async embedDocuments(e){let r=Wn(this.stripNewLines?e.map(i=>i.replace(/\n/g," ")):e,this.batchSize),n=[];for(let i=0;i<r.length;i+=1){let a=r[i],{data:s}=await this.embeddingWithRetry({model:this.modelName,input:a});for(let o=0;o<a.length;o+=1)n.push(s.data[o].embedding)}return n}async embedQuery(e){let{data:r}=await this.embeddingWithRetry({model:this.modelName,input:this.stripNewLines?e.replace(/\n/g," "):e});return r.data[0].embedding}async embeddingWithRetry(e){if(!this.client){let n={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},i=tr(n),a=new Xs.Configuration({...this.clientConfig,basePath:i,baseOptions:{timeout:this.timeout,adapter:Et()?void 0:Me,...this.clientConfig.baseOptions}});this.client=new Xs.OpenAIApi(a)}let r={};return this.azureOpenAIApiKey&&(r.headers={"api-key":this.azureOpenAIApiKey,...r.headers},r.params={"api-version":this.azureOpenAIApiVersion,...r.params}),this.caller.call(this.client.createEmbedding.bind(this.client),e,r)}};l();l();Ys();ja();l();ln();var eo=class extends Ie{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers"]})}invoke(e,r){return this.transformDocuments(e)}};var Dl=class extends eo{constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chunkSize=e?.chunkSize??this.chunkSize,this.chunkOverlap=e?.chunkOverlap??this.chunkOverlap,this.keepSeparator=e?.keepSeparator??this.keepSeparator,this.lengthFunction=e?.lengthFunction??(r=>r.length),this.chunkOverlap>=this.chunkSize)throw new Error("Cannot have chunkOverlap >= chunkSize")}async transformDocuments(e,r={}){return this.splitDocuments(e,r)}splitOnSeparator(e,r){let n;if(r)if(this.keepSeparator){let i=r.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");n=e.split(new RegExp(`(?=${i})`))}else n=e.split(r);else n=e.split("");return n.filter(i=>i!=="")}async createDocuments(e,r=[],n={}){let i=r.length>0?r:new Array(e.length).fill({}),{chunkHeader:a="",chunkOverlapHeader:s="(cont'd) ",appendChunkOverlapHeader:o=!1}=n,u=new Array;for(let c=0;c<e.length;c+=1){let d=e[c],p=1,b=null;for(let v of await this.splitText(d)){let m=a,x=0;if(b){let V=d.indexOf(v),O=d.indexOf(b)+await this.lengthFunction(b);x=(d.slice(O,V).match(/\n/g)||[]).length,o&&(m+=s)}p+=x;let T=(v.match(/\n/g)||[]).length,k=i[c].loc&&typeof i[c].loc=="object"?{...i[c].loc}:{};k.lines={from:p,to:p+T};let S={...i[c],loc:k};m+=v,u.push(new Dt({pageContent:m,metadata:S})),p+=T,b=v}}return u}async splitDocuments(e,r={}){let n=e.filter(s=>s.pageContent!==void 0),i=n.map(s=>s.pageContent),a=n.map(s=>s.metadata);return this.createDocuments(i,a,r)}joinDocs(e,r){let n=e.join(r).trim();return n===""?null:n}async mergeSplits(e,r){let n=[],i=[],a=0;for(let o of e){let u=await this.lengthFunction(o);if(a+u+(i.length>0?r.length:0)>this.chunkSize&&(a>this.chunkSize,i.length>0)){let c=this.joinDocs(i,r);for(c!==null&&n.push(c);a>this.chunkOverlap||a+u>this.chunkSize&&a>0;)a-=await this.lengthFunction(i[0]),i.shift()}i.push(o),a+=u}let s=this.joinDocs(i,r);return s!==null&&n.push(s),n}};var to=class extends Dl{constructor(e){super(e),Object.defineProperty(this,"encodingName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allowedSpecial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disallowedSpecial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tokenizer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.encodingName=e?.encodingName??"gpt2",this.allowedSpecial=e?.allowedSpecial??[],this.disallowedSpecial=e?.disallowedSpecial??"all"}async splitText(e){this.tokenizer||(this.tokenizer=await Du(this.encodingName));let r=[],n=this.tokenizer.encode(e,this.allowedSpecial,this.disallowedSpecial),i=0,a=Math.min(i+this.chunkSize,n.length),s=n.slice(i,a);for(;i<n.length;)r.push(this.tokenizer.decode(s)),i+=this.chunkSize-this.chunkOverlap,a=Math.min(i+this.chunkSize,n.length),s=n.slice(i,a);return r}};l();l();Fe();qe();Bl();l();qe();ve();l();an();l();an();l();rt();Si();Lr();l();ve();Fe();qe();Sn();l();Fe();Vl();Sn();l();qe();Lr();l();ve();var cx=`Write a concise summary of the following:


"{text}"


CONCISE SUMMARY:`,ki=new ae({template:cx,inputVariables:["text"]});l();ve();var dx=`Your job is to produce a final summary
We have provided an existing summary up to a certain point: "{existing_answer}"
We have the opportunity to refine the existing summary
(only if needed) with some more context below.
------------
"{text}"
------------

Given the new context, refine the original summary
If the context isn't useful, return the original summary.

REFINED SUMMARY:`,qm=new ae({template:dx,inputVariables:["existing_answer","text"]});var zl=(t,e={type:"map_reduce"})=>{let{verbose:r}=e;if(e.type==="stuff"){let{prompt:n=ki}=e,i=new se({prompt:n,llm:t,verbose:r});return new Ot({llmChain:i,documentVariableName:"text",verbose:r})}if(e.type==="map_reduce"){let{combineMapPrompt:n=ki,combinePrompt:i=ki,returnIntermediateSteps:a}=e,s=new se({prompt:n,llm:t,verbose:r}),o=new se({prompt:i,llm:t,verbose:r}),u=new Ot({llmChain:o,documentVariableName:"text",verbose:r});return new Mr({llmChain:s,combineDocumentChain:u,documentVariableName:"text",returnIntermediateSteps:a,verbose:r})}if(e.type==="refine"){let{refinePrompt:n=qm,questionPrompt:i=ki}=e,a=new se({prompt:i,llm:t,verbose:r}),s=new se({prompt:n,llm:t,verbose:r});return new rr({llmChain:a,refineLLMChain:s,documentVariableName:"text",verbose:r})}throw new Error(`Invalid _type: ${e.type}`)};l();ve();rt();Fe();qe();Sn();l();Fe();Sn();var jn=class extends le{get inputKeys(){return[this.inputKey]}get outputKeys(){return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments?["sourceDocuments"]:[])}constructor(e){super(e),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"query"}),Object.defineProperty(this,"retriever",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"combineDocumentsChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSourceDocuments",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.retriever=e.retriever,this.combineDocumentsChain=e.combineDocumentsChain,this.inputKey=e.inputKey??this.inputKey,this.returnSourceDocuments=e.returnSourceDocuments??this.returnSourceDocuments}async _call(e,r){if(!(this.inputKey in e))throw new Error(`Question key "${this.inputKey}" not found.`);let n=e[this.inputKey],i=await this.retriever.getRelevantDocuments(n,r?.getChild("retriever")),a={question:n,input_documents:i},s=await this.combineDocumentsChain.call(a,r?.getChild("combine_documents"));return this.returnSourceDocuments?{...s,sourceDocuments:i}:s}_chainType(){return"retrieval_qa"}static async deserialize(e,r){throw new Error("Not implemented")}serialize(){throw new Error("Not implemented")}static fromLLM(e,r,n){let i=In(e,{prompt:n?.prompt});return new this({...n,retriever:r,combineDocumentsChain:i})}};l();Fe();qe();l();l();za();ve();l();var Fm=be(Kr(),1);Fe();Gr();Qn();Tt();l();Fe();l();qe();l();l();dn();qe();ve();l();l();l();var yx=be(mi(),1);Ei();Ei();l();dn();ve();l();l();Fe();l();var wx=be(mi(),1);ve();l();Ei();qe();l();var vx=be(mi(),1);ve();qe();l();l();l();function iy(t){return typeof t>"u"||t===null}function xx(t){return typeof t=="object"&&t!==null}function Ox(t){return Array.isArray(t)?t:iy(t)?[]:[t]}function Ax(t,e){var r,n,i,a;if(e)for(a=Object.keys(e),r=0,n=a.length;r<n;r+=1)i=a[r],t[i]=e[i];return t}function Px(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Ex(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Tx=iy,Cx=xx,Ix=Ox,Sx=Px,jx=Ex,kx=Ax,Pe={isNothing:Tx,isObject:Cx,toArray:Ix,repeat:Sx,isNegativeZero:jx,extend:kx};function ay(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Ni(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=ay(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ni.prototype=Object.create(Error.prototype);Ni.prototype.constructor=Ni;Ni.prototype.toString=function(e){return this.name+": "+ay(this,e)};var We=Ni;function Kl(t,e,r,n,i){var a="",s="",o=Math.floor(i/2)-1;return n-e>o&&(a=" ... ",e=n-o+a.length),r-n>o&&(s=" ...",r=n+o-s.length),{str:a+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+a.length}}function $l(t,e){return Pe.repeat(" ",e-t.length)+t}function Rx(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],a,s=-1;a=r.exec(t.buffer);)i.push(a.index),n.push(a.index+a[0].length),t.position<=a.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var o="",u,c,d=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)c=Kl(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),p),o=Pe.repeat(" ",e.indent)+$l((t.line-u+1).toString(),d)+" | "+c.str+`
`+o;for(c=Kl(t.buffer,n[s],i[s],t.position,p),o+=Pe.repeat(" ",e.indent)+$l((t.line+1).toString(),d)+" | "+c.str+`
`,o+=Pe.repeat("-",e.indent+d+3+c.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)c=Kl(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),p),o+=Pe.repeat(" ",e.indent)+$l((t.line+u+1).toString(),d)+" | "+c.str+`
`;return o.replace(/\n$/,"")}var Nx=Rx,Mx=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Lx=["scalar","sequence","mapping"];function Dx(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function qx(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(Mx.indexOf(r)===-1)throw new We('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Dx(e.styleAliases||null),Lx.indexOf(this.kind)===-1)throw new We('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ue=qx;function zm(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(a,s){a.tag===n.tag&&a.kind===n.kind&&a.multi===n.multi&&(i=s)}),r[i]=n}),r}function Fx(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function Hl(t){return this.extend(t)}Hl.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ue)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new We("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(a){if(!(a instanceof Ue))throw new We("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&a.loadKind!=="scalar")throw new We("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new We("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(a){if(!(a instanceof Ue))throw new We("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Hl.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=zm(i,"implicit"),i.compiledExplicit=zm(i,"explicit"),i.compiledTypeMap=Fx(i.compiledImplicit,i.compiledExplicit),i};var Ux=Hl,Vx=new Ue("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Bx=new Ue("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),zx=new Ue("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Kx=new Ux({explicit:[Vx,Bx,zx]});function $x(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Zx(){return null}function Hx(t){return t===null}var Jx=new Ue("tag:yaml.org,2002:null",{kind:"scalar",resolve:$x,construct:Zx,predicate:Hx,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Yx(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Wx(t){return t==="true"||t==="True"||t==="TRUE"}function Gx(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Qx=new Ue("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Yx,construct:Wx,predicate:Gx,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Xx(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function eO(t){return 48<=t&&t<=55}function tO(t){return 48<=t&&t<=57}function rO(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Xx(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!eO(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!tO(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function nO(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function iO(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Pe.isNegativeZero(t)}var aO=new Ue("tag:yaml.org,2002:int",{kind:"scalar",resolve:rO,construct:nO,predicate:iO,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),sO=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function oO(t){return!(t===null||!sO.test(t)||t[t.length-1]==="_")}function uO(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var lO=/^[-+]?[0-9]+e/;function cO(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Pe.isNegativeZero(t))return"-0.0";return r=t.toString(10),lO.test(r)?r.replace("e",".e"):r}function dO(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Pe.isNegativeZero(t))}var pO=new Ue("tag:yaml.org,2002:float",{kind:"scalar",resolve:oO,construct:uO,predicate:dO,represent:cO,defaultStyle:"lowercase"}),hO=Kx.extend({implicit:[Jx,Qx,aO,pO]}),fO=hO,sy=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),oy=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function mO(t){return t===null?!1:sy.exec(t)!==null||oy.exec(t)!==null}function yO(t){var e,r,n,i,a,s,o,u=0,c=null,d,p,b;if(e=sy.exec(t),e===null&&(e=oy.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(a=+e[4],s=+e[5],o=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],p=+(e[11]||0),c=(d*60+p)*6e4,e[9]==="-"&&(c=-c)),b=new Date(Date.UTC(r,n,i,a,s,o,u)),c&&b.setTime(b.getTime()-c),b}function gO(t){return t.toISOString()}var bO=new Ue("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:mO,construct:yO,instanceOf:Date,represent:gO});function wO(t){return t==="<<"||t===null}var _O=new Ue("tag:yaml.org,2002:merge",{kind:"scalar",resolve:wO}),Ql=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function vO(t){if(t===null)return!1;var e,r,n=0,i=t.length,a=Ql;for(r=0;r<i;r++)if(e=a.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function xO(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,a=Ql,s=0,o=[];for(e=0;e<i;e++)e%4===0&&e&&(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)),s=s<<6|a.indexOf(n.charAt(e));return r=i%4*6,r===0?(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)):r===18?(o.push(s>>10&255),o.push(s>>2&255)):r===12&&o.push(s>>4&255),new Uint8Array(o)}function OO(t){var e="",r=0,n,i,a=t.length,s=Ql;for(n=0;n<a;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=a%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function AO(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var PO=new Ue("tag:yaml.org,2002:binary",{kind:"scalar",resolve:vO,construct:xO,predicate:AO,represent:OO}),EO=Object.prototype.hasOwnProperty,TO=Object.prototype.toString;function CO(t){if(t===null)return!0;var e=[],r,n,i,a,s,o=t;for(r=0,n=o.length;r<n;r+=1){if(i=o[r],s=!1,TO.call(i)!=="[object Object]")return!1;for(a in i)if(EO.call(i,a))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(a)===-1)e.push(a);else return!1}return!0}function IO(t){return t!==null?t:[]}var SO=new Ue("tag:yaml.org,2002:omap",{kind:"sequence",resolve:CO,construct:IO}),jO=Object.prototype.toString;function kO(t){if(t===null)return!0;var e,r,n,i,a,s=t;for(a=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],jO.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;a[e]=[i[0],n[i[0]]]}return!0}function RO(t){if(t===null)return[];var e,r,n,i,a,s=t;for(a=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),a[e]=[i[0],n[i[0]]];return a}var NO=new Ue("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:kO,construct:RO}),MO=Object.prototype.hasOwnProperty;function LO(t){if(t===null)return!0;var e,r=t;for(e in r)if(MO.call(r,e)&&r[e]!==null)return!1;return!0}function DO(t){return t!==null?t:{}}var qO=new Ue("tag:yaml.org,2002:set",{kind:"mapping",resolve:LO,construct:DO}),uy=fO.extend({implicit:[bO,_O],explicit:[PO,SO,NO,qO]}),ir=Object.prototype.hasOwnProperty,lo=1,ly=2,cy=3,co=4,Zl=1,FO=2,Km=3,UO=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,VO=/[\x85\u2028\u2029]/,BO=/[,\[\]\{\}]/,dy=/^(?:!|!!|![a-z\-]+!)$/i,py=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function $m(t){return Object.prototype.toString.call(t)}function At(t){return t===10||t===13}function Fr(t){return t===9||t===32}function Ge(t){return t===9||t===32||t===10||t===13}function Rn(t){return t===44||t===91||t===93||t===123||t===125}function zO(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function KO(t){return t===120?2:t===117?4:t===85?8:0}function $O(t){return 48<=t&&t<=57?t-48:-1}function Zm(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function ZO(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var hy=new Array(256),fy=new Array(256);for(qr=0;qr<256;qr++)hy[qr]=Zm(qr)?1:0,fy[qr]=Zm(qr);var qr;function HO(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||uy,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function my(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=Nx(r),new We(e,r)}function Z(t,e){throw my(t,e)}function po(t,e){t.onWarning&&t.onWarning.call(null,my(t,e))}var Hm={YAML:function(e,r,n){var i,a,s;e.version!==null&&Z(e,"duplication of %YAML directive"),n.length!==1&&Z(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&Z(e,"ill-formed argument of the YAML directive"),a=parseInt(i[1],10),s=parseInt(i[2],10),a!==1&&Z(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&po(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,a;n.length!==2&&Z(e,"TAG directive accepts exactly two arguments"),i=n[0],a=n[1],dy.test(i)||Z(e,"ill-formed tag handle (first argument) of the TAG directive"),ir.call(e.tagMap,i)&&Z(e,'there is a previously declared suffix for "'+i+'" tag handle'),py.test(a)||Z(e,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch{Z(e,"tag prefix is malformed: "+a)}e.tagMap[i]=a}};function nr(t,e,r,n){var i,a,s,o;if(e<r){if(o=t.input.slice(e,r),n)for(i=0,a=o.length;i<a;i+=1)s=o.charCodeAt(i),s===9||32<=s&&s<=1114111||Z(t,"expected valid JSON character");else UO.test(o)&&Z(t,"the stream contains non-printable characters");t.result+=o}}function Jm(t,e,r,n){var i,a,s,o;for(Pe.isObject(r)||Z(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,o=i.length;s<o;s+=1)a=i[s],ir.call(e,a)||(e[a]=r[a],n[a]=!0)}function Nn(t,e,r,n,i,a,s,o,u){var c,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,d=i.length;c<d;c+=1)Array.isArray(i[c])&&Z(t,"nested arrays are not supported inside keys"),typeof i=="object"&&$m(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&$m(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(c=0,d=a.length;c<d;c+=1)Jm(t,e,a[c],r);else Jm(t,e,a,r);else!t.json&&!ir.call(r,i)&&ir.call(e,i)&&(t.line=s||t.line,t.lineStart=o||t.lineStart,t.position=u||t.position,Z(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:a}):e[i]=a,delete r[i];return e}function Xl(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Z(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function xe(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Fr(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(At(i))for(Xl(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&po(t,"deficient indentation"),n}function mo(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Ge(r)))}function ec(t,e){e===1?t.result+=" ":e>1&&(t.result+=Pe.repeat(`
`,e-1))}function JO(t,e,r){var n,i,a,s,o,u,c,d,p=t.kind,b=t.result,v;if(v=t.input.charCodeAt(t.position),Ge(v)||Rn(v)||v===35||v===38||v===42||v===33||v===124||v===62||v===39||v===34||v===37||v===64||v===96||(v===63||v===45)&&(i=t.input.charCodeAt(t.position+1),Ge(i)||r&&Rn(i)))return!1;for(t.kind="scalar",t.result="",a=s=t.position,o=!1;v!==0;){if(v===58){if(i=t.input.charCodeAt(t.position+1),Ge(i)||r&&Rn(i))break}else if(v===35){if(n=t.input.charCodeAt(t.position-1),Ge(n))break}else{if(t.position===t.lineStart&&mo(t)||r&&Rn(v))break;if(At(v))if(u=t.line,c=t.lineStart,d=t.lineIndent,xe(t,!1,-1),t.lineIndent>=e){o=!0,v=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=c,t.lineIndent=d;break}}o&&(nr(t,a,s,!1),ec(t,t.line-u),a=s=t.position,o=!1),Fr(v)||(s=t.position+1),v=t.input.charCodeAt(++t.position)}return nr(t,a,s,!1),t.result?!0:(t.kind=p,t.result=b,!1)}function YO(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(nr(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else At(r)?(nr(t,n,i,!0),ec(t,xe(t,!1,e)),n=i=t.position):t.position===t.lineStart&&mo(t)?Z(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Z(t,"unexpected end of the stream within a single quoted scalar")}function WO(t,e){var r,n,i,a,s,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return nr(t,r,t.position,!0),t.position++,!0;if(o===92){if(nr(t,r,t.position,!0),o=t.input.charCodeAt(++t.position),At(o))xe(t,!1,e);else if(o<256&&hy[o])t.result+=fy[o],t.position++;else if((s=KO(o))>0){for(i=s,a=0;i>0;i--)o=t.input.charCodeAt(++t.position),(s=zO(o))>=0?a=(a<<4)+s:Z(t,"expected hexadecimal character");t.result+=ZO(a),t.position++}else Z(t,"unknown escape sequence");r=n=t.position}else At(o)?(nr(t,r,n,!0),ec(t,xe(t,!1,e)),r=n=t.position):t.position===t.lineStart&&mo(t)?Z(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}Z(t,"unexpected end of the stream within a double quoted scalar")}function GO(t,e){var r=!0,n,i,a,s=t.tag,o,u=t.anchor,c,d,p,b,v,m=Object.create(null),x,T,k,S;if(S=t.input.charCodeAt(t.position),S===91)d=93,v=!1,o=[];else if(S===123)d=125,v=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),S=t.input.charCodeAt(++t.position);S!==0;){if(xe(t,!0,e),S=t.input.charCodeAt(t.position),S===d)return t.position++,t.tag=s,t.anchor=u,t.kind=v?"mapping":"sequence",t.result=o,!0;r?S===44&&Z(t,"expected the node content, but found ','"):Z(t,"missed comma between flow collection entries"),T=x=k=null,p=b=!1,S===63&&(c=t.input.charCodeAt(t.position+1),Ge(c)&&(p=b=!0,t.position++,xe(t,!0,e))),n=t.line,i=t.lineStart,a=t.position,Mn(t,e,lo,!1,!0),T=t.tag,x=t.result,xe(t,!0,e),S=t.input.charCodeAt(t.position),(b||t.line===n)&&S===58&&(p=!0,S=t.input.charCodeAt(++t.position),xe(t,!0,e),Mn(t,e,lo,!1,!0),k=t.result),v?Nn(t,o,m,T,x,k,n,i,a):p?o.push(Nn(t,null,m,T,x,k,n,i,a)):o.push(x),xe(t,!0,e),S=t.input.charCodeAt(t.position),S===44?(r=!0,S=t.input.charCodeAt(++t.position)):r=!1}Z(t,"unexpected end of the stream within a flow collection")}function QO(t,e){var r,n,i=Zl,a=!1,s=!1,o=e,u=0,c=!1,d,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)Zl===i?i=p===43?Km:FO:Z(t,"repeat of a chomping mode identifier");else if((d=$O(p))>=0)d===0?Z(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Z(t,"repeat of an indentation width identifier"):(o=e+d-1,s=!0);else break;if(Fr(p)){do p=t.input.charCodeAt(++t.position);while(Fr(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!At(p)&&p!==0)}for(;p!==0;){for(Xl(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!s||t.lineIndent<o)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>o&&(o=t.lineIndent),At(p)){u++;continue}if(t.lineIndent<o){i===Km?t.result+=Pe.repeat(`
`,a?1+u:u):i===Zl&&a&&(t.result+=`
`);break}for(n?Fr(p)?(c=!0,t.result+=Pe.repeat(`
`,a?1+u:u)):c?(c=!1,t.result+=Pe.repeat(`
`,u+1)):u===0?a&&(t.result+=" "):t.result+=Pe.repeat(`
`,u):t.result+=Pe.repeat(`
`,a?1+u:u),a=!0,s=!0,u=0,r=t.position;!At(p)&&p!==0;)p=t.input.charCodeAt(++t.position);nr(t,r,t.position,!1)}return!0}function Ym(t,e){var r,n=t.tag,i=t.anchor,a=[],s,o=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Z(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!Ge(s))));){if(o=!0,t.position++,xe(t,!0,-1)&&t.lineIndent<=e){a.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,Mn(t,e,cy,!1,!0),a.push(t.result),xe(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)Z(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=a,!0):!1}function XO(t,e,r){var n,i,a,s,o,u,c=t.tag,d=t.anchor,p={},b=Object.create(null),v=null,m=null,x=null,T=!1,k=!1,S;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),S=t.input.charCodeAt(t.position);S!==0;){if(!T&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Z(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),a=t.line,(S===63||S===58)&&Ge(n))S===63?(T&&(Nn(t,p,b,v,m,null,s,o,u),v=m=x=null),k=!0,T=!0,i=!0):T?(T=!1,i=!0):Z(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,S=n;else{if(s=t.line,o=t.lineStart,u=t.position,!Mn(t,r,ly,!1,!0))break;if(t.line===a){for(S=t.input.charCodeAt(t.position);Fr(S);)S=t.input.charCodeAt(++t.position);if(S===58)S=t.input.charCodeAt(++t.position),Ge(S)||Z(t,"a whitespace character is expected after the key-value separator within a block mapping"),T&&(Nn(t,p,b,v,m,null,s,o,u),v=m=x=null),k=!0,T=!1,i=!1,v=t.tag,m=t.result;else if(k)Z(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=d,!0}else if(k)Z(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=d,!0}if((t.line===a||t.lineIndent>e)&&(T&&(s=t.line,o=t.lineStart,u=t.position),Mn(t,e,co,!0,i)&&(T?m=t.result:x=t.result),T||(Nn(t,p,b,v,m,x,s,o,u),v=m=x=null),xe(t,!0,-1),S=t.input.charCodeAt(t.position)),(t.line===a||t.lineIndent>e)&&S!==0)Z(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return T&&Nn(t,p,b,v,m,null,s,o,u),k&&(t.tag=c,t.anchor=d,t.kind="mapping",t.result=p),k}function eA(t){var e,r=!1,n=!1,i,a,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&Z(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(a=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):Z(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Ge(s);)s===33&&(n?Z(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),dy.test(i)||Z(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);a=t.input.slice(e,t.position),BO.test(a)&&Z(t,"tag suffix cannot contain flow indicator characters")}a&&!py.test(a)&&Z(t,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch{Z(t,"tag name is malformed: "+a)}return r?t.tag=a:ir.call(t.tagMap,i)?t.tag=t.tagMap[i]+a:i==="!"?t.tag="!"+a:i==="!!"?t.tag="tag:yaml.org,2002:"+a:Z(t,'undeclared tag handle "'+i+'"'),!0}function tA(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&Z(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Ge(r)&&!Rn(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Z(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function rA(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Ge(n)&&!Rn(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Z(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),ir.call(t.anchorMap,r)||Z(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],xe(t,!0,-1),!0}function Mn(t,e,r,n,i){var a,s,o,u=1,c=!1,d=!1,p,b,v,m,x,T;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,a=s=o=co===r||cy===r,n&&xe(t,!0,-1)&&(c=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;eA(t)||tA(t);)xe(t,!0,-1)?(c=!0,o=a,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):o=!1;if(o&&(o=c||i),(u===1||co===r)&&(lo===r||ly===r?x=e:x=e+1,T=t.position-t.lineStart,u===1?o&&(Ym(t,T)||XO(t,T,x))||GO(t,x)?d=!0:(s&&QO(t,x)||YO(t,x)||WO(t,x)?d=!0:rA(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&Z(t,"alias node should not have any properties")):JO(t,x,lo===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=o&&Ym(t,T))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Z(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,b=t.implicitTypes.length;p<b;p+=1)if(m=t.implicitTypes[p],m.resolve(t.result)){t.result=m.construct(t.result),t.tag=m.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(ir.call(t.typeMap[t.kind||"fallback"],t.tag))m=t.typeMap[t.kind||"fallback"][t.tag];else for(m=null,v=t.typeMap.multi[t.kind||"fallback"],p=0,b=v.length;p<b;p+=1)if(t.tag.slice(0,v[p].tag.length)===v[p].tag){m=v[p];break}m||Z(t,"unknown tag !<"+t.tag+">"),t.result!==null&&m.kind!==t.kind&&Z(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+m.kind+'", not "'+t.kind+'"'),m.resolve(t.result,t.tag)?(t.result=m.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Z(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function nA(t){var e=t.position,r,n,i,a=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(xe(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(a=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Ge(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&Z(t,"directive name must not be less than one character in length");s!==0;){for(;Fr(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!At(s));break}if(At(s))break;for(r=t.position;s!==0&&!Ge(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&Xl(t),ir.call(Hm,n)?Hm[n](t,n,i):po(t,'unknown document directive "'+n+'"')}if(xe(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,xe(t,!0,-1)):a&&Z(t,"directives end mark is expected"),Mn(t,t.lineIndent-1,co,!1,!0),xe(t,!0,-1),t.checkLineBreaks&&VO.test(t.input.slice(e,t.position))&&po(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&mo(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,xe(t,!0,-1));return}if(t.position<t.length-1)Z(t,"end of the stream or a document separator is expected");else return}function yy(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new HO(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,Z(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)nA(r);return r.documents}function iA(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=yy(t,r);if(typeof e!="function")return n;for(var i=0,a=n.length;i<a;i+=1)e(n[i])}function aA(t,e){var r=yy(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new We("expected a single document in the stream, but found more")}}var sA=iA,oA=aA,gy={loadAll:sA,load:oA},by=Object.prototype.toString,wy=Object.prototype.hasOwnProperty,tc=65279,uA=9,Mi=10,lA=13,cA=32,dA=33,pA=34,Jl=35,hA=37,fA=38,mA=39,yA=42,_y=44,gA=45,ho=58,bA=61,wA=62,_A=63,vA=64,vy=91,xy=93,xA=96,Oy=123,OA=124,Ay=125,Ve={};Ve[0]="\\0";Ve[7]="\\a";Ve[8]="\\b";Ve[9]="\\t";Ve[10]="\\n";Ve[11]="\\v";Ve[12]="\\f";Ve[13]="\\r";Ve[27]="\\e";Ve[34]='\\"';Ve[92]="\\\\";Ve[133]="\\N";Ve[160]="\\_";Ve[8232]="\\L";Ve[8233]="\\P";var AA=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],PA=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function EA(t,e){var r,n,i,a,s,o,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,a=n.length;i<a;i+=1)s=n[i],o=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&wy.call(u.styleAliases,o)&&(o=u.styleAliases[o]),r[s]=o;return r}function TA(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new We("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Pe.repeat("0",n-e.length)+e}var CA=1,Li=2;function IA(t){this.schema=t.schema||uy,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Pe.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=EA(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Li:CA,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Wm(t,e){for(var r=Pe.repeat(" ",e),n=0,i=-1,a="",s,o=t.length;n<o;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=o):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(a+=r),a+=s;return a}function Yl(t,e){return`
`+Pe.repeat(" ",t.indent*e)}function SA(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function fo(t){return t===cA||t===uA}function Di(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==tc||65536<=t&&t<=1114111}function Gm(t){return Di(t)&&t!==tc&&t!==lA&&t!==Mi}function Qm(t,e,r){var n=Gm(t),i=n&&!fo(t);return(r?n:n&&t!==_y&&t!==vy&&t!==xy&&t!==Oy&&t!==Ay)&&t!==Jl&&!(e===ho&&!i)||Gm(e)&&!fo(e)&&t===Jl||e===ho&&i}function jA(t){return Di(t)&&t!==tc&&!fo(t)&&t!==gA&&t!==_A&&t!==ho&&t!==_y&&t!==vy&&t!==xy&&t!==Oy&&t!==Ay&&t!==Jl&&t!==fA&&t!==yA&&t!==dA&&t!==OA&&t!==bA&&t!==wA&&t!==mA&&t!==pA&&t!==hA&&t!==vA&&t!==xA}function kA(t){return!fo(t)&&t!==ho}function Ri(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Py(t){var e=/^\n* /;return e.test(t)}var Ey=1,Wl=2,Ty=3,Cy=4,kn=5;function RA(t,e,r,n,i,a,s,o){var u,c=0,d=null,p=!1,b=!1,v=n!==-1,m=-1,x=jA(Ri(t,0))&&kA(Ri(t,t.length-1));if(e||s)for(u=0;u<t.length;c>=65536?u+=2:u++){if(c=Ri(t,u),!Di(c))return kn;x=x&&Qm(c,d,o),d=c}else{for(u=0;u<t.length;c>=65536?u+=2:u++){if(c=Ri(t,u),c===Mi)p=!0,v&&(b=b||u-m-1>n&&t[m+1]!==" ",m=u);else if(!Di(c))return kn;x=x&&Qm(c,d,o),d=c}b=b||v&&u-m-1>n&&t[m+1]!==" "}return!p&&!b?x&&!s&&!i(t)?Ey:a===Li?kn:Wl:r>9&&Py(t)?kn:s?a===Li?kn:Wl:b?Cy:Ty}function NA(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Li?'""':"''";if(!t.noCompatMode&&(AA.indexOf(e)!==-1||PA.test(e)))return t.quotingType===Li?'"'+e+'"':"'"+e+"'";var a=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-a),o=n||t.flowLevel>-1&&r>=t.flowLevel;function u(c){return SA(t,c)}switch(RA(e,o,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case Ey:return e;case Wl:return"'"+e.replace(/'/g,"''")+"'";case Ty:return"|"+Xm(e,t.indent)+ey(Wm(e,a));case Cy:return">"+Xm(e,t.indent)+ey(Wm(MA(e,s),a));case kn:return'"'+LA(e)+'"';default:throw new We("impossible error: invalid scalar style")}}()}function Xm(t,e){var r=Py(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),a=i?"+":n?"":"-";return r+a+`
`}function ey(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function MA(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,r.lastIndex=c,ty(t.slice(0,c),e)}(),i=t[0]===`
`||t[0]===" ",a,s;s=r.exec(t);){var o=s[1],u=s[2];a=u[0]===" ",n+=o+(!i&&!a&&u!==""?`
`:"")+ty(u,e),i=a}return n}function ty(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,a,s=0,o=0,u="";n=r.exec(t);)o=n.index,o-i>e&&(a=s>i?s:o,u+=`
`+t.slice(i,a),i=a+1),s=o;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function LA(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Ri(t,i),n=Ve[r],!n&&Di(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||TA(r);return e}function DA(t,e,r){var n="",i=t.tag,a,s,o;for(a=0,s=r.length;a<s;a+=1)o=r[a],t.replacer&&(o=t.replacer.call(r,String(a),o)),(Ft(t,e,o,!1,!1)||typeof o>"u"&&Ft(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function ry(t,e,r,n){var i="",a=t.tag,s,o,u;for(s=0,o=r.length;s<o;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(Ft(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&Ft(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Yl(t,e)),t.dump&&Mi===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=a,t.dump=i||"[]"}function qA(t,e,r){var n="",i=t.tag,a=Object.keys(r),s,o,u,c,d;for(s=0,o=a.length;s<o;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=a[s],c=r[u],t.replacer&&(c=t.replacer.call(r,u,c)),Ft(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ft(t,e,c,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function FA(t,e,r,n){var i="",a=t.tag,s=Object.keys(r),o,u,c,d,p,b;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new We("sortKeys must be a boolean or a function");for(o=0,u=s.length;o<u;o+=1)b="",(!n||i!=="")&&(b+=Yl(t,e)),c=s[o],d=r[c],t.replacer&&(d=t.replacer.call(r,c,d)),Ft(t,e+1,c,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&Mi===t.dump.charCodeAt(0)?b+="?":b+="? "),b+=t.dump,p&&(b+=Yl(t,e)),Ft(t,e+1,d,!0,p)&&(t.dump&&Mi===t.dump.charCodeAt(0)?b+=":":b+=": ",b+=t.dump,i+=b));t.tag=a,t.dump=i||"{}"}function ny(t,e,r){var n,i,a,s,o,u;for(i=r?t.explicitTypes:t.implicitTypes,a=0,s=i.length;a<s;a+=1)if(o=i[a],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof e=="object"&&e instanceof o.instanceOf)&&(!o.predicate||o.predicate(e))){if(r?o.multi&&o.representName?t.tag=o.representName(e):t.tag=o.tag:t.tag="?",o.represent){if(u=t.styleMap[o.tag]||o.defaultStyle,by.call(o.represent)==="[object Function]")n=o.represent(e,u);else if(wy.call(o.represent,u))n=o.represent[u](e,u);else throw new We("!<"+o.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function Ft(t,e,r,n,i,a,s){t.tag=null,t.dump=r,ny(t,r,!1)||ny(t,r,!0);var o=by.call(t.dump),u=n,c;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=o==="[object Object]"||o==="[object Array]",p,b;if(d&&(p=t.duplicates.indexOf(r),b=p!==-1),(t.tag!==null&&t.tag!=="?"||b||t.indent!==2&&e>0)&&(i=!1),b&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(d&&b&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),o==="[object Object]")n&&Object.keys(t.dump).length!==0?(FA(t,e,t.dump,i),b&&(t.dump="&ref_"+p+t.dump)):(qA(t,e,t.dump),b&&(t.dump="&ref_"+p+" "+t.dump));else if(o==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?ry(t,e-1,t.dump,i):ry(t,e,t.dump,i),b&&(t.dump="&ref_"+p+t.dump)):(DA(t,e,t.dump),b&&(t.dump="&ref_"+p+" "+t.dump));else if(o==="[object String]")t.tag!=="?"&&NA(t,t.dump,e,a,u);else{if(o==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new We("unacceptable kind of an object to dump "+o)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}function UA(t,e){var r=[],n=[],i,a;for(Gl(t,r,n),i=0,a=n.length;i<a;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(a)}function Gl(t,e,r){var n,i,a;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,a=t.length;i<a;i+=1)Gl(t[i],e,r);else for(n=Object.keys(t),i=0,a=n.length;i<a;i+=1)Gl(t[n[i]],e,r)}function VA(t,e){e=e||{};var r=new IA(e);r.noRefs||UA(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ft(r,0,n,!0,!0)?r.dump+`
`:""}var BA=VA,zA={dump:BA};function rc(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var KA=gy.load,GB=gy.loadAll,QB=zA.dump;var XB=rc("safeLoad","load"),ez=rc("safeLoadAll","loadAll"),tz=rc("safeDump","dump");Fe();qe();xl();yr();Si();globalThis.langchain={OpenAI:Cn,MemoryVectorStore:Ws,OpenAIEmbeddings:Qs,RetrievalQAChain:jn,loadSummarizationChain:zl,loadQARefineChain:Ul,TokenTextSplitter:to};})();
